System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./storageManager.ts","./resourceUtil.ts","./lodash.ts"],(function(o){var s,i,t,u,e,n,a,r,c,d;return{setters:[function(o){s=o.createClass},function(o){i=o.cclegacy,t=o._decorator,u=o.Node,e=o.director,n=o.AudioSource,a=o.AudioClip},function(o){r=o.StorageManager},function(o){c=o.ResourceUtil},function(o){d=o.Lodash}],execute:function(){var h,l;i._RF.push({},"5e2ecZFEJFEHoCgx6lXVYHB","audioManager",void 0);var p=t.ccclass;t.property,o("AudioManager",p("AudioManager")(((l=function(){function o(){this._persistRootNode=null,this._audioSources=[],this.dictWeaponSoundIndex={},this.musicVolume=.8,this.soundVolume=1,this.audios={},this.arrSound=[]}var i=o.prototype;return i.init=function(){this._persistRootNode||(this._persistRootNode=new u("audio"),this.openAudio(),e.getScene().addChild(this._persistRootNode),e.addPersistRootNode(this._persistRootNode),this.musicVolume=this.getAudioSetting(!0)?.8:0,this.soundVolume=this.getAudioSetting(!1)?1:0)},i._getAudioSource=function(o){for(var s,i=0;i<this._audioSources.length;++i){var t=this._audioSources[i];if(!t.playing){s=t;break}}return s||((s=this._persistRootNode.addComponent(n)).playOnAwake=!1,this._audioSources.push(s)),s.node.off(n.EventType.ENDED),s.clip=o,s.currentTime=0,s},i.getAudioSetting=function(o){var s;return!(s=o?r.instance.getGlobalData("music"):r.instance.getGlobalData("sound"))||"true"===s},i.playMusic=function(o,s){var i=this,t="audio/music/"+o;c.loadRes(t,a,(function(t,u){var e=i._getAudioSource(u),n={source:e,isMusic:!0};i.audios[o]=n,e.volume=i.musicVolume,e.loop=s,e.play()}))},i.playSound=function(o,s){var i=this;if(void 0===s&&(s=!1),this.soundVolume){c.loadRes("audio/sound/"+o,a,(function(t,u){var e=i._getAudioSource(u),a={source:e,isMusic:!1};i.arrSound.push(a),s&&(i.audios[o]=a),e.volume=i.soundVolume,e.loop=s,e.play(),e.node.on(n.EventType.ENDED,(function(){d.remove(i.arrSound,(function(o){return o.source===a.source}))}))}))}},i.stop=function(o){this.audios.hasOwnProperty(o)&&this.audios[o].source.stop()},i.stopAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.stop()}},i.getMusicVolume=function(){return this.musicVolume},i.setMusic=function(o){for(var s in this.musicVolume=o,this.audios){if(this.audios.hasOwnProperty(s)&&this.audios[s].isMusic)this.audios[s].source.volume=this.musicVolume}},i.pauseAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.pause()}},i.resumeAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.play()}},i.openMusic=function(){this.setMusic(.8),r.instance.setGlobalData("music","true")},i.closeMusic=function(){this.setMusic(0),r.instance.setGlobalData("music","false")},i.openSound=function(){this.setSound(1),r.instance.setGlobalData("sound","true")},i.closeSound=function(){this.setSound(0),r.instance.setGlobalData("sound","false")},i.openAudio=function(){this.openMusic(),this.openSound()},i.closeAudio=function(){this.closeMusic(),this.closeSound()},i.setSound=function(o){for(var s in this.soundVolume=o,this.audios){if(this.audios.hasOwnProperty(s)&&!this.audios[s].isMusic)this.audios[s].source.volume=this.soundVolume}for(var i=0;i<this.arrSound.length;i++){this.arrSound[i].source.volume=this.soundVolume}},i.stopSingleSound=function(o){this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic&&this.audios[o].source.stop()},s(o,null,[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}())._instance=void 0,h=l))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc"],(function(r){var n,e;return{setters:[function(r){n=r.cclegacy,e=r._decorator}],execute:function(){var t,a;n._RF.push({},"e55dbzBNn1NUrh8r5zusvCZ","clientEvent",void 0);var l=e.ccclass;e.property,r("ClientEvent",l("ClientEvent")(((a=function(){function r(){}return r.on=function(n,e,t){var a={handler:e,target:t},l=r._handlers[n];l||(l=[],r._handlers[n]=l);for(var c=0;c<l.length;c++)if(!l[c])return l[c]=a,c;return l.push(a),l.length},r.off=function(n,e,t){var a=r._handlers[n];if(a)for(var l=0;l<a.length;l++){var c=a[l];if(c.handler===e&&(!t||t===c.target)){a.splice(l,1);break}}},r.dispatchEvent=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];var l,c=r._handlers[n],h=[];for(l=1;l<arguments.length;l++)h.push(arguments[l]);if(c)for(l=0;l<c.length;l++){var i=c[l];i.handler&&i.handler.apply(i.target,h)}},r}())._handlers={},t=a))||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/coinTipsManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./clientEvent.ts"],(function(n){var e,o,i,t,s,r,a,c,p,l,u,f,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,o=n.inheritsLoose,i=n.initializerDefineProperty,t=n.assertThisInitialized},function(n){s=n.cclegacy,r=n._decorator,a=n.Prefab,c=n.Vec3,p=n.LabelComponent,l=n.Tween,u=n.Component},function(n){f=n.PoolManager},function(n){h=n.ClientEvent}],execute:function(){var w,v,d,g,T;s._RF.push({},"03627MpYD9GQ5cp4Rc77nQa","coinTipsManager",void 0);var C=r.ccclass,M=r.property;n("coinTipsManager",(w=C("coinTipsManager"),v=M(a),w((T=e((g=function(n){function e(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=n.call.apply(n,[this].concat(s))||this,i(e,"pfCoinTips",T,t(e)),e}o(e,n);var s=e.prototype;return s.onEnable=function(){h.on("showCoinTips",this.showCoinTips,this)},s.onDisable=function(){h.off("showCoinTips",this.showCoinTips,this)},s.showCoinTips=function(n,e){var o=f.instance.getNode(this.pfCoinTips,this.node),i=new c;window.mainCamera.convertToUINode(e,this.node,i),o.setPosition(i);var t=o.getChildByName("num");t&&(t.getComponent(p).string=n),o.setScale(0,0,0),o.tweenMove=new l(o).to(.3,{scale:new c(1.2,1.2,1.2)}).to(.1,{scale:new c(1,1,1)}).by(.6,{position:new c(0,100,0)}).union().call((function(){o.tweenMove=null,f.instance.putNode(o)})).start()},s.recrycle=function(){var n=[];this.node.children.forEach((function(e){n.push(e)})),n.forEach((function(n){n.tweenMove&&(n.tweenMove.stop(),n.tweenMove=null),f.instance.putNode(n)}))},e}(u)).prototype,"pfCoinTips",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/collider_manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./quad_tree.ts"],(function(e){var t,i,r,n,o,l,d;return{setters:[function(e){t=e.createClass},function(e){i=e.cclegacy,r=e.Vec3,n=e.MeshRenderer,o=e.Vec2},function(e){l=e.QuadRectNode,d=e.Quadtree}],execute:function(){i._RF.push({},"68051ugklJAr4VMT/qyZAZ7","collider_manager",void 0);var a=new r;e("ColliderManager",function(){function e(){this._quadTree=void 0,this._playersNode=[],this._itemCollider=null,this._quadTree=new d({x:0,y:0,width:160,height:120})}var i=e.prototype;return i.buildCollider=function(e){var t=this;this._quadTree.clear(),e.getComponentsInChildren(n).forEach((function(e){if(e.node.active){var i=new l(e.node);t._quadTree.insert(i)}}))},i.insertItem=function(e){this._quadTree.insert(e)},i.removeItem=function(e){e&&this._quadTree.remove(e)},i.addPlayer=function(e){this._playersNode.push(e)},i.bindItemCollider=function(e){this._itemCollider=e},i.checkRectIsEmpty=function(e){for(var t={x:e.x,y:e.y,width:e.radius,height:e.radius},i=this._quadTree.retrieve(t),r=0;r<i.length;r++){if(1==i[r].type){if(this.circleWithCircel(t,i[r]).collided)return!1}else if(this.circleWithRect(t,i[r]).collided)return!1}return!0},i.updatePlayerCollider=function(e,t,i){e.getWorldPosition(a);var r=new l(e);r.width=t;var n=this._quadTree.retrieve(r);n.sort((function(e,t){return Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)-Math.pow(t.x-r.x,2)-Math.pow(t.y-r.y,2)}));for(var o=0;o<n.length;o++)if(1==n[o].type){this.circleWithCircel(r,n[o]).collided&&this._itemCollider&&this._itemCollider(n[o],e,i)}else{var d=this.circleWithBoxNode(r,n[o].node);d.collided&&(r.y+=d.penetrationY,r.x+=d.penetrationX)}for(var c=0;c<this._playersNode.length;c++)if(e!=this._playersNode[c]){var h={x:this._playersNode[c].worldPosition.x,y:this._playersNode[c].worldPosition.z,width:t},s=this.circleWithCircel(r,h);s.collided&&(r.x+=s.penetrationX,r.y+=s.penetrationY)}e.setWorldPosition(r.x,a.y,r.y)},i.circleWithBoxNode=function(e,t){var i={x:t.worldPosition.x,y:t.worldPosition.z,width:t.worldScale.x,height:t.worldScale.z};if(0==t.eulerAngles.y)return this.circleWithRect(e,i);var r=new o(e.x-i.x,e.y-i.y),n=t.eulerAngles.y*(Math.PI/180);r.rotate(n);var l=this.circleWithRect({x:r.x,y:r.y,width:e.width},{x:0,y:0,width:i.width,height:i.height});return l.collided?(r.set(l.penetrationX,l.penetrationY),r.rotate(-n),{collided:!0,penetrationX:r.x,penetrationY:r.y}):{collided:!1}},i.circleWithRect=function(e,t){var i=e.width,r=t.width/2,n=t.height/2,o=t.x,l=t.y,d=e.x-o,a=e.y-l,c=Math.abs(d)-r,h=Math.abs(a)-n;if(c<=i&&h<=i){var s=i-c,u=i-h;return d<0&&(s=-s),a<0&&(u=-u),Math.abs(s)>=Math.abs(u)?s=0:u=0,{collided:!0,penetrationX:s,penetrationY:u}}return{collided:!1}},i.circleWithCircel=function(e,t){var i=t.x-e.x,r=t.y-e.y,n=Math.sqrt(i*i+r*r);if(n<e.width+t.width){var o=e.x+i/n*e.width,l=e.y+r/n*e.width;return{collided:!0,collisionX:o,collisionY:l,penetrationX:e.x-o+(t.x-o),penetrationY:e.y-l+(t.y-l)}}return{collided:!1}},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(E){var _,O,R,A;return{setters:[function(E){_=E.createClass},function(E){O=E.cclegacy,R=E.Enum},function(E){A=E._language}],execute:function(){O._RF.push({},"b08f08kiOlEA7e6qUWa7AnA","constant",void 0);var e=E("Constant",function(){function E(){}return _(E,null,[{key:"ROOM_TIPS",get:function(){return A===this.I18_LANGUAGE.CHINESE?this.ROOM_TIPS_ZH:this.ROOM_TIPS_EN}}]),E}());e.GAME_NAME="Coin",e.GAME_VERSION="1.0.1",e.GAME_FRAME=60,e.GAME_INIT_FRAME=60,e.LOCAL_CACHE={PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"},e.PTM_RATIO=1,e.GAME_OBJ_TYPE={PLAYER:1,COIN:2},e.ACTION={MOVE:1,STOP_MOVE:2,GAME_START:3,GAME_OVER:4,READY:5,HEART_BEAT:6,UPDATE_POS:8,VIBRATE:9,RUN:13,IDLE:14,IS_ATTACK_ED:12,HIT:7,ICON:15,HAMMER:16,CREATE_HAMMER:17,CREATE_ICON:18},e.NETWORK_STATUS={COMMON_OFFLINE:0,COMMON_ONLINE:1,RELAY_OFFLINE:2,RELAY_ONLINE:3},e.FRAME_SYNC_STATE={STOP:0,START:1},e.COIN_TYPE=R({COIN:1,PROP:2}),e.ADD_SIZE_PER_COIN=.03,e.MIN_SPEED_PERCENT=.2,e.INIT_MOVE_SPEED=20,e.GAME_TIME=60,e.MIN_PLAYER=2,e.MAX_PLAYER=2,e.EVENT_NAME={ON_GET_ROOM_INFO:"onGetRoomInfo",ON_RECV_SYNC:"onRecvSync",ON_GAME_READY:"onGameReady",ON_GAME_START:"onGameStart",ON_GAME_321:"onGame321",ON_GAME_END:"onGameEnd",ON_SHOW_COIN_TIPS:"showCoinTips",ON_OTHER_JOIN_ROOM:"onOtherJoinRoom",SEND_MSG:"sendMsg",SEND_MSG_HEIGHT:"sendMsgHeight",SEND_VT:"sendVt",OPEN_MEDIA:"openMedia",OPEN_CHANNEL:"openChannel",IS_TOUCH:"is_touch",GAME_INIT:"game_init",INIT_MEDIA:"init_media",INIT_CHANNEL:"init_channel",CREATE_HAMMER:"create_hammer",CREATE_COIN:"create_coin",DIS_JOIN:"dis_join",OPEN_PGS:"openPgs",HUAWEI_LOGIN_MSG:"huawei_login_msg",CLOSE_MESSAGE:"close_message"},e.PANEL_NAME={READY:"fight/ready",GAME_OVER:"fight/gameOver",FIGHT_UI:"fight/fightUI",READY_GO:"fight/readyGo",START_GAME:"fight/startPanel",SELECT_GAME:"fight/selectPanel",TIP_PANEL:"fight/tipPanel",JOIN_ROOM_PANEL:"fight/joinRoomPanel",MATCH_PANEL:"fight/matchPanel",TRANSITION:"fight/transitionPanel",TRANSITION_BG:"fight/transitionBgPanel",MESSAGE_PANEL:"fight/messagePanel",DOWNOFF_PANEL:"fight/downOffPanel",MEDIA_PANEL:"fight/mediaPanel"},e.SCENE_NAME={FIGHT:"fight",START:"start",SLECT:"select"},e.AUDIO_NAME={BACKGROUND:"background",WIN:"win",GO:"go",TICK:"tick",TIME_OUT:"timeout",GOLD:"gold",HIT:"hit"},e.EFFECT_NAME={RUNNING:"running",WIN:"leaveWinAni",TRANSITION:"transition07"},e.PROP_TYPE={TO_SELF:"toSelf",TO_ENEMY:"toEnemy"},e.ANI_TYPE={IDLE:"idle",RUN:"run",RUN_1:"run1",VICTORY:"victory",LOSE:"lose",LOSE_1:"lose1",ATTACK:"attack",HIT:"hit",DIZZY:"dizzy"},e.EASY_TOUCH={TOUCH_LEFT_X:"touchLeftX",TOUCH_LEFT_Y:"touchLeftY",TOUCH_RIGHT_X:"touchRightX",TOUCH_RIGHT_Y:"touchRightY"},e.PROP_DISAPPEAR_TIME=10,e.READY_PREFAB={GIRL_MODEL:"fight/girlUI",BOY_MODEL:"fight/boyUI",JOIN_EFFECT:"joinEff",VS_EFFECT:"vsAni"},e.ROOM_TIPS_ZH={CREATE:"创建房间。。。",WAITING:"请稍等，房主正在创建房间。。。",LEAVE:"您的对手已经离开房间。。。",IN_ROOM:"已在房间内。。。",CREATE_ROOM_ERROR:"创建房间失败",JOIN_ROOM_ERROR:"加入房间失败",NO_ROOM_ID:"请输入正确的房间号",LEAVE_ROOM_ERROR:"离开房间出错",LEAVE_ROOM_MSG:"确认退出房间？",LEAVE_ROOM_SUCCESS:"成功离开房间",JOIN_ROOM_SUCCESS:"成功加入房间",MATCH_ROOM_ERROR:"匹配房间出错",PLAYER_LENGHT_ERROR:"长度需要大于2",LEAVE_GAME:"是否退出游戏？",INPUT_MSG:"请输入文字",VT_ERROR:"未识别到语音",PLAYER_LEAVE_1:"队友离开队伍，",PLAYER_LEAVE_2:"秒游戏结束",INIT_FAIL:"登录失败",MEDIA_FAIL:"语音权限不足，语音未开启",WORLD_LABEL:"世界频道",ROOM_LABEL:"房间号:",LOGIN_GAME_ERROR:"进入场景异常，请重试",HUA_WEI_LOAGIN_ERROR:"华为登录失败，请改用普通账号登录"},e.ROOM_TIPS_EN={CREATE:"Create a room...",WAITING:"Please wait, the owner is creating a room...",LEAVE:"Your opponent has left the room...",IN_ROOM:"Already in the room...",CREATE_ROOM_ERROR:"Failed to create room ",JOIN_ROOM_ERROR:"Failed to join the room ",NO_ROOM_ID:"Please enter the correct room number ",LEAVE_ROOM_ERROR:"Error leaving the room ",LEAVE_ROOM_MSG:"Want to exit the room?",LEAVE_ROOM_SUCCESS:"Leave the room successfully ",JOIN_ROOM_SUCCESS:"Join_room_success ",MATCH_ROOM_ERROR:"Matching room error ",PLAYER_LENGHT_ERROR:"Length must be greater than 2",LEAVE_GAME:"Do you want to quit?",INPUT_MSG:"Please enter text ",VT_ERROR:"Speech not recognized ",PLAYER_LEAVE_1:"Teammate leaves team, ",PLAYER_LEAVE_2:"seconds game over ",INIT_FAIL:"Login failed ",MEDIA_FAIL:"Voice permission is insufficient, voice is not enabled ",WORLD_LABEL:"World Channel ",ROOM_LABEL:"Room number :",LOGIN_GAME_ERROR:"Enter the scene exception, please try again ",HUA_WEI_LOAGIN_ERROR:"Login to Huawei failed.Please use a common account to log in to Huawei."},e.PLAYER_ORIGIN_SCALE=1.5,e.WORLD_ID="cocosworldid00000",e.DIZZY_TIME=1,e.HAMMER_TIME=15,e.AUTO_GEN_COIN={SECOND_PER_TIMES:1,COIN_PER_TIMES:1,START_NUM:10,END_NUM:20},e.REVIVE_TIME=.5,e.INIT_COLLIDER_CIRCLE=.8,e.HAMMER_TIMES=1,e.AI_PLAYER_ID="ai00000",e.AI_PLAYER=1,e.HAMMER_POS=[[0,0,0],[-28,0,-25],[28,0,-25],[23,0,23],[-28,0,23]],e.AI_SPEED=.22,e.AI_POS_INDEX=[[1,26,27,19],[2,26,19],[1,3,22],[2,4,23],[3,24,5],[6,25,4],[5,7,20],[25,8,23,6],[10,11,18,17],[23,22],[13,11,18,9],[10,17,12,28],[11,16,13],[10,12,15],[13,15,16,12],[18,16,28,9],[15,17,28,9],[18,16,28,9],[15,17,28,9],[1,27,20],[6,21,19],[7,14,22,20],[23,2,14,21,2],[7,8,22,3,4],[25,23],[7,24],[27,19,22],[21,26,19],[7,21]],e.HUAWEI_LOGIN={SIGN_IN_SUCCESS:0,INIT_SUCCESS:1e4,INIT_UNDER_AGE:10001,INIT_ERROR:10002,SIGN_IN_ERROR:10003,NO_HUAWEI:10004},e.START_GAME="startGame",e.DISMISS="dismiss",e.START_GAME_TIME="start_game_time",e.I18_LANGUAGE={ENGLISH:"en",CHINESE:"zh"},O._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e._decorator}],execute:function(){var i,s;r._RF.push({},"d7554BuqnJLAKibwVUWte5P","csvManager",void 0);var u=n.ccclass,a=(n.property,[",",";","\t","|","^"]),o=["\r\n","\r","\n"],l=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},c={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:a[0],newline:o[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var s in r[n])t[s]=r[n][s];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,s=this.getLimit(r,e.length);i<s&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,s=e.split(t.newline);function u(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,s=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||s%2!=0);)-1!==n?(i=n+1,s++):r=r+t.newline+e.shift();var u,a=[],o=0,l=0,c=0,h=r.length;for(var f in r)if(r.hasOwnProperty(f)){var d=parseInt(f),v=r[f];0===d&&'"'===v&&(o++,l=1),'"'===v&&(o++,r[d-1]===t.delimiter&&l===d&&l++),'"'===v&&o%2==0&&(r[d+1]!==t.delimiter&&d+1!==h||(c=d,u=r.substring(l,c),a.push(u),c=l=c+2)),v===t.delimiter&&o%2==0&&((c=d)>l?(u=r.substring(l,c),a.push(u),c=l=c+1):c===l&&(a.push(""),c=l=c+1))}return(c=h)>=l&&(u=r.substring(l,c),a.push(u)),a}return r.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=u(s),t.cast=u(s),n=u(s)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,s[0].split(t.delimiter),t.cast);s.length>0;){var a=u(s);a.length>1&&r(i(a),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,s=n.length;i<s;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var s=0,u=this.getLimit(t.limit,e.length);s<u;s++)r(this.encodeCells(e[s],n,i));return!0},encodeObjects:function(e,t,r){var n,i,s=t.delimiter,u=t.newline;for(var a in n=[],i=[],e[0])n.push(a),i.push(e[0][a]);!0===t.header?r(this.encodeCells(n,s,u)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,s,u)),r(this.encodeCells(i,s));for(var o=1,l=this.getLimit(t.limit,e.length);o<l;o++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[o][n[c]]);r(this.encodeCells(i,s,u))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,a,i),t.newline=t.newline||this.mostFrequent(e,o,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",u("CSVManager")(((s=function(){function e(){this._csvTables={},this._csvTableForArr={},this._tableCast={},this._tableComment={}}var r=e.prototype;return r.addTable=function(e,t,r){if(!this._csvTables[e]||r){var n={},i=[];c.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this._tableCast[e]=c.opts.cast,this._tableComment[e]=c.opts.comment,this._csvTables[e]=n,this._csvTableForArr[e]=i}},r.getTableArr=function(e){return this._csvTableForArr[e]},r.getTable=function(e){return this._csvTables[e]},r.queryOne=function(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]},r.queryByID=function(e,t){return this.queryOne(e,null,t)},r.queryAll=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===r&&(i[s]=n[s]);return i},r.queryIn=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},s=Object.keys(n),u=s.length,a=0;a<u;a++){var o=n[s[a]];r.indexOf(o[t])>-1&&(i[s[a]]=o)}return i},r.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),s=i.length,u=Object.keys(t),a=u.length,o=0;o<s;o++){for(var l=r[i[o]],c=!0,h=0;h<a;h++){var f=u[h];c=c&&t[f]===l[f]&&!n[i[o]]}c&&(n[i[o]]=l)}return n},r.queryOneByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(var s in r){for(var u=r[s],a=!0,o=0;o<i;o++){var l=n[o];a=a&&t[l]===u[l]}if(a)return u}return null},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,i=s))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/displayManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./uiManager.ts","./audioManager.ts","./poolManager.ts","./constant.ts","./fighter.ts","./gameState.ts","./logicManager.ts","./gobeUtil.ts","./resourceUtil.ts","./propBase.ts","./gameCamera.ts"],(function(e){var n,t,a,i,o,r,c,s,l,p,u,f,d,h,E,g,_,y,P,N,m,M;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,c=e.Node,s=e.Prefab,l=e.Animation,p=e.Component},function(e){u=e.ClientEvent},function(e){f=e.UIManager},function(e){d=e.AudioManager},function(e){h=e.PoolManager},function(e){E=e.Constant},function(e){g=e.Fighter},function(e){_=e.PropType},function(e){y=e.LogicManager},function(e){P=e.GobeUtil},function(e){N=e.ResourceUtil},function(e){m=e.PropBase},function(e){M=e.GameCamera}],execute:function(){var A,v,G,b,C,I,O,R,D,S,w,L,T,U,z,V,Y;o._RF.push({},"e542d/3GJRLWYGHcJyxlKkU","displayManager",void 0);var k=r.ccclass,F=r.property;e("DisplayManager",(A=k("DisplayManager"),v=F(y),G=F(c),b=F(c),C=F(s),I=F(s),O=F(M),R=F(c),A((w=n((S=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,a(n,"logicManager",w,i(n)),a(n,"playerGroupNode",L,i(n)),a(n,"propGroupNode",T,i(n)),a(n,"coinPrefab",U,i(n)),a(n,"hammerPrefab",z,i(n)),a(n,"cameraManager",V,i(n)),a(n,"aiPosNode",Y,i(n)),n.dicPlayers={},n._dicProps={},n._isGameOver=!1,n}t(n,e);var o=n.prototype;return o.start=function(){this.reset()},o.onEnable=function(){u.on(E.EVENT_NAME.ON_GAME_READY,this._onGameReady,this),u.on(E.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),u.on(E.EVENT_NAME.ON_GAME_321,this._gameStart,this),u.on(E.EVENT_NAME.CREATE_COIN,this._onCreateCoin,this)},o.onDisable=function(){u.off(E.EVENT_NAME.ON_GAME_READY,this._onGameReady,this),u.off(E.EVENT_NAME.ON_GAME_END,this._onGameEnd,this),u.off(E.EVENT_NAME.ON_GAME_321,this._gameStart,this),u.off(E.EVENT_NAME.CREATE_COIN,this._onCreateCoin,this)},o._onCreateCoin=function(e){this.logicManager.onCreateCoin(e),this.dropCoin()},o._init=function(){var e=this;this._isGameOver=!1;var n=Object.keys(this.dicPlayers);n.forEach((function(n){h.instance.putNode(e.dicPlayers[parseInt(n)]),delete e.dicPlayers[parseInt(n)]})),(n=Object.keys(this._dicProps)).forEach((function(n){h.instance.putNode(e._dicProps[parseInt(n)]),delete e._dicProps[parseInt(n)]})),this.logicManager.currentGameState.props.forEach((function(n,t){e._dicProps[t]=e._createProp(n)}))},o._createProp=function(e){var n,t=this.coinPrefab;e.type===_.HAMMER&&(t=this.hammerPrefab);var a=h.instance.getNode(t,this.propGroupNode);return a.setPosition(e.position),null==(n=a.getComponent(m))||n.show(e),a},o.updateOwnState=function(e,n){var t=this;e.players.forEach((function(e,a){if(e.channel.openId==P.instance.ownPlayerId)t.dicPlayers[a].getComponent(g).playMove(t.logicManager,n,0==a?t.dicPlayers[1]:t.dicPlayers[0],e);else if(P.instance.isAi){t.dicPlayers[a].getComponent(g).playMoveAi(t.logicManager,n,0==a?t.dicPlayers[1]:t.dicPlayers[0],e)}}))},o.updateRun=function(e,n){var t=this;n.players.forEach((function(n,a){n.channel.openId==e&&t.dicPlayers[a].getComponent(g).playRun()}))},o.updateIdle=function(e,n){var t=this;n.players.forEach((function(n,a){n.channel.openId==e&&t.dicPlayers[a].getComponent(g).playIdle()}))},o.updateStateRecovery=function(e){var n=this,t=e.players;t.forEach((function(e,a){var i=n.dicPlayers[a];e=t[a];i&&(e.channel?(i.active=!0,i.getComponent(g).updateStateRecovery(e)):i&&(i.active=!1))}))},o.updateProp=function(e){var n=this;e.props.forEach((function(e,t){var a=n._dicProps[t];a&&!e.exist&&(h.instance.putNode(a),delete n._dicProps[t])}))},o.updateState=function(e,n,t){var a=this,i=n.players;i.forEach((function(n,o){var r=a.dicPlayers[o];n=i[o];r&&(n.channel?(r.active=!0,r.getComponent(g).updateState(e,n,t)):r&&(r.active=!1))})),n.props.forEach((function(n,t){var i=a._dicProps[t];if(i&&!n.exist&&(h.instance.putNode(i),delete a._dicProps[t]),i||!n.exist||n.dropPosition||(a._dicProps[t]=a._createProp(n)),i){var o=i.getComponent(m);null==o||o.updateState(e,n)}}))},o._gameStart=function(){var e,n=this;this.logicManager.checkIsReCovery(),f.instance.showDialog(E.PANEL_NAME.MEDIA_PANEL),null==(e=this.cameraManager.node.getComponent(l))||e.play(),f.instance.showDialog(E.PANEL_NAME.READY_GO,[function(){P.instance.startGame(),d.instance.playMusic(E.AUDIO_NAME.BACKGROUND,!0),f.instance.showDialog(E.PANEL_NAME.FIGHT_UI,[n]),P.instance.checkIsRoomOwner(P.instance.ownPlayerId)?n.cameraManager.init(n.dicPlayers[0]):n.cameraManager.init(n.dicPlayers[1]),n.cameraManager.startGame()}])},o.reset=function(){this.logicManager.setDefaultGameState(),this._init()},o._onGameEnd=function(){var e=this;if(!this._isGameOver){this.cameraManager.finishGame(),this._isGameOver=!0,f.instance.hideDialog(E.PANEL_NAME.FIGHT_UI),d.instance.playSound(E.AUDIO_NAME.TIME_OUT);var n=-1,t=this.logicManager.currentGameState.players;for(var a in t[0].score<t[1].score?n=1:t[0].score>t[1].score&&(n=0),this.dicPlayers){if(Object.prototype.hasOwnProperty.call(this.dicPlayers,a))this.dicPlayers[a].getComponent(g).showFighterGameOverAni(-1==n||n===Number(a))}this.scheduleOnce((function(){f.instance.hideDialog(E.PANEL_NAME.MESSAGE_PANEL),f.instance.hideDialog(E.PANEL_NAME.READY_GO),f.instance.hideDialog(E.PANEL_NAME.FIGHT_UI),f.instance.showTransitionBg((function(){f.instance.showDialog(E.PANEL_NAME.GAME_OVER,[e,n],(function(){}),!0)}))}),1.5)}},o._onGameReady=function(){var e=this;this.logicManager.currentGameState.players.forEach((function(n,t){if(n.channel){var a="player/girl";P.instance.checkIsRoomOwner(n.channel.openId)&&(a="player/boy"),N.loadModelRes(a).then((function(a){var i,o=h.instance.getNode(a,e.playerGroupNode);o.setPosition(n.position),o.setScale(E.PLAYER_ORIGIN_SCALE,E.PLAYER_ORIGIN_SCALE,E.PLAYER_ORIGIN_SCALE),o.eulerAngles=n.eulerAngles,null==(i=o.getComponent(g))||i.init(e,e.aiPosNode),e.dicPlayers[t]=o}))}}))},o.dropCoin=function(){var e=this;this.logicManager.currentGameState.props.forEach((function(n,t){var a;!e._dicProps[t]&&n.exist&&n.dropPosition&&(e._dicProps[t]=e._createProp(n),null==(a=e._dicProps[t].getComponent(m))||a.drop(n.dropPosition))}))},n}(p)).prototype,"logicManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(S.prototype,"playerGroupNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(S.prototype,"propGroupNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(S.prototype,"coinPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(S.prototype,"hammerPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(S.prototype,"cameraManager",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(S.prototype,"aiPosNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=S))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/down_off_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./constant.ts","./gobeUtil.ts","./LanguageData.ts"],(function(n){var t,e,o,a,c,r,s,i;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,a=n.Component},function(n){c=n.UIManager},function(n){r=n.Constant},function(n){s=n.GobeUtil},function(n){i=n.updateSceneRenderers}],execute:function(){var u;e._RF.push({},"83f5c943sxC+r+7me9coft9","down_off_panel",void 0);var f=o.ccclass;o.property,n("DownOffPanel",f("DownOffPanel")(u=function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var o=e.prototype;return o.show=function(){i()},o.onCancel=function(){s.instance.leaveGame(),c.instance.showTransition(r.SCENE_NAME.SLECT)},e}(a))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/easy_touch_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./easy_touch.ts","./clientEvent.ts"],(function(t){var i,o,h,e,n,s,c,a,u,r,T,_,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,h=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,c=t.view,a=t.input,u=t.Input,r=t.Component},function(t){T=t.Constant},function(t){_=t.EasyTouch},function(t){l=t.ClientEvent}],execute:function(){var f,v,y,d,g,E,M;n._RF.push({},"e1f2aKMO/JJx5GxxcZBuw7d","easy_touch_panel",void 0);var p=s.ccclass,I=s.property;t("EasyTouchPanel",(f=p("EasyTouchPanel"),v=I(_),y=I(_),f((E=i((g=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,h(i,"leftEasyTouch",E,e(i)),h(i,"rightEasyTouch",M,e(i)),i._startLeftMoveX=0,i._startLeftMoveY=0,i._startRightMoveX=0,i._startRightMoveY=0,i._canvasMidWidth=0,i._canvasMidHeight=0,i._leftTouchId=-1,i._rightTouchId=-1,i}o(i,t);var n=i.prototype;return n.start=function(){var t=c.getVisibleSize(),i=Math.round(t.width),o=Math.round(t.height);this._canvasMidWidth=.5*i,this._canvasMidHeight=.5*o},n.onEnable=function(){l.on(T.EVENT_NAME.GAME_INIT,this._init,this),a.on(u.EventType.TOUCH_START,this._onTouchStart,this),a.on(u.EventType.TOUCH_MOVE,this._onTouchMove,this),a.on(u.EventType.TOUCH_END,this._onTouchEnd,this)},n.onDisable=function(){a.off(u.EventType.TOUCH_START,this._onTouchStart,this),a.off(u.EventType.TOUCH_MOVE,this._onTouchMove,this),a.off(u.EventType.TOUCH_END,this._onTouchEnd,this)},n._onTouchStart=function(t){var i=t.touch,o=i.getUIStartLocation().x,h=i.getUIStartLocation().y;o<this._canvasMidWidth?(this._startLeftMoveX=o,this._startLeftMoveY=h,this._leftTouchId=i.getID(),this.leftEasyTouch.startTouch(o-this._canvasMidWidth,h-this._canvasMidHeight)):(this._startRightMoveX=o,this._startRightMoveY=h,this._rightTouchId=i.getID(),this.rightEasyTouch.startTouch(o-this._canvasMidWidth,h-this._canvasMidHeight))},n._onTouchMove=function(t){for(var i=t.getTouches(),o=0;o<i.length;o++){var h=i[o],e=h.getUILocation();h.getID()==this._leftTouchId?this.leftEasyTouch.moveTouch(h.getUILocation().x-this._startLeftMoveX,h.getUILocation().y-this._startLeftMoveY):h.getID()==this._rightTouchId&&this.rightEasyTouch.moveTouch(e.x-this._startRightMoveX,e.y-this._startRightMoveY)}},n._init=function(){this._leftTouchId=-1,this.leftEasyTouch.endTouch(),this.leftEasyTouch.moveTouchByXY(0,0)},n._onTouchEnd=function(t){t.touch.getID()==this._leftTouchId?(this._leftTouchId=-1,this.leftEasyTouch.endTouch(),this.leftEasyTouch.moveTouchByXY(0,0)):(this._rightTouchId=-1,this.rightEasyTouch.endTouch(),this.rightEasyTouch.moveTouchByXY(0,0)),-1==this._leftTouchId&&this._rightTouchId},i}(r)).prototype,"leftEasyTouch",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(g.prototype,"rightEasyTouch",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/easy_touch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./util.ts","./playerData.ts"],(function(t){var e,i,n,s,o,a,c,r,h,u,l,_,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Node,r=t.CCInteger,h=t.Vec3,u=t.Component},function(t){l=t.Constant},function(t){_=t.Util},function(t){T=t.PlayerData}],execute:function(){var d,f,g,p,v,y,C,b,E,H;o._RF.push({},"2ab5dN73ONFzrjGJHR3u3Av","easy_touch",void 0);var L=a.ccclass,Y=a.property;t("EasyTouch",(d=L("EasyTouch"),f=Y(c),g=Y(c),p=Y(r),d((C=e((y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"centerCircleNode",C,s(e)),n(e,"directionNode",b,s(e)),n(e,"bgLength",E,s(e)),n(e,"isLeftTouch",H,s(e)),e._vec3_1=new h,e._lastPos=new h,e._vec3_Angle=new h(0,0,0),e._lastX=0,e._lastY=0,e}i(e,t);var o=e.prototype;return o.start=function(){var t=this;this.directionNode.active=!1,setTimeout((function(){t._lastPos.set(t.node.position)}))},o.startTouch=function(t,e){this.node.setPosition(new h(t,e)),this.directionNode.active=!1},o.endTouch=function(){this.node.setPosition(this._lastPos),this.directionNode.active=!1,this.isLeftTouch?(T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_LEFT_X,0),T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_LEFT_Y,0)):(T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_RIGHT_X,0),T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_RIGHT_Y,0))},o.moveTouch=function(t,e){var i=Math.sqrt(t*t+e*e);if(i>this.bgLength){var n=this.bgLength/i;t*=n,e*=n,this._vec3_1.set(t,e,0),this.centerCircleNode.setPosition(this._vec3_1)}else this._vec3_1.set(t,e,0),this.centerCircleNode.setPosition(this._vec3_1);var s=180*Math.atan(t/e)/Math.PI;e<0&&(s-=180),this._vec3_Angle.set(0,0,-1*s),this.directionNode.eulerAngles=this._vec3_Angle,this.directionNode.active=!0,this.isLeftTouch?(T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_LEFT_X,t/this.bgLength),T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_LEFT_Y,e/this.bgLength)):(T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_RIGHT_X,t/this.bgLength),T.instance.updateEasyTouchInfo(l.EASY_TOUCH.TOUCH_RIGHT_Y,e/this.bgLength))},o.setLastXY=function(t,e){this._lastX=t,this._lastY=e},o.moveTouchByXY=function(t,e){t=.1*Math.ceil(10*t),e=.1*Math.ceil(10*e),this._lastX=_.lerp(this._lastX,t,.1),this._lastY=_.lerp(this._lastY,e,.1),this._vec3_1.set(this._lastX*this.bgLength,this._lastY*this.bgLength,0),this.centerCircleNode.setPosition(this._vec3_1);var i=180*Math.atan(t/e)/Math.PI;e<0&&(i-=180),this._vec3_Angle.set(0,0,-1*i),this.directionNode.eulerAngles=this._vec3_Angle},e}(u)).prototype,"centerCircleNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(y.prototype,"directionNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(y.prototype,"bgLength",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=e(y.prototype,"isLeftTouch",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./resourceUtil.ts"],(function(n){var e,t,o,i,a,r,l,c,s,u,d,f;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,o=n._decorator,i=n.Vec3,a=n.AnimationComponent,r=n.ParticleSystemComponent,l=n.find,c=n.Node,s=n.director,u=n.AnimationClip},function(n){d=n.PoolManager},function(n){f=n.ResourceUtil}],execute:function(){var p,v;t._RF.push({},"554baRvdXVCaZZeXFSvvApe","effectManager",void 0);var h=o.ccclass;o.property,n("EffectManager",h("EffectManager")(((v=function(){function n(){this._ndParent=null}var t=n.prototype;return t.playAni=function(n,e,t,o,r,l,c){var s=this;void 0===t&&(t=new i),void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===l&&(l=1),void 0===c&&(c=function(){});var p=n.split("/")[1],v=this.ndParent.getChildByName(p),h=function(){var n,i,s;null==(n=v)||n.setScale(l,l,l),null==(i=v)||i.setWorldPosition(t);var f=null==(s=v)?void 0:s.getComponent(a);f.play(e);var p=f.getState(e);p&&(p.wrapMode=o?u.WrapMode.Loop:u.WrapMode.Normal),f.once(a.EventType.FINISHED,(function(){c&&c(),r&&v&&d.instance.putNode(v)}))};v?h():f.loadEffectRes(n).then((function(n){(v=d.instance.getNode(n,s.ndParent)).setScale(l,l,l),v.setWorldPosition(t),h()}))},t.removeEffect=function(n,e){void 0===e&&(e=this.ndParent);var t=e.getChildByName(n);t&&(t.getComponentsInChildren(a).forEach((function(n){n.stop()})),(null==t?void 0:t.getComponentsInChildren(r)).forEach((function(n){null==n||n.clear(),null==n||n.stop()})),d.instance.putNode(t))},t.playParticle=function(n,e,t,o,i,a){var l=this;void 0===t&&(t=0),void 0===o&&(o=1),f.loadEffectRes(n).then((function(n){var c=d.instance.getNode(n,l.ndParent);c.setScale(o,o,o),c.setWorldPosition(e),i&&(c.eulerAngles=i);var s=0;c.getComponentsInChildren(r).forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;s=e>s?e:s})),setTimeout((function(){c.parent&&(a&&a(),d.instance.putNode(c))}),1e3*(t&&t>0?t:s))}))},t.playEffect=function(n,e,t,o,i,l,c,s,u,p){void 0===t&&(t=!0),void 0===o&&(o=!0),void 0===i&&(i=0),void 0===l&&(l=1),void 0===u&&(u=!0),n&&n.parent&&f.loadEffectRes(e).then((function(e){var f=d.instance.getNode(e,n);f.setScale(l,l,l),c&&f.setPosition(c),s&&(f.eulerAngles=s);var v=0;if(t){var h=f.getComponentsInChildren(a);h.length&&h.forEach((function(n,e){var t;null==n||n.play();var o=null==n||null==(t=n.defaultClip)?void 0:t.name;if(o){var i=n.getState(o);if(i){i.time=0,i.sample();var a=i.duration;v=a>v?a:v,i.speed=1}}}))}if(o){var g=f.getComponentsInChildren(r);g.length&&g.forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;v=e>v?e:v}))}setTimeout((function(){f.parent&&(p&&p(),u?d.instance.putNode(f):f.destroy())}),1e3*(i&&i>0?i:v))}))},t.playTrail=function(n,e,t,o){void 0===e&&(e=0),void 0===o&&(o=1);var i=0;(n.active||(n.active=!0),n.getComponentsInChildren(r).forEach((function(n){n.simulationSpeed=o,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;i=e>i?e:i})),t)&&setTimeout((function(){t()}),1e3*(e&&e>0?e:i))},t.playDisappearEff=function(n,e,t){var o=this;f.loadEffectRes(n).then((function(n){var i=d.instance.getNode(n,o.ndParent);i.setWorldPosition(e);var a=0;i.getComponentsInChildren(r).forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;a=e>a?e:a})),setTimeout((function(){i&&i.parent&&d.instance.putNode(i)}),1e3*a),t&&t((function(){i&&i.parent&&d.instance.putNode(i)}))}))},e(n,[{key:"ndParent",get:function(){if(!this._ndParent){var n,e=l("effectManager");if(e)this._ndParent=e;else this._ndParent=new c("effectManager"),null==(n=s.getScene())||n.addChild(this._ndParent)}return this._ndParent}}],[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,p=v))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/fighter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./audioManager.ts","./poolManager.ts","./resourceUtil.ts","./constant.ts","./fighterModel.ts","./gameState.ts","./effectManager.ts","./util.ts","./playerData.ts","./gobeUtil.ts","./collider_manager.ts"],(function(e){var t,i,n,s,o,a,l,r,h,c,_,d,p,u,f,v,y,m,g,I,P,A,E,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Vec3,r=e.Node,h=e.SkinningModelComponent,c=e.Mat4,_=e.ParticleSystemComponent,d=e.Component},function(e){p=e.ClientEvent},function(e){u=e.AudioManager},function(e){f=e.PoolManager},function(e){v=e.ResourceUtil},function(e){y=e.Constant},function(e){m=e.FighterModel},function(e){g=e.PropType},function(e){I=e.EffectManager},function(e){P=e.Util},function(e){A=e.PlayerData},function(e){E=e.GobeUtil},function(e){T=e.ColliderManager}],execute:function(){var M,x,S,C,N,k,H,w,R,O,D;o._RF.push({},"b2fbborwrBDgI638NJyrejc","fighter",void 0);var b=a.ccclass,Y=a.property,z=function(e){return e[e.null=0]="null",e[e.idle=1]="idle",e[e.run=2]="run",e[e.attack=3]="attack",e[e.is_attack=4]="is_attack",e[e.game_over=5]="game_over",e}(z||{}),L=new l,U=new l;new l,e("Fighter",(M=b("Fighter"),x=Y(r),S=Y(h),C=Y(m),N=Y(r),M((w=t((H=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"ndSocketCrown",w,s(t)),n(t,"model",R,s(t)),n(t,"fighterModel",O,s(t)),n(t,"ndSocketWeapon",D,s(t)),t._aiPosNode=null,t.playerState=null,t._ndCrown=null,t._ndHammer=null,t._isPlayRunningEffect=!1,t._runEffect=null,t._score=0,t._mat=new c,t._ndHammerTrial=null,t._parent=null,t.vec3_pos=new l,t.vec3_angle=new l,t.vec3_lastPos=new l,t.vec3_pos_1=new l,t._moveIndex=0,t._playType=z.null,t._aiPosIndex=0,t._nextIndex=0,t._lastIndex=0,t._posPer=0,t}i(t,e);var o=t.prototype;return o.init=function(e,t){var i=this;this._aiPosNode=t,this._parent=e,this._isPlayRunningEffect=!1,this._runEffect=null,this._score=0,this._aiPosIndex=0,this.playIdle(),this._ndCrown?this.ndSocketCrown.active=!1:v.loadModelRes("crown/crown").then((function(e){i._ndCrown=f.instance.getNode(e,i.ndSocketCrown),i.ndSocketCrown.active=!1})),this._ndHammer?(this.ndSocketWeapon.active=!1,this._hideHammerTrial()):v.loadModelRes("hammer/hammerProp").then((function(e){i._ndHammer=f.instance.getNode(e,i.ndSocketWeapon),i._ndHammer.setPosition(0,0,0),i.ndSocketWeapon.active=!1,i._hideHammerTrial()})),this.vec3_pos.set(0,0,0),this.vec3_angle.set(0,0,0),this.vec3_lastPos.set(0,0,0),this.vec3_pos_1.set(0,0,0),this._lastIndex=0,L.set(50,0,0);var n=Math.floor(Math.random()*y.AI_POS_INDEX[this._lastIndex].length);this._nextIndex=y.AI_POS_INDEX[this._lastIndex][n],U.set(this._aiPosNode.children[this._nextIndex-1].position);var s=l.distance(L,U);this._posPer=y.AI_SPEED/s},o._hideHammerTrial=function(){this._ndHammer&&(this._ndHammerTrial||(this._ndHammerTrial=this._ndHammer.getChildByName("trail01")),this._ndHammerTrial&&this._ndHammerTrial.active&&(this._ndHammerTrial.active=!1))},o.playRun=function(){var e=this;if(this._playType!=z.run){if(this._playType=z.run,!this.fighterModel.isRunning)if(this._isPlayRunningEffect=!0,this._runEffect){this._runEffect.active=!0;var t=this._runEffect.getComponentInChildren(_);t.loop=!0,t.clear(),t.stop(),t.play()}else v.loadEffectRes("runningSmoke").then((function(t){if(e.fighterModel.isRunning){e._runEffect=f.instance.getNode(t,e.node),e._runEffect.active=!0;var i=e._runEffect.getComponentInChildren(_);i.loop=!0,i.clear(),i.stop(),i.play()}}));this.ndSocketWeapon.active?(this.fighterModel.playAni(y.ANI_TYPE.RUN_1,!0,!1,(function(){}),1),this._hideHammerTrial()):this.fighterModel.playAni(y.ANI_TYPE.RUN,!0,!1,(function(){}),1)}},o.playAttack=function(e,t){var i=this;this._playType!=z.attack&&(this._playType=z.attack,e.hammerCount=0,e.attackPropType=g.NULL,u.instance.playSound(y.AUDIO_NAME.HIT),this._ndHammerTrial.active=!0,I.instance.playTrail(this._ndHammerTrial),this.fighterModel.isActick=t,this.fighterModel.playAni(y.ANI_TYPE.ATTACK,!1,!1,(function(){i._hideHammerTrial(),i.ndSocketWeapon.active=!1,i.playIdle()}),1))},o.playIdle=function(){if(this._playType!=z.idle){if(this._playType=z.idle,this.fighterModel.playAni(y.ANI_TYPE.IDLE,!0,!1,(function(){}),2),this._runEffect&&this._isPlayRunningEffect)this._runEffect.getComponentInChildren(_).loop=!1;this._isPlayRunningEffect=!1}},o.playMove=function(e,t,i,n){if(this._playType==z.idle||this._playType==z.run){if(n.hammerCount>0)if(l.distance(this.vec3_lastPos,i.position)<5){l.subtract(this.vec3_pos_1,this.node.position,i.position);var s=180*Math.atan(this.vec3_pos_1.z/this.vec3_pos_1.x)/Math.PI;return this.vec3_pos_1.x<0?s=this.vec3_pos_1.z<0?180-s:-1*(s+180):s*=-1,s-=90,E.instance.sendFrame({A:y.ACTION.HIT,V:s}),this.vec3_angle.y=s,this.node.eulerAngles=this.vec3_angle,void this.playAttack(n,!0)}var o=A.instance.getEasyTouchInfo(y.EASY_TOUCH.TOUCH_LEFT_Y),a=A.instance.getEasyTouchInfo(y.EASY_TOUCH.TOUCH_LEFT_X);if(0==o&&0==a)return this._playType!=z.idle&&(this.vec3_angle.set(this.node.eulerAngles.clone()),this.vec3_lastPos.set(this.node.position.clone()),E.instance.sendFrame({A:y.ACTION.MOVE,V:this.vec3_angle.y,X:this.vec3_lastPos.x,Z:this.vec3_lastPos.z,MX:a,MY:o})),void this.playIdle();this.playRun();s=180*Math.atan(a/o)/Math.PI;o<0&&(s-=180),this.vec3_angle.y=180-s,this.node.eulerAngles=this.vec3_angle,this.vec3_lastPos.set(this.node.position.clone()),this.vec3_pos.set(this.node.position.clone());var r=1-(this.node.scale.x-1)*y.MIN_SPEED_PERCENT;this.vec3_pos.x+=.2*a*t*60*r,this.vec3_pos.z-=.2*o*t*60*r,this.node.setPosition(this.vec3_pos),T.instance.updatePlayerCollider(this.node,this.node.scale.x/2,n),this.node.getPosition(this.vec3_lastPos),0==this._moveIndex&&E.instance.sendFrame({A:y.ACTION.MOVE,V:this.vec3_angle.y,X:this.vec3_lastPos.x,Z:this.vec3_lastPos.z,MX:a,MY:o}),this._moveIndex++,this._moveIndex>4&&(this._moveIndex=0)}},o.playMoveAi=function(e,t,i,n){if(this._playType==z.idle||this._playType==z.run){if(n.hammerCount>0)if(l.distance(this.vec3_lastPos,i.position)<5){l.subtract(this.vec3_pos_1,this.node.position,i.position);var s=180*Math.atan(this.vec3_pos_1.z/this.vec3_pos_1.x)/Math.PI;return this.vec3_pos_1.x<0?s=this.vec3_pos_1.z<0?180-s:-1*(s+180):s*=-1,s-=90,E.instance.sendFrame({A:y.ACTION.HIT,V:s,AI:1}),this.vec3_angle.y=s,this.node.eulerAngles=this.vec3_angle,void this.playAttack(n,!0)}this.playRun();var o=1-(this.node.scale.x-1)*y.MIN_SPEED_PERCENT;if(this._aiPosIndex+=this._posPer*o,this._aiPosIndex>=1){L.set(U);for(var a=[],r=0;r<y.AI_POS_INDEX[this._nextIndex].length;r++)y.AI_POS_INDEX[this._nextIndex][r]!=this._lastIndex&&a.push(y.AI_POS_INDEX[this._nextIndex][r]);this._lastIndex=this._nextIndex;r=Math.floor(Math.random()*a.length);this._nextIndex=a[r],U.set(this._aiPosNode.children[this._nextIndex-1].position),this._aiPosIndex-=1;var h=l.distance(L,U);this._posPer=y.AI_SPEED/h}l.lerp(this.vec3_pos,L,U,this._aiPosIndex);var c=U.x-L.x,_=L.z-U.z;if(0!=c||0!=_){s=180*Math.atan(c/_)/Math.PI;_<0&&(s-=180),this.vec3_angle.y=180-s,this.node.eulerAngles=this.vec3_angle}this.node.setPosition(this.vec3_pos),T.instance.updatePlayerCollider(this.node,this.node.scale.x/2,n),this.node.getPosition(this.vec3_lastPos),0==this._moveIndex&&E.instance.sendFrame({A:y.ACTION.MOVE,V:this.vec3_angle.y,X:this.vec3_lastPos.x,Z:this.vec3_lastPos.z,AI:1}),this._moveIndex++,this._moveIndex>4&&(this._moveIndex=0)}},o.updateStateRecovery=function(e){this.node.eulerAngles=e.eulerAngles,this.node.setPosition(e.position),e.hammerCount&&!1===this.ndSocketWeapon.active?this.ndSocketWeapon.active=!0:0===e.hammerCount&&this.ndSocketWeapon.active&&!this.fighterModel.isAttacking&&(this.ndSocketWeapon.active=!1)},o.updateState=function(e,t,i){if(this._playType==z.idle||this._playType==z.run){if(this.playerState=t,i||t.channel.openId!=E.instance.ownPlayerId&&!E.instance.isAi){var n=!1;t.eulerAngles.equals(this.node.eulerAngles)||(t.channel.openId!=E.instance.ownPlayerId&&(this.node.eulerAngles=t.eulerAngles),n=!0),l.distance(t.position,this.node.position)>.1||0!=t.moveX||0!=t.moveY?(l.lerp(this.vec3_pos_1,this.node.position,t.position,.2),this.node.setPosition(this.vec3_pos_1),this.playRun()):n?this.playRun():this._isPlayRunningEffect&&this.playIdle(),t.attackPropType===g.HAMMER&&(this.node.setPosition(t.position),this.playAttack(t,!1))}if(t.attackPropType===g.HAMMER_ED&&(t.attackPropType=g.NULL,this.onHammerHit(t)),t.score>this._score){var s=t.score-this._score;u.instance.playSound(y.AUDIO_NAME.GOLD),p.dispatchEvent(y.EVENT_NAME.ON_SHOW_COIN_TIPS,"+"+s,this.node.worldPosition.clone()),this._score=t.score}var o=y.PLAYER_ORIGIN_SCALE+this._score*y.ADD_SIZE_PER_COIN;if((o=o>=2?2:o)!==this.node.scale.x){var a=P.lerp(o,this.node.scale.x,10*e);this.node.setScale(a,a,a),this._ndHammer.setScale(a,a,a)}t.isScoreLead&&!this.ndSocketCrown.active?this.ndSocketCrown.active=!0:!t.isScoreLead&&this.ndSocketCrown.active&&(this.ndSocketCrown.active=!1),t.hammerCount&&!1===this.ndSocketWeapon.active?(this.ndSocketWeapon.active=!0,this._playType==z.run&&(this.fighterModel.playAni(y.ANI_TYPE.RUN_1,!0,!1,(function(){}),1),this._hideHammerTrial())):0===t.hammerCount&&this.ndSocketWeapon.active&&this.fighterModel.isAttacking}},o.onHammerHit=function(e){var t=this;this._playType!=z.is_attack&&(this._playType=z.is_attack,I.instance.playEffect(this.node,"dizzyEff",!0,!0,1),this.fighterModel.playAni(y.ANI_TYPE.HIT,!1,!0,(function(){t.fighterModel.playAni(y.ANI_TYPE.DIZZY,!1,!1,(function(){t.playIdle()}),11)}),9))},o._playHitEffect=function(e,t,i){void 0===t&&(t=1),e.y=.1,I.instance.playParticle("hitNew1",e,0,t,null,(function(){i&&i()}))},o.showFighterGameOverAni=function(e){var t=this;void 0===e&&(e=!1),this._playType=z.game_over,e?this.fighterModel.playAni(y.ANI_TYPE.VICTORY,!0,!1,(function(){}),13):this.fighterModel.playAni(y.ANI_TYPE.LOSE,!1,!1,(function(){t.fighterModel.playAni(y.ANI_TYPE.LOSE_1,!0,!1,(function(){}),15)}),14)},t}(d)).prototype,"ndSocketCrown",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(H.prototype,"model",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(H.prototype,"fighterModel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(H.prototype,"ndSocketWeapon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=H))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/fighterModel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./gobeUtil.ts"],(function(i){var t,n,e,a,s,r,o,l,c,u,h,y;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized,s=i.createClass},function(i){r=i.cclegacy,o=i._decorator,l=i.SkeletalAnimationComponent,c=i.AnimationClip,u=i.Component},function(i){h=i.Constant},function(i){y=i.GobeUtil}],execute:function(){var p,g,A,_,f;r._RF.push({},"2a13cx4bHtFXqrrQXCxPbSy","fighterModel",void 0);var T=o.ccclass,P=o.property;i("FighterModel",(p=T("FighterModel"),g=P(l),p((f=t((_=function(i){function t(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t=i.call.apply(i,[this].concat(s))||this,e(t,"ani",f,a(t)),t.isAniPlaying=!1,t._aniType="",t._aniState=null,t.isActick=!1,t}n(t,i);var r=t.prototype;return r.playAni=function(i,t,n,e,a){var s,r,o=this;if(void 0===t&&(t=!1),void 0===n&&(n=!1),this._aniType!=i){if(this._aniState=null==(s=this.ani)?void 0:s.getState(i),this._aniState&&this._aniState.isPlaying){if(!n)return;this._aniState.time=0,this._aniState.sample()}this._aniType=i,null==(r=this.ani)||r.play(i),this.isAniPlaying=!0,this._aniState&&(this._aniState.wrapMode=t?c.WrapMode.Loop:c.WrapMode.Normal),t||this.ani.once(l.EventType.FINISHED,(function(){o.isAniPlaying=!1,e&&e()}))}},r.attackPlayer=function(){this.isActick&&(this.isActick=!1,y.instance.sendFrame({A:h.ACTION.IS_ATTACK_ED}))},s(t,[{key:"isRunning",get:function(){return this._aniType===h.ANI_TYPE.RUN&&!0===this.isAniPlaying}},{key:"isIdle",get:function(){return this._aniType===h.ANI_TYPE.IDLE&&!0===this.isAniPlaying}},{key:"isAttacking",get:function(){return this._aniType===h.ANI_TYPE.ATTACK&&!0===this.isAniPlaying}},{key:"isHitting",get:function(){return this._aniType===h.ANI_TYPE.HIT&&!0===this.isAniPlaying}},{key:"isDizzying",get:function(){return this._aniType===h.ANI_TYPE.DIZZY&&!0===this.isAniPlaying}}]),t}(u)).prototype,"ani",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=_))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/fightUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./util.ts","./constant.ts","./clientEvent.ts","./resourceUtil.ts"],(function(e){var r,t,n,a,i,o,l,c,u,s,y,p,h,f,d,g,b;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.LabelComponent,c=e.Node,u=e.SpriteComponent,s=e.SpriteFrame,y=e.Component},function(e){p=e.GobeUtil,h=e.ROOM_TYPE},function(e){f=e.Util},function(e){d=e.Constant},function(e){g=e.ClientEvent},function(e){b=e.ResourceUtil}],execute:function(){var m,v,P,w,I,_,S,U,E,N,T,C,F,M,z,D,R;i._RF.push({},"65e1ee23EZN740ZAZi01CFa","fightUI",void 0);var H=o.ccclass,A=o.property;e("FightUI",(m=H("FightUI"),v=A([l]),P=A([l]),w=A([c]),I=A([u]),_=A([s]),S=A(l),U=A([c]),m((T=r((N=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,n(r,"aryPlayerDelay",T,a(r)),n(r,"aryPlayerScore",C,a(r)),n(r,"aryPlayerNode",F,a(r)),n(r,"aryPlayerHead",M,a(r)),n(r,"aryHead",z,a(r)),n(r,"lbCountDown",D,a(r)),n(r,"ringNode",R,a(r)),r._parent=null,r}t(r,e);var i=r.prototype;return i.show=function(e){this.lbCountDown.string=f.formatTimeForSecond(60,!0),this._parent=e;for(var r=this._parent.logicManager.currentGameState.players,t=0;t<r.length;t++){var n=r[t];if(n.channel){this.aryPlayerNode[t].active=!0;var a=0;p.instance.checkIsRoomOwner(n.channel.openId)||(a=1),n.channel.headUrl&&n.channel.headUrl.length?b.loadSpriteFrameURL(n.channel.headUrl,this.aryPlayerHead[a]):this.aryPlayerHead[a].spriteFrame=this.aryHead[a]}else this.aryPlayerNode[t].active=!1}var i=p.instance.checkIsRoomOwner(p.instance.ownPlayerId);this.ringNode[0].active=i,this.ringNode[1].active=!i,g.dispatchEvent(d.EVENT_NAME.GAME_INIT)},i._updatePlayerState=function(){if(!p.instance.room||p.instance.roomType==h.START){for(var e=this._parent.logicManager.currentGameState,r=e.players,t=0;t<r.length;t++){var n=r[t];if(n.channel){var a=0;p.instance.checkIsRoomOwner(n.channel.openId)||(a=1),this.aryPlayerScore[a].string=""+n.score}}var i=e.time>0?e.time:0;i>d.GAME_TIME&&(i=d.GAME_TIME),this.lbCountDown.string=f.formatTimeForSecond(i,!0)}},i.lateUpdate=function(e){this._updatePlayerState()},r}(y)).prototype,"aryPlayerDelay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=r(N.prototype,"aryPlayerScore",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=r(N.prototype,"aryPlayerNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=r(N.prototype,"aryPlayerHead",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=r(N.prototype,"aryHead",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=r(N.prototype,"lbCountDown",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=r(N.prototype,"ringNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=N))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/gameCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,a,r,s,c,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Vec3,c=t.Camera,l=t.CameraComponent,p=t.Component}],execute:function(){var u,m,d,h,f;a._RF.push({},"30104VtL2VPDKHTFanbljZB","gameCamera",void 0);var g=r.ccclass,_=r.property,C=new s;new s,t("GameCamera",(u=g("GameCamera"),m=_(c),u((f=e((h=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"camera",f,o(e)),e._targetNode=null,e._isUpdate=!1,e}i(e,t);var a=e.prototype;return a.start=function(){window.mainCamera=this.camera.getComponent(l)},a.init=function(t){this._targetNode=t,this.node.setPosition(this._targetNode.position),this.node.setRotationFromEuler(0,180,0),this.node.children[0].setRotationFromEuler(-60,-180,0),this.node.children[0].setPosition(0,34,-17)},a.startGame=function(){this._isUpdate=!0},a.finishGame=function(){this._isUpdate=!1},a.update=function(t){this._isUpdate&&(s.lerp(C,this.node.position,this._targetNode.position,.1),this.node.setPosition(C))},e}(p)).prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/gameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fighterModel.ts","./uiManager.ts","./audioManager.ts","./constant.ts","./resourceUtil.ts","./poolManager.ts","./gobeUtil.ts","./LanguageData.ts"],(function(n){var e,i,t,a,o,r,l,c,s,u,A,p,h,E,N,_,g,d,f,M,y,b,m;return{setters:[function(n){e=n.applyDecoratedDescriptor,i=n.inheritsLoose,t=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){o=n.cclegacy,r=n._decorator,l=n.Node,c=n.LabelComponent,s=n.SpriteComponent,u=n.SpriteFrame,A=n.Animation,p=n.AnimationClip,h=n.AnimationComponent,E=n.Component},function(n){N=n.FighterModel},function(n){_=n.UIManager},function(n){g=n.AudioManager},function(n){d=n.Constant},function(n){f=n.ResourceUtil},function(n){M=n.PoolManager},function(n){y=n.GobeUtil,b=n.WIFI_TYPE},function(n){m=n.updateSceneRenderers}],execute:function(){var L,w,I,P,R,v,O,S,T,D,C,U,H,W,G,F,z,Y,B,V,k;o._RF.push({},"7da34kgvy5GR72hclTKBICW","gameOver",void 0);var K=r.ccclass,j=r.property;n("GameOver",(L=K("gameOver"),w=j([l]),I=j([c]),P=j([c]),R=j([s]),v=j([u]),O=j(l),S=j(l),T=j(A),D=j(l),L((H=e((U=function(n){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=n.call.apply(n,[this].concat(o))||this,t(e,"aryNodeWin",H,a(e)),t(e,"aryLbScore",W,a(e)),t(e,"aryLbName",G,a(e)),t(e,"arySpIcon",F,a(e)),t(e,"aryHead",z,a(e)),t(e,"leftNode",Y,a(e)),t(e,"rightNode",B,a(e)),t(e,"winAni",V,a(e)),t(e,"btnAgc",k,a(e)),e._parent=null,e._girlNode=null,e._boyNode=null,e}i(e,n);var o=e.prototype;return o.onDisable=function(){this._cleanModel(),this.winAni.stop(),this.winAni.node.active=!1,_.instance.hideDialog(d.PANEL_NAME.FIGHT_UI)},o.show=function(n,e){var i=this;m(),this.winAni.stop(),this.winAni.node.active=!1,this._parent=n;var t=n.logicManager.currentGameState.players;if(!(t.length<2)){for(var a in g.instance.stop(d.AUDIO_NAME.BACKGROUND),g.instance.playSound(d.AUDIO_NAME.WIN),t){var o=t[a];if(o.channel){var r=0;if(y.instance.checkIsRoomOwner(o.channel.openId)||(r=1),parseInt(a)===e){this.winAni.node.setPosition(this.aryNodeWin[r].position),this.winAni.node.active=!0;var l=this.winAni.getState("leaveWinAniIn");l&&(l.time=0,l.sample(),this.winAni.play("leaveWinAniIn"),l.wrapMode=p.WrapMode.Normal),this.winAni.once(h.EventType.FINISHED,(function(){var n=i.winAni.getState("leaveWinAniIdle");n&&(n.time=0,n.sample(),i.winAni.play("leaveWinAniIdle"),n.wrapMode=p.WrapMode.Loop)}))}this._showModel(r,-1==e||parseInt(a)===e),this.aryLbScore[r].string=o.score+"",this.aryLbName[r].string=o.channel.name,o.channel.headUrl&&o.channel.headUrl.length?f.loadSpriteFrameURL(o.channel.headUrl,this.arySpIcon[r]):this.arySpIcon[r].spriteFrame=this.aryHead[r]}}y.instance.leaveRoom(),this.btnAgc.active=y.instance.isOpenPgs&&y.instance.isHwLogin}},o.onAgainBtnClick=function(){var n=this;_.instance.showDialog(d.PANEL_NAME.MATCH_PANEL,[],(function(){}),!0),y.instance.wifiType==b.WIFI?y.instance.matchRoom((function(){_.instance.hideDialog(d.PANEL_NAME.MATCH_PANEL),_.instance.hideDialog(d.PANEL_NAME.GAME_OVER),_.instance.showDialog(d.PANEL_NAME.READY,[!0]),n._parent.reset()}),(function(){_.instance.showTips(d.ROOM_TIPS.MATCH_ROOM_ERROR),_.instance.hideDialog(d.PANEL_NAME.MATCH_PANEL)})):y.instance.createRoomAI((function(){_.instance.hideDialog(d.PANEL_NAME.MATCH_PANEL),_.instance.hideDialog(d.PANEL_NAME.GAME_OVER),_.instance.showDialog(d.PANEL_NAME.READY,[!0]),n._parent.reset()}),(function(){_.instance.showTips(d.ROOM_TIPS.MATCH_ROOM_ERROR),_.instance.hideDialog(d.PANEL_NAME.MATCH_PANEL)}))},o.onClickLeave=function(){y.instance.isChangeWifiType?(this._parent.reset(),_.instance.showTips(d.ROOM_TIPS.LEAVE_ROOM_SUCCESS),_.instance.hideDialog(d.PANEL_NAME.GAME_OVER),_.instance.showTransition(d.SCENE_NAME.SLECT)):_.instance.showDialog(d.PANEL_NAME.TIP_PANEL,[d.ROOM_TIPS.LEAVE_GAME,function(){y.instance.leaveGame(),_.instance.hideDialog(d.PANEL_NAME.GAME_OVER),_.instance.showTransition(d.SCENE_NAME.SLECT)}],(function(){}),!0)},o.onClickAgc=function(){y.instance.forumPagePublish(),y.instance.leaveRoom()},o._showModel=function(n,e){var i=this,t=d.READY_PREFAB.BOY_MODEL,a=this.leftNode;1===n&&(a=this.rightNode,t=d.READY_PREFAB.GIRL_MODEL),null===(1===n?this._girlNode:this._boyNode)&&f.getUIPrefabRes(t,(function(t,o){if(null===(1===n?i._girlNode:i._boyNode)){var r=M.instance.getNode(o,a),l=r.getComponent(N);e?l.playAni(d.ANI_TYPE.VICTORY,!0,!1,(function(){}),13):l.playAni(d.ANI_TYPE.LOSE,!1,!1,(function(){l.playAni(d.ANI_TYPE.LOSE_1,!0,!1,(function(){}),15)}),14),1===n?i._girlNode=r:i._boyNode=r}}))},o._cleanModel=function(){M.instance.putNode(this._girlNode),this._girlNode=null,M.instance.putNode(this._boyNode),this._boyNode=null},e}(E)).prototype,"aryNodeWin",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=e(U.prototype,"aryLbScore",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=e(U.prototype,"aryLbName",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=e(U.prototype,"arySpIcon",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=e(U.prototype,"aryHead",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=e(U.prototype,"leftNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(U.prototype,"rightNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(U.prototype,"winAni",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(U.prototype,"btnAgc",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=U))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameState.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"2ff80KwmIJKHo1u2J9Dycss","gameState",void 0);t("PropType",function(t){return t[t.NULL=0]="NULL",t[t.COIN=1]="COIN",t[t.HAMMER=2]="HAMMER",t[t.RAINING_COIN=3]="RAINING_COIN",t[t.HAMMER_ED=4]="HAMMER_ED",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/gobeUtil.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./constant.ts","./playerData.ts","./uiManager.ts","./util.ts"],(function(e){var o,t,n,a,i,s,r,c,l,m,_;return{setters:[function(e){o=e.createClass},function(e){t=e.cclegacy,n=e.resources,a=e.Asset,i=e.sys,s=e.native},function(e){r=e.ClientEvent},function(e){c=e.Constant},function(e){l=e.PlayerData},function(e){m=e.UIManager},function(e){_=e.Util}],execute:function(){t._RF.push({},"edfacN2PbZLIJvJ9KH72fR3","gobeUtil",void 0);e("PLAYER_TYPE",function(e){return e[e.READY=0]="READY",e[e.START=1]="START",e[e.END=2]="END",e}({}));var h=e("ROOM_TYPE",function(e){return e.READY="ready",e.START="start",e.END="end",e}({})),d=e("WIFI_TYPE",function(e){return e.STAND_ALONE="stand-alone",e.WIFI="wifi",e}({})),f=(e("MessageInfo",(function(){this.playerId="",this.msg=""})),e("RoomAloneInfo",(function(){this.players=[],this.customRoomProperties="",this.ownerId="",this.roomCode=""}))),u=e("GobeUtil",function(){function e(){this._openId="",this._client=null,this._room=null,this._roomAloneInfo=new f,this._ownPlayerId="",this._roomInfos=[],this._cacertNativeUrl="",this._lastRoomId=null,this._isInitMedia=!1,this._isChannelId=!1,this._isOpenPgs=!1,this._msgLst=[],this._isStartFS=!1,this._isStartGame=!1,this._isOtherStartGame=!1,this._time=0,this._isAi=!1,this._hammerIndex=0,this._isRoomOwnIn=!1,this.roomType=h.READY,this._isDisJoin=!1,this._recvMap=new Map,this._currFrame=0,this._wifiType=d.WIFI,this._isHwInit=!1,this._isHwLogin=!1,this._otherDisInterval=0,this.isChangeWifiType=!0,this._isReadyDis=!1,this.serverTimeDis=0,this._isOpenMedia=!1,this._isRemoveMedia=!1,this._isRemoveChannel=!1}var t=e.prototype;return t.initSDK=function(e,o){this._openId=e,this._getToken(o)},t._updateAvailableRooms=function(e){var o=this;this._client.getAvailableRooms({offset:"0",limit:10,sync:!0}).then((function(t){o._roomInfos=t.rooms,e&&e(),console.log("aaaaaaaa3 查询房间列表成功",o._roomInfos)})).catch((function(e){o._roomInfos=[],console.log("aaaaaaaa3 查询房间列表失败",e)}))},t.updateAvailableRooms=function(){this._updateAvailableRooms((function(){}))},t.checkIsRoomOwner=function(e){return!!this.room&&this.room.ownerId===e},t.isOwnPlayer=function(o){return e.instance.ownPlayerId==o},t.sendFrame=function(e){if(this.wifiType==d.STAND_ALONE)this._recvMap.set(++this._currFrame,[{playerId:this._ownPlayerId,data:[JSON.stringify(e)],timestamp:0}]);else{if(!this._room)return;this._room.sendFrame(JSON.stringify(e))}},t._getToken=function(o){var t=this,n=new XMLHttpRequest;n.open("POST","https://connect-drcn.hispace.dbankcloud.cn/agc/apigw/oauth2/v1/token",!0),n.setRequestHeader("Content-Type","application/json;charset=utf-8"),n.onload=function(){if(200===n.status){console.log("aaaaaaaa3 xhr",n.response);var e=JSON.parse(n.response);t._initMgobe(e.access_token,o)}};var a;a={client_id:e.CLIENT_ID,client_secret:e.CLIENT_SECRET,grant_type:"client_credentials"},console.error(a),n.send(JSON.stringify(a))},t._loadCert=function(e,o){var t=this;n.load("/endpoint-cert",a,(function(n,a){console.log("aaaaaaaa1 加载证书结束 "+!n),n||(t._cacertNativeUrl=a.nativeUrl,t._initMgobe(e,o))}))},t._initMgobe=function(o,t){var n=this;if(i.Platform.ANDROID==i.platform||i.Platform.OPENHARMONY==i.platform){if(""==this._cacertNativeUrl)return console.log("aaaaaaaa2"),void this._loadCert(o,t);console.log("aaaaaaaa1 _initMgobe1",o),this._client=new GOBE.Client({appId:e.APP_ID,openId:this._openId,clientId:e.CLIENT_ID,clientSecret:e.CLIENT_SECRET,accessToken:o,platform:GOBE.PlatformType.OTHER,cerPath:this._cacertNativeUrl})}else console.log("aaaaaaaa1 _initMgobe2",o),this._client=new GOBE.Client({appId:e.APP_ID,openId:this._openId,clientId:e.CLIENT_ID,clientSecret:e.CLIENT_SECRET,accessToken:o});this._statistics(),console.log("aaaaaaaa4"),this._client.onInitResult((function(o){0==o&&(t&&t(!0),n._lastRoomId&&e.instance.joinRoom(n._lastRoomId,(function(){if(n._room.customRoomProperties==h.READY)n.leaveRoom(),n._lastRoomId=null;else{var o=JSON.parse(n._room.customRoomProperties);if(o.type==h.END)n.leaveRoom(),n._lastRoomId=null;else{var t=o.time;Math.floor(c.GAME_TIME-((new Date).getTime()-t+e.instance.serverTimeDis)/1e3)>5?(setTimeout((function(){m.instance.showDialog(c.PANEL_NAME.READY,null,(function(){}),!0),m.instance.showTips(c.ROOM_TIPS.JOIN_ROOM_SUCCESS),m.instance.hideDialog(c.PANEL_NAME.JOIN_ROOM_PANEL)}),500),n._isDisJoin=!0):(n.leaveRoom(),n._lastRoomId=null)}}console.log("aaaaaaaa2----_lastRoomId reconnect success")}),(function(e){console.log("aaaaaaaa2----_lastRoomId reconnect fail",e)})))})),this._client.init().then((function(e){n._ownPlayerId=e.playerId,n._lastRoomId=n._client.lastRoomId,n.serverTimeDis=e.loginTimestamp-(new Date).getTime(),console.log("aaaaaaaa2 init playerid",e.playerId)})).catch((function(e){console.log("aaaaaaaa2 调用Client.init方法进行初始化error：",e),t&&t(!1)}))},t.startGame=function(){this._isDisJoin?(this._isDisJoin=!1,r.dispatchEvent(c.EVENT_NAME.ON_GAME_START)):(this._hammerIndex=0,this.wifiType==d.STAND_ALONE?(this._roomAloneInfo.customRoomProperties=JSON.stringify({type:h.START,time:(new Date).getTime()}),this.roomType=h.START,this._time=(new Date).getTime(),r.dispatchEvent(c.EVENT_NAME.ON_GAME_START)):this._room&&this._room.sendToServer(JSON.stringify({msg:c.START_GAME,playerId:this._ownPlayerId})))},t.createHammer=function(e){this._hammerIndex>=c.HAMMER_POS.length||this.room&&this.sendFrame({A:c.ACTION.CREATE_HAMMER,V:this._hammerIndex,X:c.HAMMER_POS[this._hammerIndex][0],Y:c.HAMMER_POS[this._hammerIndex][1],Z:c.HAMMER_POS[this._hammerIndex][2],T:e})},t.createCoin=function(e){this.room&&this.sendFrame({A:c.ACTION.CREATE_ICON,I:JSON.stringify({coin_pos:e})})},t.finishGame=function(){console.log("aaaaaaaa2 finishGame 1"),this._wifiType==d.STAND_ALONE?(console.log("aaaaaaaa2 finishGame 2"),this._isStartFS=!1,this._roomAloneInfo.customRoomProperties=JSON.stringify({type:h.END,time:this._time}),this._isStartFS=!1,r.dispatchEvent(c.EVENT_NAME.ON_GAME_END)):(console.log("aaaaaaaa2 finishGame 3",this._room&&this._room.ownerId==this._ownPlayerId,this._room.ownerId,this._isRoomOwnIn),(this._room&&this._room.ownerId==this._ownPlayerId||!this._isRoomOwnIn&&this._room.ownerId!=this._ownPlayerId)&&(console.log("aaaaaaaa2 finishGame 4"),this._isStartFS&&(this._isStartFS=!1,console.log("aaaaaaaa2 stopFrameSync"),this._room.stopFrameSync()),console.log("aaaaaaaa2-------finishGame------"),this._room.updateRoomProperties({customRoomProperties:JSON.stringify({type:h.END,time:this._time})}),this._isRoomOwnIn||r.dispatchEvent(c.EVENT_NAME.ON_GAME_END)))},t._enabledEventRoom=function(){var o=this;this._isStartGame=!1,this._isOtherStartGame=!1,this._room.onJoin((function(e){if(console.log("aaaaaaaa2----onJoin 加入",o._room.ownerId,e.playerId),o._room.ownerId!=e.playerId?r.dispatchEvent(c.EVENT_NAME.ON_OTHER_JOIN_ROOM,e.playerId):o._isRoomOwnIn=!0,e.playerId!=o.ownPlayerId&&o._otherDisInterval>0&&(clearInterval(o._otherDisInterval),o._otherDisInterval=0),o._room&&e.playerId==o._ownPlayerId&&o._room.customRoomProperties)if(o._room.customRoomProperties==h.READY)o.roomType=h.READY,o._time=0;else if(o._room.customRoomProperties==h.END)o.roomType=h.END,o._time=(new Date).getTime()-1e3*c.GAME_TIME;else{var t=JSON.parse(o._room.customRoomProperties);o.roomType=t.type,o._time=t.time}})),this._room.onJoinFailed((function(e){console.log("aaaaaaaa2----onJoinFailed 加入失败",e)})),this._room.onLeave((function(e){console.log("aaaaaaaa2----onLeave 离开",e.playerId),e.playerId!=o._ownPlayerId?o.updateRoom():o._room.removeAllListeners(),o._room.ownerId==e.playerId&&(o._isRoomOwnIn=!1)})),this._room.onDisconnect((function(e){if(console.log("aaaaaaaa2 onDisconnect",e.playerId),e.playerId===o._room.playerId){if(o._room)var t=setInterval((function(){console.log("aaaaaaaa2 onDisconnect",t),null!=o._room?o._room.reconnect().then((function(){clearInterval(t),console.log("aaaaaaaa2----reconnect success")})).catch((function(){console.log("aaaaaaaa2----reconnect fail")})):clearInterval(t)}),1e3)}else if(o.updateRoom(),o.roomType==h.READY){o._isReadyDis=!0;var n=10;o._otherDisInterval=setInterval((function(){m.instance.showTips(c.ROOM_TIPS.PLAYER_LEAVE_1+n+c.ROOM_TIPS.PLAYER_LEAVE_2),--n<=0&&(r.dispatchEvent(c.EVENT_NAME.ON_GAME_END),o._room.updateRoomProperties({customRoomProperties:JSON.stringify({type:h.END,time:0})}),clearInterval(o._otherDisInterval))}),1e3)}o._room.ownerId==e.playerId&&(o._isRoomOwnIn=!1)})),this._room.onRoomPropertiesChange((function(e){console.log("aaaaaaaa2 onRoomPropertiesChange",e.customRoomProperties);var t=JSON.parse(e.customRoomProperties);o.roomType=t.type,o._time=t.time,t.type==h.START?r.dispatchEvent(c.EVENT_NAME.ON_GAME_START):t.type==h.END?r.dispatchEvent(c.EVENT_NAME.ON_GAME_END):(t.type,h.READY),o.updateRoom()})),this._room.onStartFrameSync((function(){console.log("aaaaaaaa2 onStartFrameSync"),o._isStartFS=!0,o._isAi||(o.joinTeamRoom(o._room.ownerId),o.joinGroupChannel(o._room.ownerId))})),this._room.onStopFrameSync((function(){console.log("aaaaaaaa2----onStopFrameSync结束帧同步"),o._isStartFS=!1,o._currFrame=0,o._recvMap=new Map,e.instance.mediaLeaveRoom(),e.instance.leaveChannel(),m.instance.hideDialog(c.PANEL_NAME.MEDIA_PANEL)})),this._room.onRecvFromServer((function(e){console.log("aaaaaaaa2----onRecvFromServer 服务端数据",e.msg);var t=e.msg,n=JSON.parse(t);n&&(n.msg==c.START_GAME?(n.playerId!=o._ownPlayerId?o._isOtherStartGame=!0:o._isStartGame=!0,o._room.ownerId==o._ownPlayerId&&o._isOtherStartGame&&o._isStartGame&&o._room.sendToServer(c.START_GAME_TIME)):n.msg==c.START_GAME_TIME&&(o.serverTimeDis=n.time-(new Date).getTime(),o._room.ownerId==o._ownPlayerId&&(o._room.startFrameSync(),o._room.updateRoomProperties({customRoomProperties:JSON.stringify({type:h.START,time:n.time,serverTimeDis:o.serverTimeDis})}))))})),this._room.onRecvFrame((function(e){if(e instanceof Array){for(var t=0;t<e.length;t++)o._time=e[t].time,e[t].frameInfo&&o._recvMap.set(e[t].currentRoomFrameId,e[t].frameInfo);o._currFrame=e[e.length-1].currentRoomFrameId,r.dispatchEvent(c.EVENT_NAME.ON_RECV_SYNC)}else o._time=e.time,e.frameInfo&&o._recvMap.set(e.currentRoomFrameId,e.frameInfo),o._currFrame=e.currentRoomFrameId}))},t.createRoomAI=function(e,o){var t=this;this.serverTimeDis=0,this._isAi=!0,this._wifiType=d.STAND_ALONE,this._currFrame=0,this._recvMap=new Map,console.log("aaaaaaaa2----createRoomAI 创建房间"),this._roomAloneInfo=new f,this._roomAloneInfo.ownerId=this._ownPlayerId,this._roomAloneInfo.roomCode="0001"+Math.floor(100*Math.random()),this._roomAloneInfo.players=[],this._roomAloneInfo.players.push({playerId:this._ownPlayerId,customPlayerProperties:l.instance.playerInfo.playerName}),_.randomName(1).then((function(e){t._roomAloneInfo.players.push({playerId:"ai00000",customPlayerProperties:e})})),this._roomAloneInfo.customRoomProperties=JSON.stringify({type:h.READY,time:0}),this.roomType=h.READY,this._time=0,this._isStartFS=!0,e&&e()},t.createRoom=function(e,o){var t=this;this._currFrame=0,this._recvMap=new Map,this._isAi=!1,this._wifiType=d.WIFI,console.log("aaaaaaaa2----createRoom 创建房间"),this._client.createRoom({maxPlayers:2},{customPlayerStatus:0,customPlayerProperties:l.instance.playerInfo.playerName}).then((function(o){t._room=o,t._lastRoomId=o.roomId,t._enabledEventRoom(),console.log("aaaaaaaa2 -------READY------"),t._room.updateRoomProperties({customRoomProperties:JSON.stringify({type:h.READY,time:0})}),e&&e(),console.log("aaaaaaaa2----创建房间成功")})).catch((function(e){o&&o(),console.log("aaaaaaaa2----创建房间失败 错误",e)}))},t.joinRoom=function(e,o,t){var n=this;this._currFrame=0,this._recvMap=new Map,this._isAi=!1,this._wifiType=d.WIFI,console.log("aaaaaaaa2----joinRoom 加入房间"),this._client.joinRoom(e,{customPlayerStatus:0,customPlayerProperties:l.instance.playerInfo.playerName}).then((function(e){n._room=e,n._lastRoomId=e.roomId,n._enabledEventRoom(),n._room.players.length==c.MAX_PLAYER&&(n._isRoomOwnIn=!0),console.log("aaaaaaaa2 加入房间成功"),o&&o()})).catch((function(e){console.log("aaaaaaaa2 申请加入房间 错误",e),t&&t(e)}))},t.matchRoom=function(e,o){var t=this;this._currFrame=0,this._recvMap=new Map,this._isAi=!1,this._wifiType=d.WIFI,console.log("aaaaaaaa2----matchRoom 开始匹配房间"),this._client.matchRoom({matchParams:{},maxPlayers:2,customRoomProperties:JSON.stringify({type:h.READY,time:0})},{customPlayerStatus:0,customPlayerProperties:l.instance.playerInfo.playerName}).then((function(o){console.log("aaaaaaaa2----matchRoom success"),t._room=o,t._lastRoomId=o.roomId,t._enabledEventRoom(),t._room.players.length==c.MAX_PLAYER&&(t._isRoomOwnIn=!0),e&&e()})).catch((function(e){o&&o(),console.log("aaaaaaaa2----matchRoom error",e)}))},t.updateRoom=function(){var e=this;null!=this._room&&this._room.update().then((function(o){e._room=o,console.log("aaaaaaaa2 updateRoom",o)})).catch((function(e){console.log("aaaaaaaa2 更新房间信息 error",e)}))},t.leaveRoom=function(e,o,t){var n=this;void 0===t&&(t=!0),this._isReadyDis&&(this._isReadyDis=!1,this._room&&this._room.sendToServer(c.DISMISS)),this._lastRoomId&&this._client?(this._client.leaveRoom().then((function(o){console.log("aaaaaaaa2离开房间 成功"),n._client=o,n._client.removeAllListeners(),n._room&&n._room.removeAllListeners(),n._room=null,e&&e()})).catch((function(e){o&&o(e),console.log("aaaaaaaa2离开房间 error",e)})),t&&(this.leaveChannel(),this.mediaLeaveRoom(),m.instance.hideDialog(c.PANEL_NAME.MEDIA_PANEL))):(this._roomAloneInfo=null,e&&e())},t.isInited=function(){return!!this._ownPlayerId},t.leaveGame=function(){this.isHwLogin=!1,this._ownPlayerId="",this._roomAloneInfo=null,this._client&&(this._client.destroy(),this._client=null,this._room=null,this._ownPlayerId="",this.leaveChannel(),this.mediaLeaveRoom(),this.destoryMedia(),m.instance.hideDialog(c.PANEL_NAME.MEDIA_PANEL),l.instance.isInit=!1)},t.startMedia=function(e){i.platform==i.Platform.ANDROID&&(console.log("time startMedia:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","startMediaEngine","(Ljava/lang/String;)V",e))},t.destoryMedia=function(){i.platform==i.Platform.ANDROID&&(console.log("time destoryMedia:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","destoryMediaEngine","()V"))},t.joinTeamRoom=function(e){this.isInitMedia&&i.platform==i.Platform.ANDROID&&(console.log("time joinTeamRoom:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","joinTeamRoom","(Ljava/lang/String;)V",e))},t.mediaLeaveRoom=function(){if(this._msgLst=[],i.platform==i.Platform.ANDROID){var o=l.instance.getSetting("TeamRoom");if(o){var t=o[e.instance.openId];t&&""!=t&&(console.log("time mediaLeaveRoom:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","leaveRoom","(Ljava/lang/String;)V",t))}this._isOpenMedia=!1}},t.mediaMuteAllPlayers=function(o){if(i.platform==i.Platform.ANDROID){var t=l.instance.getSetting("TeamRoom");if(t){var n=t[e.instance.openId];n&&""!=n&&(console.log("time mediaMuteAllPlayers:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","muteAllPlayers","(Ljava/lang/String;I)V",n,o?0:1))}}},t.mediaEnableMic=function(e){i.platform==i.Platform.ANDROID&&(console.log("time mediaEnableMic:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","enableMic","(I)V",e?0:1))},t.joinGroupChannel=function(e){i.platform==i.Platform.ANDROID&&(console.log("time joinGroupChannel:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","joinGroupChannel","(Ljava/lang/String;)V",e))},t.leaveChannel=function(){if(i.platform==i.Platform.ANDROID){var o=l.instance.getSetting("JoinChannel");if(o){var t=o[e.instance.openId];t&&""!=t&&(console.log("time leaveChannel:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","leaveChannel","(Ljava/lang/String;)V",t))}}},t.sendTextMsg=function(o){if(i.platform==i.Platform.ANDROID){var t=l.instance.getSetting("JoinChannel")[e.instance.openId];t&&""!=t&&(console.log("time sendTextMsg:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","sendTextMsg","(Ljava/lang/String;Ljava/lang/String;)V",t,o))}},t.startRecordAudioToText=function(){i.platform==i.Platform.ANDROID&&(console.log("time startRecordAudioToText:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","startRecordAudioToText","()V"))},t.stopRecordAudioToText=function(){i.platform==i.Platform.ANDROID&&(console.log("time stopRecordAudioToText:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/MediaEngine","stopRecordAudioToText","()V"))},t.startForumPage=function(){i.platform==i.Platform.ANDROID&&(this._isOpenPgs=!1,console.log("time startForumPage:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/ForumPage","startPgs","()V"))},t.openForumPage=function(){i.platform==i.Platform.ANDROID&&(console.log("time openForumPage:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/ForumPage","openForumPage","()V"))},t.forumPageCheckScene=function(){i.platform==i.Platform.ANDROID&&(console.log("time openForumPage:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/ForumPage","checkScene","()V"))},t.forumPagePublish=function(){i.platform==i.Platform.ANDROID&&(console.log("time openForumPage:"+(new Date).getTime()),s.reflection.callStaticMethod("com/cocos/game/ForumPage","publish","()V"))},t.checkInitMedia=function(){var o=l.instance.getSetting("TeamRoom");if(o&&o[e.instance.openId]){var t=o[e.instance.openId];if(""!=t&&t!=c.WORLD_ID)return e.instance.isRemoveMedia=!0,void e.instance.joinTeamRoom(t)}r.dispatchEvent(c.EVENT_NAME.INIT_MEDIA)},t.checkInitChannel=function(){var o=l.instance.getSetting("JoinChannel");if(o&&o[e.instance.openId]){var t=o[e.instance.openId];if(""!=t&&t!=c.WORLD_ID)return e.instance.joinGroupChannel(t),void(e.instance.isRemoveChannel=!0)}r.dispatchEvent(c.EVENT_NAME.INIT_CHANNEL)},t.hwSignIn=function(){i.platform==i.Platform.ANDROID&&s.reflection.callStaticMethod("com/cocos/game/JosAppControl","signIn","()V")},t.initHuawei=function(){i.platform==i.Platform.ANDROID&&s.reflection.callStaticMethod("com/cocos/game/JosAppControl","initHuawei","()V")},t._statistics=function(){var o={appType:"hwsdk",reportType:"Start",sdkName:"hwgobe",appId:e.APP_ID,time:Date.now(),version:"1.0.0_13.6.2"};fetch("https://k.cocos.org/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.text()})).then((function(e){console.log(e)}))},o(e,[{key:"openId",get:function(){return this._openId}},{key:"room",get:function(){return this._wifiType==d.STAND_ALONE?this._roomAloneInfo:this._room}},{key:"ownPlayerId",get:function(){return this._ownPlayerId}},{key:"roomPlayers",get:function(){return this._wifiType==d.STAND_ALONE?this._roomAloneInfo.players:this._room?this._room.players:[]}},{key:"lastRoomId",get:function(){return this._lastRoomId},set:function(e){this._lastRoomId=e}},{key:"isInitMedia",get:function(){return this._isInitMedia},set:function(e){this._isInitMedia=e}},{key:"isChannelId",get:function(){return this._isChannelId},set:function(e){this._isChannelId=e}},{key:"isOpenPgs",get:function(){return this._isOpenPgs},set:function(e){this._isOpenPgs=e}},{key:"msgLst",get:function(){return this._msgLst}},{key:"time",get:function(){return this.wifiType==d.STAND_ALONE?(new Date).getTime():this._time}},{key:"isAi",get:function(){return this._isAi}},{key:"hammerIndex",set:function(e){this._hammerIndex=e}},{key:"isRoomOwnIn",get:function(){return this._isRoomOwnIn}},{key:"isDisJoin",get:function(){return this._isDisJoin}},{key:"recvMap",get:function(){return this._recvMap}},{key:"currFrame",get:function(){return this._currFrame}},{key:"wifiType",get:function(){return this._wifiType}},{key:"isHwInit",get:function(){return this._isHwInit},set:function(e){this._isHwInit=e}},{key:"isHwLogin",get:function(){return this._isHwLogin},set:function(e){this._isHwLogin=e}},{key:"isOpenMedia",get:function(){return this._isOpenMedia},set:function(e){this._isOpenMedia=e}},{key:"isRemoveMedia",get:function(){return this._isRemoveMedia},set:function(e){this._isRemoveMedia=e}},{key:"isRemoveChannel",get:function(){return this._isRemoveChannel},set:function(e){this._isRemoveChannel=e}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}());u.CLIENT_ID="1486328854157995456",u.CLIENT_SECRET="DF93E037507697A0D45F34EE1597D6B32C0D271EA58D5FCEA4A8D01D145B653C",u.APP_ID="172249065903389321",u._instance=null,window.callbackToGMMCreate=function(e,o){console.log("time callbackToGMMCreate:"+(new Date).getTime()),0==e&&(u.instance.isInitMedia=!0,u.instance.checkInitMedia(),u.instance.checkInitChannel()),console.log("-------callbackToGMMCreate",e,o)},window.callbackToGmmJoin=function(e,o,t){if(console.log("time callbackToGmmJoin:"+(new Date).getTime()),0==e){var n=l.instance.getSetting("TeamRoom");if(n||(n={}),n[u.instance.openId]=o,l.instance.setSetting("TeamRoom",n),u.instance.isOpenMedia=!0,u.instance.mediaEnableMic(!1),u.instance.mediaMuteAllPlayers(!1),u.instance.isRemoveMedia)return void u.instance.mediaLeaveRoom()}else m.instance.showTips("实时语音开启异常："+e);console.log("------callbackToGmmJoin",e,t),r.dispatchEvent(c.EVENT_NAME.OPEN_MEDIA)},window.callbackToGmmMic=function(e,o,t){console.log("callbackToGmmMic",e,o,t)},window.callbackToGmmLeave=function(e,o,t){if(0==e){var n=l.instance.getSetting("TeamRoom");if(n[u.instance.openId]="",l.instance.setSetting("TeamRoom",n),u.instance.isRemoveMedia)return u.instance.isRemoveMedia=!1,void r.dispatchEvent(c.EVENT_NAME.INIT_MEDIA)}},window.callbackToJoinChannel=function(e,o,t){if(0==e){var n=l.instance.getSetting("JoinChannel");if(n||(n={}),n[u.instance.openId]=o,l.instance.setSetting("JoinChannel",n),u.instance.isChannelId=!0,u.instance.isRemoveChannel)return void u.instance.leaveChannel()}else m.instance.showTips("文本语音开启异常："+e);console.log("---------callbackToJoinChannel",e,t),r.dispatchEvent(c.EVENT_NAME.OPEN_CHANNEL)},window.callbackToLeaveChannel=function(e,o,t){if(console.log("time callbackToLeaveChannel:"+(new Date).getTime()),0==e){var n=l.instance.getSetting("JoinChannel");n[u.instance.openId]="",l.instance.setSetting("JoinChannel",n),u.instance.isChannelId=!1,u.instance.isRemoveChannel&&(u.instance.isRemoveChannel=!1,r.dispatchEvent(c.EVENT_NAME.INIT_CHANNEL))}console.log("---------callbackToLeaveChannel",e,t)},window.callbackToSendMsg=function(e,o){console.log("time callbackToSendMsg:"+(new Date).getTime()),u.instance.msgLst.push({isOwn:!0,content:e,sendId:o.substring(5)}),r.dispatchEvent(c.EVENT_NAME.SEND_MSG)},window.callbackToRecvMsg=function(e,o){console.log("time callbackToRecvMsg:"+(new Date).getTime()),u.instance.msgLst.push({isOwn:!1,content:e,sendId:o.substring(5)}),r.dispatchEvent(c.EVENT_NAME.SEND_MSG),console.log("callbackToRecvMsg",e)},window.callbackToVT=function(e,o){console.log("time callbackToVT:"+(new Date).getTime()),0==e?r.dispatchEvent(c.EVENT_NAME.SEND_VT,o):r.dispatchEvent(c.EVENT_NAME.SEND_VT,""),console.log("callbackToVT",o)},window.callbackToNoPer=function(){console.log("time callbackToNoPer:"+(new Date).getTime()),m.instance.showTips(c.ROOM_TIPS.MEDIA_FAIL)},window.callbackObsSuccess=function(){},window.callbackToStartPgs=function(){u.instance.isOpenPgs=!0,r.dispatchEvent(c.EVENT_NAME.OPEN_PGS)},window.callbackToJosInit=function(e,o){e==c.HUAWEI_LOGIN.INIT_SUCCESS&&(u.instance.isHwInit=!0),r.dispatchEvent(c.EVENT_NAME.HUAWEI_LOGIN_MSG,e,o)},t._RF.pop()}}}));

System.register("chunks:///_virtual/join_room_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./uiManager.ts","./constant.ts","./LanguageData.ts"],(function(n){var t,o,i,e,a,c,r,s,l,u,_,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,i=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){a=n.cclegacy,c=n._decorator,r=n.EditBox,s=n.Component},function(n){l=n.GobeUtil},function(n){u=n.UIManager},function(n){_=n.Constant},function(n){p=n.updateSceneRenderers}],execute:function(){var O,f,h,g,R;a._RF.push({},"4c16cW6IuBEZJNxoo2k68+N","join_room_panel",void 0);var d=c.ccclass,N=c.property;n("JoinRoomPanel",(O=d("JoinRoomPanel"),f=N(r),O((R=t((g=function(n){function t(){for(var t,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return t=n.call.apply(n,[this].concat(a))||this,i(t,"editBox",R,e(t)),t._callback=null,t}o(t,n);var a=t.prototype;return a.show=function(n){p(),this.editBox.string="",this._callback=n},a.onJoinRoom=function(){var n=this;""!=this.editBox.string?l.instance.joinRoom(this.editBox.string,(function(){u.instance.showDialog(_.PANEL_NAME.READY),u.instance.showTips(_.ROOM_TIPS.JOIN_ROOM_SUCCESS),u.instance.hideDialog(_.PANEL_NAME.JOIN_ROOM_PANEL),n._callback&&n._callback()}),(function(n){u.instance.showTips(_.ROOM_TIPS.NO_ROOM_ID)})):u.instance.showTips(_.ROOM_TIPS.NO_ROOM_ID)},a.onClose=function(){u.instance.hideDialog(_.PANEL_NAME.JOIN_ROOM_PANEL)},t}(s)).prototype,"editBox",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var a,n;return{setters:[function(e){a=e.cclegacy,n=e.director}],execute:function(){e({init:r,t:function(e){var a=window;if(!a.languages)return e;for(var n=e.split("."),r=a.languages[t],o=0;o<n.length;o++)if(!(r=r[n[o]]))return"";return r||""},updateSceneRenderers:o}),a._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var t=e("_language","zh");e("ready",!1);function r(a){e("ready",!0),t=e("_language",a)}function o(){for(var e=n.getScene().children,a=[],t=[],r=[],o=0;o<e.length;++o){var i=e[o].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(a,i);var u=e[o].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(t,u);var p=e[o].getComponentsInChildren("LocalizedMaterial");Array.prototype.push.apply(r,p)}for(var g=0;g<a.length;++g){var l=a[g];l.node.active&&l.updateLabel()}for(var c=0;c<t.length;++c){var d=t[c];d.node.active&&d.updateSprite()}for(var v=0;v<r.length;++v){var s=r[v];s.node.active&&s.updateMat()}}window._languageData={get language(){return t},init:function(e){r(e)},updateSceneRenderers:function(){o()}},a._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./csvManager.ts","./resourceUtil.ts"],(function(n){var t,e,a,r,i,c;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,a=n._decorator,r=n.resources},function(n){i=n.CSVManager},function(n){c=n.ResourceUtil}],execute:function(){var o,s;e._RF.push({},"12facSZhFRGIYa7yxiLVDOp","localConfig",void 0);var u=a.ccclass;a.property,n("LocalConfig",u("LocalConfig")(((s=function(){function n(){this._csvManager=new i,this._callback=new Function,this._currentLoad=0,this._cntLoad=0}var e=n.prototype;return e.loadConfig=function(n){this._callback=n,this._loadCSV()},e._loadCSV=function(){var n=this;r.loadDir("datas",(function(t,e){if(!t){var a=e.filter((function(n){return".md"!==n._native}));n._cntLoad=a.length,a.length?a.forEach((function(t,e,a){c.getTextData(t.name,(function(e,a){n._csvManager.addTable(t.name,a),n._tryToCallbackOnFinished()}))})):n._tryToCallbackOnFinished()}}))},e.queryOne=function(n,t,e){return this._csvManager.queryOne(n,t,e)},e.queryByID=function(n,t){return this._csvManager.queryByID(n,t)},e.getTable=function(n){return this._csvManager.getTable(n)},e.getTableArr=function(n){return this._csvManager.getTableArr(n)},e.queryAll=function(n,t,e){return this._csvManager.queryAll(n,t,e)},e.queryIn=function(n,t,e){return this._csvManager.queryIn(n,t,e)},e.queryByCondition=function(n,t){return this._csvManager.queryByCondition(n,t)},e._tryToCallbackOnFinished=function(){this._callback&&(this._currentLoad++,this._currentLoad>=this._cntLoad&&this._callback())},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,o=s))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,n,r,a,o,l,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Component},function(e){c=e.ready,u=e.init,s=e.t}],execute:function(){var p,d,f;a._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var h=o.ccclass,b=o.property,L=o.executeInEditMode;e("LocalizedLabel",h("LocalizedLabel")(p=L((f=t((d=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).label=null,n(t,"key",f,r(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},a.updateLabel=function(){this.label&&(this.label.string=s(this.key))},t}(l)).prototype,"key",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=d))||p)||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedMaterial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,a,r,n,l,o,s,u,c,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,a=e.inheritsLoose,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Material,s=e.MeshRenderer,u=e.Component},function(e){c=e.ready,h=e.init,p=e._language}],execute:function(){var f,d,g,m,L,y,v,z,M,b,R;n._RF.push({},"35069qDXPFL47Ep1p+WLvRd","LocalizedMaterial",void 0);var D=l.ccclass,_=l.property,w=l.executeInEditMode,F=(f=D("LocalizedMaterialItem"),d=_({type:o}),f((L=t((m=function(){i(this,"language",L,this),i(this,"material",y,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),y=t(m.prototype,"material",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g);e("LocalizedMaterial",(v=D("LocalizedMaterial"),z=_({type:F}),v(M=w((R=t((b=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).mesh=null,i(t,"materialsList",R,r(t)),t}a(t,e);var n=t.prototype;return n.onLoad=function(){c||h("zh"),this.fetchRender()},n.fetchRender=function(){var e=this.getComponent(s);if(e)return this.mesh=e,void this.updateMat()},n.updateMat=function(){for(var e=0;e<this.materialsList.length;e++){var t=this.materialsList[e];t.language===p&&this.mesh&&this.mesh.setMaterial(t.material,0)}},t}(u)).prototype,"materialsList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=b))||M)||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,a,o,p,s,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.SpriteFrame,s=e.Component},function(e){c=e.ready,u=e.init,l=e._language}],execute:function(){var f,h,d,g,y,z,L,m,b,v,S;a._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var F=o.ccclass,R=o.property,_=o.executeInEditMode,w=(f=F("LocalizedSpriteItem"),h=R({type:p}),f((y=t((g=function(){i(this,"language",y,this),i(this,"spriteFrame",z,this)}).prototype,"language",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),z=t(g.prototype,"spriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d);e("LocalizedSprite",(L=F("LocalizedSprite"),m=R({type:w}),L(b=_((S=t((v=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).sprite=null,i(t,"spriteList",S,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},a.updateSprite=function(){if(this.sprite)for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===l){this.sprite.spriteFrame=t.spriteFrame;break}}else this.fetchRender()},t}(s)).prototype,"spriteList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["cc"],(function(r){var n,t;return{setters:[function(r){n=r.cclegacy,t=r._decorator}],execute:function(){var e,u;n._RF.push({},"a40a4pGR6lCqo0coR1W4kAl","lodash",void 0);var i=t.ccclass;r("Lodash",i("Lodash")(((u=function(){function r(){}return r.find=function(n,t){var e;if(Array.isArray(n)||(n=r._toArray(n)),(e=n.filter(t)).length)return e[0]},r.forEach=function(n,t){Array.isArray(n)?n.forEach(t):r._toArrayKey(n).forEach((function(r,e,u){var i=r.key,o=r.value;t(o,i,n)}))},r.cloneDeep=function(n){if(null===n||"object"!=typeof n)return n;var t={};for(var e in n.constructor===Array&&(t=[]),n)n.hasOwnProperty(e)&&(t[e]=r.cloneDeep(n[e]));return t},r.map=function(n,t){Array.isArray(n)||(n=r._toArray(n));var e=[];return n.forEach((function(r,n,u){e.push(t(r,n,u))})),e},r._toArrayKey=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push({key:t,value:r[t]});return n},r._toArray=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(r[t]);return n},r.filter=function(n,t){return Array.isArray(n)||(n=r._toArray(n)),n.filter(t)},r.isEqual=function(n,t){if(!(n instanceof Object)||!(t instanceof Object))return n===t;if(Object.keys(n).length!==Object.keys(t).length)return!1;for(var e in n){var u=n[e]instanceof Object,i=t[e]instanceof Object;if(u&&i)return r.isEqual(n[e],t[e]);if(n[e]!==t[e])return!1}return!0},r.pullAllWith=function(r,n,t){return n.forEach((function(n){r.filter((function(r){return t(r,n)})).forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)}))})),r},r.now=function(){return Date.now()},r.pullAll=function(r,n){return n.forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)})),r},r.forEachRight=function(n,t){Array.isArray(n)||(n=r._toArray(n));for(var e=n.length-1;e>=0;e--){if(!t(n[e]))break}},r.startsWith=function(r,n,t){return(r=r.substr(t)).startsWith(n)},r.endsWith=function(r,n,t){return(r=r.substr(t)).endsWith(n)},r.remove=function(n,t){var e=[],u=[];return n.forEach((function(r,n){t(r)&&(e.push(r),u.push(n))})),r._basePullAt(n,u),e},r._basePullAt=function(r,n){for(var t,e=r?n.length:0,u=e-1;e--;){var i=n[e];e!==u&&i===t||(t=i,Array.prototype.splice.call(r,i,1))}return r},r.findIndex=function(r,n,t){var e;if(r=r.slice(t),"function"==typeof n){for(e=0;e<r.length;e++)if(n(r[e]))return e}else if(Array.isArray(n))for(e=0;e<r.length;e++){var u=n[0],i=!0;if(n.length>1&&(i=n[1]),r[e][u]===i)return e}else for(e=0;e<r.length;e++)if(r[e]===n)return e;return-1},r.concat=function(){var r=arguments.length;if(!r)return[];for(var n=arguments[0],t=1;t<r;)n=n.concat(arguments[t]),t++;return n},r.isNumber=function(r){return"number"==typeof r},r.indexOf=function(r,n,t){return(r=r.slice(t)).indexOf(n)},r.join=function(r,n){if(null===r)return"";var t="";return r.forEach((function(r){t+=r+n})),t.substr(0,t.length-1)},r.split=function(r,n,t){return r.split(n,t)},r.max=function(r){if(r&&r.length){for(var n,t=0;t<r.length;t++)0===t?n=r[0]:n<r[t]&&(n=r[t]);return n}},r.drop=function(r,n){return(null===r?0:r.length)?r.slice(n):[]},r.flattenDeep=function(n){return n.reduce((function(n,t){return n.concat(Array.isArray(t)?r.flattenDeep(t):t)}),[])},r.uniq=function(r){var n=[];return r.forEach((function(r){-1===n.indexOf(r)&&n.push(r)})),n},r.isNaN=function(n){return r.isNumber(n)&&n!==+n},r.chunk=function(r,n){if(!(null===r?0:r.length)||n<1)return[];for(var t=[];r.length>n;)t.push(r.slice(0,n)),r=r.slice(n);return t.push(r),t},r.toFinite=function(r){var n=1/0;return r?(r=Number(r))===n||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0},r.isObject=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)},r.isLength=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=r.MAX_SAFE_INTEGER},r._isArrayLike=function(n){return null!==n&&r.isLength(n.length)},r.maxBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t<r[u]&&(t=r[u],e=r[u]);return e}},r.minBy=function(r,n){if(r&&r.length){for(var t,e,u=0;u<r.length;u++)0===u?(t=n(r[0]),e=r[0]):t>r[u]&&(t=n(r[u]),e=r[u]);return e}},r.sumBy=function(r,n){var t=0;for(var e in r)t+=n(r[e]);return t},r.countBy=function(r,n){var t={};for(var e in r){var u=n(e);t.hasOwnProperty(u)?t[u]+=1:t[u]=1}return t},r}()).MAX_SAFE_INTEGER=9007199254740991,e=u))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/logicManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./displayManager.ts","./clientEvent.ts","./constant.ts","./gameState.ts","./playerLogic.ts","./propLogic.ts","./util.ts","./gobeUtil.ts"],(function(e){var t,a,r,n,i,o,c,s,m,p,l,h,u,E,_,A,f,g,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createClass},function(e){o=e.cclegacy,c=e._decorator,s=e.Vec3,m=e.find,p=e.Component},function(e){l=e.DisplayManager},function(e){h=e.ClientEvent},function(e){u=e.Constant},function(e){E=e.PropType},function(e){_=e.PlayerLogic},function(e){A=e.PropLogic},function(e){f=e.Util},function(e){g=e.GobeUtil,M=e.ROOM_TYPE}],execute:function(){var y,T,d,G,I,S,v;o._RF.push({},"549cbz5PQRIrrDQ5jFvESJj","logicManager",void 0);var R=c.ccclass,L=c.property;e("LogicManager",(y=R("LogicManager"),T=L(_),d=L(A),y((S=t((I=function(e){function t(){for(var t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,r(t,"playerLogic",S,n(t)),r(t,"propLogic",v,n(t)),t.currentGameState={},t._arrayGameState=[],t._startGameTime=0,t._isGameing=!1,t._frameIndex=0,t._isAiHit=!1,t}a(t,e);var o=t.prototype;return o.start=function(){this._onGetRoomInfo(),this.playerLogic.init(this),this.propLogic.init(this)},o.onEnable=function(){h.on(u.EVENT_NAME.ON_GAME_START,this._onStartGame,this),h.on(u.EVENT_NAME.ON_GAME_END,this._onEndGame,this),h.on(u.EVENT_NAME.CREATE_HAMMER,this._onCreateHammer,this)},o.onDisable=function(){h.off(u.EVENT_NAME.ON_GAME_START,this._onStartGame,this),h.off(u.EVENT_NAME.ON_GAME_END,this._onEndGame,this),h.off(u.EVENT_NAME.CREATE_HAMMER,this._onCreateHammer,this)},o._onEndGame=function(){this._isGameing&&(this._isGameing=!1,g.instance.finishGame())},o.setDefaultGameState=function(){this._arrayGameState=[],this.playerLogic.reset(),this.propLogic.reset(),this.currentGameState.id=0,this.currentGameState.props=this.propLogic.initProps(),this.currentGameState.players=this.playerLogic.initPlayer(),this.currentGameState.frameTime=Date.now(),this.currentGameState.createHammerTime=u.GAME_TIME-u.HAMMER_TIME,this._frameIndex=0},o._onGetRoomInfo=function(){var e=g.instance.roomPlayers,t=this.currentGameState.players;e.forEach((function(e,a){var r=0;g.instance.checkIsRoomOwner(e.playerId)||(r=1);var n=t[r];n.channel||(n.channel={}),n.channel.openId=e.playerId,n.channel.name=e.customPlayerProperties,n.channel.state=e.customPlayerStatus,n.channel.delayTime=0})),h.dispatchEvent(u.EVENT_NAME.ON_GAME_READY)},o._onStartGame=function(){this._isGameing=!0,this._startGameTime=JSON.parse(g.instance.room.customRoomProperties).time,this._arrayGameState[0]=f.clone(this.currentGameState);var e=this.currentGameState.players;this.playerLogic.updatePlayerNode(e)},o._onCreateHammer=function(e){this.currentGameState.props[this.propLogic.indexProp]=this.propLogic.generateProp(new s(e[0],e[1],e[2]),1,E.HAMMER),this.propLogic.indexProp++},o.checkIsReCovery=function(){var e=this;g.instance.isDisJoin&&this._handleAction((function(){e.scriptDisplayManager.updateStateRecovery(e.currentGameState),e.playerLogic.updateStateRecovery(),e.scriptDisplayManager.updateProp(e.currentGameState)}))},o.onCreateCoin=function(e){this.propLogic.createCoinServer(e)},o.lateUpdate=function(e){if((!g.instance.room||g.instance.roomType==M.START)&&this._isGameing){this._handleAction();var t=g.instance.time+g.instance.serverTimeDis;this.currentGameState.time=Math.floor(u.GAME_TIME-(t-this._startGameTime)/1e3),this.currentGameState.time<=0&&(this._isGameing=!1,g.instance.finishGame()),this.playerLogic.updateState(),this.scriptDisplayManager.updateOwnState(this.currentGameState,e),this.scriptDisplayManager.updateState(e,this.currentGameState,!1),this._checkPlayerScoreLead(),0==this.currentGameState.createHammerTime&&(this.currentGameState.createHammerTime=this.currentGameState.time-u.HAMMER_TIME,console.log("aaaaa",this.currentGameState.createHammerTime)),(!g.instance.isRoomOwnIn&&!g.instance.checkIsRoomOwner(g.instance.ownPlayerId)||g.instance.checkIsRoomOwner(g.instance.ownPlayerId))&&this.currentGameState.time<this.currentGameState.createHammerTime&&(console.log("aaaaaa",this.currentGameState.time,this.currentGameState.createHammerTime),this.currentGameState.createHammerTime=this.currentGameState.time-u.HAMMER_TIME,g.instance.createHammer(this.currentGameState.time-u.HAMMER_TIME))}},o._checkPlayerScoreLead=function(){var e=-1,t=0;for(var a in this.currentGameState.players){var r=this.currentGameState.players[a];r.channel&&t<r.score&&(t=r.score)}if(0!==t){for(var n=this.currentGameState.players.filter((function(e){return e.score===t})),i=0;i<n.length;i++){var o=n[i];if(o.isScoreLead){e=o.id;break}}-1===e&&(e=n[0].id),this.currentGameState.players.forEach((function(t){t.isScoreLead=t.id===e}))}},o._handleAction=function(e){var t=this;if(void 0===e&&(e=null),!(this._frameIndex>g.instance.currFrame)){var a=[];g.instance.recvMap.has(this._frameIndex)?(a=g.instance.recvMap.get(this._frameIndex),this._frameIndex++):this._frameIndex++;for(var r,n,i,o,c=function(){var e=a[m].playerId,o=t.currentGameState.players,c=o.filter((function(t){return t.channel&&t.channel.openId===e}));if(!c.length)return{v:void 0};r=a[m].data[0];var p=JSON.parse(r);switch(p.A){case u.ACTION.RUN:t.scriptDisplayManager.updateRun(e,t.currentGameState);break;case u.ACTION.IDLE:t.scriptDisplayManager.updateIdle(e,t.currentGameState);break;case u.ACTION.MOVE:1==p.AI?(o[u.AI_PLAYER].position=new s(p.X,0,p.Z),o[u.AI_PLAYER].eulerAngles=new s(0,p.V,0),t.playerLogic.move(u.AI_PLAYER,p.X,p.Z,p.V)):(c[0].position=new s(p.X,0,p.Z),c[0].eulerAngles=new s(0,p.V,0),c[0].moveX=p.MX,c[0].moveY=p.MY,t.playerLogic.move(c[0].id,p.X,p.Z,p.V));break;case u.ACTION.STOP_MOVE:t.playerLogic.stopMove(c[0],0,0,0);break;case u.ACTION.HEART_BEAT:c[0].channel.delayTime=p.V;break;case u.ACTION.HIT:1==p.AI?(t._isAiHit=!0,o[u.AI_PLAYER].attackPropType=E.HAMMER,o[u.AI_PLAYER].eulerAngles=new s(0,p.V,0)):(t._isAiHit=!1,c[0].attackPropType=E.HAMMER,c[0].eulerAngles=new s(0,p.V,0));break;case u.ACTION.IS_ATTACK_ED:t._isAiHit?(c[0].attackPropType=E.HAMMER_ED,n=0,c[0].score>10?(n=10,c[0].score-=10):(n=c[0].score,c[0].score=0),t.propLogic.createCoinByHammer(n,c[0].position)):o.filter((function(a){if(a.channel&&a.channel.openId!=e){a.attackPropType=E.HAMMER_ED;var r=0;a.score>10?(r=10,a.score-=10):(r=a.score,a.score=0),a.channel.openId!=g.instance.ownPlayerId&&t.propLogic.createCoinByHammer(r,a.position)}}));break;case u.ACTION.HAMMER:t.propLogic.removePropId(p.V)&&(1==p.AI?o[u.AI_PLAYER].hammerCount=1:c[0].hammerCount=1);break;case u.ACTION.ICON:t.propLogic.removePropId(p.V),1==p.AI?o[u.AI_PLAYER].score++:c[0].score++;break;case u.ACTION.CREATE_HAMMER:console.log("aaaaa",p),h.dispatchEvent(u.EVENT_NAME.CREATE_HAMMER,[p.X,p.Y,p.Z]),g.instance.hammerIndex=p.V+1,t.currentGameState.createHammerTime=p.T;break;case u.ACTION.CREATE_ICON:i=JSON.parse(p.I),h.dispatchEvent(u.EVENT_NAME.CREATE_COIN,i.coin_pos)}},m=0;m<a.length;m++)if(o=c())return o.v;e&&e(),this._handleAction(e)}},i(t,[{key:"scriptDisplayManager",get:function(){var e;return null==(e=m("display"))?void 0:e.getComponent(l)}}]),t}(p)).prototype,"playerLogic",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(I.prototype,"propLogic",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=I))||G));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./coinTipsManager.ts","./displayManager.ts","./fighter.ts","./fighterModel.ts","./gameCamera.ts","./gameState.ts","./gobeUtil.ts","./logicManager.ts","./meshHandle.ts","./playerLogic.ts","./propBase.ts","./propLogic.ts","./virtualPlayer.ts","./audioManager.ts","./clientEvent.ts","./constant.ts","./csvManager.ts","./effectManager.ts","./localConfig.ts","./lodash.ts","./playerData.ts","./poolManager.ts","./resourceUtil.ts","./storageManager.ts","./uiManager.ts","./util.ts","./staticBatch.ts","./collider_manager.ts","./quad_tree.ts","./test.ts","./tips.ts","./easy_touch.ts","./easy_touch_panel.ts","./down_off_panel.ts","./fightUI.ts","./gameOver.ts","./join_room_panel.ts","./match_panel.ts","./media_panel.ts","./message_item.ts","./message_panel.ts","./readyGo.ts","./select_panel.ts","./start_panel.ts","./tip_panel.ts","./transition_bg_panel.ts","./transition_panel.ts","./ready.ts","./select.ts","./LanguageData.ts","./LocalizedLabel.ts","./LocalizedMaterial.ts","./LocalizedSprite.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/match_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts","./constant.ts"],(function(t){var i,e,n,a,r,s,c,o,l,u,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Label,o=t.Component},function(t){l=t.updateSceneRenderers,u=t._language},function(t){h=t.Constant}],execute:function(){var p,_,f,L,m;r._RF.push({},"580efALErNO9pD9uGFLj9XL","match_panel",void 0);var b=s.ccclass,g=s.property;t("MatchPanel",(p=b("MatchPanel"),_=g(c),p((m=i((L=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"txtTip",m,a(i)),i._matchTime=0,i._lbList=[],i}e(i,t);var r=i.prototype;return r.show=function(){l(),u===h.I18_LANGUAGE.CHINESE?(this._lbList[0]="当前等待时长为",this._lbList[1]="秒"):(this._lbList[0]="The current wait duration is",this._lbList[1]="s"),this._matchTime=0},r.update=function(t){this._matchTime+=t,this.txtTip.string=this._lbList[0]+Math.floor(this._matchTime)+this._lbList[1]},i}(o)).prototype,"txtTip",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=L))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/media_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./constant.ts","./clientEvent.ts","./uiManager.ts"],(function(e){var i,n,t,s,a,o,c,l,r,p,h,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Node,l=e.Component},function(e){r=e.GobeUtil},function(e){p=e.Constant},function(e){h=e.ClientEvent},function(e){u=e.UIManager}],execute:function(){var m,M,E,g,O,f,v,_,d,C,N,b,A,S,y,P,z;a._RF.push({},"5cde57S4PhIcoNLWEezz3Iy","media_panel",void 0);var L=o.ccclass,w=o.property;e("MediaPanel",(m=L("MediaPanel"),M=w(c),E=w(c),g=w(c),O=w(c),f=w(c),v=w(c),_=w(c),m((N=i((C=function(e){function i(){for(var i,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,t(i,"mediaOpen",N,s(i)),t(i,"mediaClose",b,s(i)),t(i,"micClose",A,s(i)),t(i,"micOpen",S,s(i)),t(i,"noMessageOpen",y,s(i)),t(i,"messageClose",P,s(i)),t(i,"messageOpen",z,s(i)),i._isOpenMessage=!1,i._isFirstOpenM=!0,i}n(i,e);var a=i.prototype;return a.onEnable=function(){h.on(p.EVENT_NAME.SEND_MSG,this._onSendMsg,this),h.on(p.EVENT_NAME.OPEN_MEDIA,this._openMedia,this),h.on(p.EVENT_NAME.OPEN_CHANNEL,this._openChannel,this),h.on(p.EVENT_NAME.CLOSE_MESSAGE,this.onCloseMessage,this)},a.onDisable=function(){h.off(p.EVENT_NAME.SEND_MSG,this._onSendMsg,this),h.off(p.EVENT_NAME.OPEN_MEDIA,this._openMedia,this),h.off(p.EVENT_NAME.OPEN_CHANNEL,this._openChannel,this),h.off(p.EVENT_NAME.CLOSE_MESSAGE,this.onCloseMessage,this)},a._openMedia=function(){r.instance.isOpenMedia?(this.mediaClose.active=!0,this.mediaOpen.active=!1,this.micClose.active=!0,this.micOpen.active=!1):(this.mediaClose.active=!1,this.mediaOpen.active=!1,this.micClose.active=!1,this.micOpen.active=!1)},a._openChannel=function(){r.instance.isChannelId?(this.noMessageOpen.active=!0,this.messageClose.active=!1,this.messageOpen.active=!1):(this.noMessageOpen.active=!1,this.messageClose.active=!1,this.messageOpen.active=!1)},a.show=function(){this._isFirstOpenM=!0,this.mediaClose.active=!1,this.mediaOpen.active=!1,this.micClose.active=!1,this.micOpen.active=!1,this.noMessageOpen.active=!1,this.messageClose.active=!1,this.messageOpen.active=!1},a.onClickOpenMedia=function(){r.instance.mediaMuteAllPlayers(!0),this.mediaClose.active=!1,this.mediaOpen.active=!0},a.onClickCloseMedia=function(){r.instance.mediaMuteAllPlayers(!1),this.mediaClose.active=!0,this.mediaOpen.active=!1},a.onOpenMic=function(){r.instance.mediaEnableMic(!0),this.micClose.active=!1,this.micOpen.active=!0},a.onCloseMic=function(){r.instance.mediaEnableMic(!1),this.micClose.active=!0,this.micOpen.active=!1},a.onOpenMessage=function(){this._isOpenMessage=!0,u.instance.showDialog(p.PANEL_NAME.MESSAGE_PANEL,[this._isFirstOpenM]),this.messageClose.active=!0,this.noMessageOpen.active=!1,this.messageOpen.active=!1,this._isFirstOpenM=!1},a.onCloseMessage=function(){this._isOpenMessage=!1,u.instance.hideDialog(p.PANEL_NAME.MESSAGE_PANEL),this.messageClose.active=!1,this.noMessageOpen.active=!0,this.messageOpen.active=!1},a._onSendMsg=function(e){""==e||this._isOpenMessage||(this.noMessageOpen.active=!1,this.messageOpen.active=!0)},i}(l)).prototype,"mediaOpen",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(C.prototype,"mediaClose",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(C.prototype,"micClose",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(C.prototype,"micOpen",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(C.prototype,"noMessageOpen",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(C.prototype,"messageClose",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(C.prototype,"messageOpen",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/meshHandle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,s,o,i,h,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,s=e.assertThisInitialized,o=e.createClass},function(e){i=e.cclegacy,h=e._decorator,a=e.MeshRenderer,l=e.Component}],execute:function(){var c,p,u,d,f;i._RF.push({},"0bf32ApFU5Mu6jx9+9tx9KG","meshHandle",void 0);var M=h.ccclass,y=h.property;e("MeshHandle",(c=M("MeshHandle"),p=y({serializable:!0}),c((f=t((d=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,r(t,"_showMesh",f,s(t)),t}n(t,e);var i=t.prototype;return i.start=function(){"undefined"!=typeof Editor&&this.handleMesh()},i.handleMesh=function(e){void 0===e&&(e=null);var t=(e=e||this.node).getComponent(a);t&&(t.enabled=this._showMesh);for(var n=e.children,r=0,s=n.length;r<s;r++)this.handleMesh(n[r])},o(t,[{key:"showMesh",get:function(){return this._showMesh},set:function(e){this._showMesh=e,this.handleMesh()}}]),t}(l)).prototype,"_showMesh",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(d.prototype,"showMesh",[y],Object.getOwnPropertyDescriptor(d.prototype,"showMesh"),d.prototype),u=d))||u));i._RF.pop()}}}));

System.register("chunks:///_virtual/message_item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./clientEvent.ts","./constant.ts"],(function(e){var t,i,n,a,o,s,r,l,c,u,h,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,r=e.Node,l=e.UITransform,c=e.Label,u=e.Component},function(e){h=e.GobeUtil},function(e){m=e.ClientEvent},function(e){g=e.Constant}],execute:function(){var d,p,T,f,v,y,b,I,x,w,G,z,B;o._RF.push({},"0a4baNgkbVIv6eDZoYzABKa","message_item",void 0);var U=s.ccclass,F=s.property;e("MessageItem",(d=U("MessageItem"),p=F(r),T=F(r),f=F(l),v=F(r),y=F(c),d((x=t((I=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"headBoy",x,a(t)),n(t,"headGirl",w,a(t)),n(t,"messageUITF",G,a(t)),n(t,"msgTxtNode",z,a(t)),n(t,"nameTxt",B,a(t)),t.msgTxtUITF=null,t.msgTxt=null,t}return i(t,e),t.prototype.show=function(e){var t=this;null==this.msgTxtUITF&&(this.msgTxtUITF=this.msgTxtNode.getComponent(l)),null==this.msgTxt&&(this.msgTxt=this.msgTxtNode.getComponent(c)),this.nameTxt.string=e.sendId,e.isOwn?null==h.instance.room?(this.headBoy.active=!1,this.headGirl.active=!0):h.instance.checkIsRoomOwner(h.instance.ownPlayerId)?(this.headBoy.active=!0,this.headGirl.active=!1):(this.headBoy.active=!1,this.headGirl.active=!0):null==h.instance.room?(this.headBoy.active=!0,this.headGirl.active=!1):h.instance.checkIsRoomOwner(h.instance.ownPlayerId)?(this.headBoy.active=!1,this.headGirl.active=!0):(this.headBoy.active=!0,this.headGirl.active=!1),this.msgTxt.string=e.content,setTimeout((function(){var e=t.msgTxtUITF.contentSize.height;t.messageUITF.setContentSize(291,e+10),e<60&&(e=60),m.dispatchEvent(g.EVENT_NAME.SEND_MSG_HEIGHT,e+50)}),100)},t}(u)).prototype,"headBoy",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(I.prototype,"headGirl",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(I.prototype,"messageUITF",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"msgTxtNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(I.prototype,"nameTxt",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=I))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/message_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./constant.ts","./gobeUtil.ts","./clientEvent.ts","./poolManager.ts","./message_item.ts","./LanguageData.ts"],(function(t){var e,i,n,o,r,s,c,a,u,l,h,p,d,f,g,_,b,N,v,T,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Node,a=t.Prefab,u=t.EditBox,l=t.ProgressBar,h=t.Label,p=t.UITransform,d=t.ScrollView,f=t.Component},function(t){g=t.UIManager},function(t){_=t.Constant},function(t){b=t.GobeUtil},function(t){N=t.ClientEvent},function(t){v=t.PoolManager},function(t){T=t.MessageItem},function(t){S=t.updateSceneRenderers}],execute:function(){var M,m,E,I,w,x,R,y,P,V,z,O,C,D,A,B,L,U,F,G,H,Y,k,J,j,Q,W,Z,q,K,X,$,tt;r._RF.push({},"6c443NZI4JMQakMDFNfJr38","message_panel",void 0);var et=s.ccclass,it=s.property;t("MessagePanel",(M=et("MessagePanel"),m=it(c),E=it(a),I=it(a),w=it(c),x=it(c),R=it(u),y=it(c),P=it(c),V=it(l),z=it(h),O=it(h),C=it(p),D=it(p),A=it(d),B=it(h),M((F=e((U=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"content",F,o(e)),n(e,"leftPrefab",G,o(e)),n(e,"rightPrefab",H,o(e)),n(e,"startNode",Y,o(e)),n(e,"inputNode",k,o(e)),n(e,"editBox",J,o(e)),e._currY=-45,n(e,"voiceInputNode",j,o(e)),n(e,"voiceNode",Q,o(e)),n(e,"bar",W,o(e)),n(e,"barTxt",Z,o(e)),n(e,"inputTxt",q,o(e)),n(e,"inputSpUIF",K,o(e)),n(e,"inputTxtUIF",X,o(e)),n(e,"scrollView",$,o(e)),n(e,"labelTxt",tt,o(e)),e._isMsgShow=!1,e._isRecording=!1,e._isEffectRecording=!1,e._recordTime=0,e}i(e,t);var r=e.prototype;return r.show=function(t){S(),this.startNode.active=!0,this.inputNode.active=!1,this.voiceInputNode.active=!1,this.voiceNode.active=!1,null==b.instance.room||b.instance.room.players.length<2?this.labelTxt.string=_.ROOM_TIPS.WORLD_LABEL:this.labelTxt.string=_.ROOM_TIPS.ROOM_LABEL+b.instance.room.roomCode,t&&(this._clearItem(),this._currY=-45),this._onSendMsg()},r.onEnable=function(){N.on(_.EVENT_NAME.SEND_MSG,this._onSendMsg,this),N.on(_.EVENT_NAME.SEND_MSG_HEIGHT,this._onSendMsgHeight,this),N.on(_.EVENT_NAME.SEND_VT,this._onSendVT,this)},r.onDisable=function(){N.off(_.EVENT_NAME.SEND_MSG,this._onSendMsg,this),N.off(_.EVENT_NAME.SEND_MSG_HEIGHT,this._onSendMsgHeight,this),N.off(_.EVENT_NAME.SEND_VT,this._onSendVT,this)},r.onControlIM=function(){this.startNode.active=!0,this.inputNode.active=!1,this.voiceInputNode.active=!1,this.editBox.string=""},r.onStartIM=function(){this.startNode.active=!1,this.inputNode.active=!0},r.onClickInput=function(){""!=this.editBox.string?(b.instance.sendTextMsg(this.editBox.string),this.editBox.string="",this.voiceNode.active=!1,this.voiceInputNode.active=!1,this.inputNode.active=!1,this.startNode.active=!0):g.instance.showTips(_.ROOM_TIPS.INPUT_MSG)},r.onClickVInput=function(){""!=this.inputTxt.string?(b.instance.sendTextMsg(this.inputTxt.string),this.inputTxt.string="",this.voiceNode.active=!1,this.voiceInputNode.active=!1,this.inputNode.active=!1,this.startNode.active=!0):g.instance.showTips(_.ROOM_TIPS.INPUT_MSG)},r._onSendMsg=function(){if(!this._isMsgShow&&b.instance.msgLst.length>0){this._isMsgShow=!0;var t,e=b.instance.msgLst[0];if(e.isOwn)(t=v.instance.getNode(this.rightPrefab,this.content)).setPosition(45,this._currY,0),t.getComponent(T).show(e);else(t=v.instance.getNode(this.leftPrefab,this.content)).setPosition(45,this._currY,0),t.getComponent(T).show(e);b.instance.msgLst.splice(0,1)}},r._onSendMsgHeight=function(t){var e;this._isMsgShow=!1,this._currY-=t-10,null==(e=this.content.getComponent(p))||e.setContentSize(424,-1*this._currY),this._currY<-570&&this.scrollView.scrollToBottom(),this._onSendMsg()},r.update=function(t){this._isRecording&&(this._recordTime+=t,this.bar.progress=.2*this._recordTime,this.barTxt.string=this._recordTime.toFixed(2)+"s",this._recordTime>=5&&this.onStopVoice())},r._onSendVT=function(t){var e=this;if(""==t)return g.instance.showTips(_.ROOM_TIPS.VT_ERROR),this.voiceNode.active=!1,this.voiceInputNode.active=!1,this.inputNode.active=!1,this.startNode.active=!0,void(this._isEffectRecording=!1);this._isEffectRecording&&(this.voiceNode.active=!1,this.voiceInputNode.active=!0,this.inputTxt.string=t,setTimeout((function(){e.inputSpUIF.setContentSize(314,e.inputTxtUIF.contentSize.height+7)}))),this._isEffectRecording=!1},r.onClickStartVoice=function(){this.voiceNode.active=!0,this.startNode.active=!1,b.instance.startRecordAudioToText(),this._isRecording=!0,this._isEffectRecording=!0,this._recordTime=0},r.onCancelVoice=function(){b.instance.stopRecordAudioToText(),this.voiceNode.active=!1,this.voiceInputNode.active=!1,this.startNode.active=!0,this._isRecording=!1,this._isEffectRecording=!1},r.onStopVoice=function(){b.instance.stopRecordAudioToText(),this._isRecording=!1},r._clearItem=function(){for(var t=this.content.children.length-1;t>-1;t--)v.instance.putNode(this.content.children[t])},e}(f)).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(U.prototype,"leftPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(U.prototype,"rightPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(U.prototype,"startNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(U.prototype,"inputNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(U.prototype,"editBox",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(U.prototype,"voiceInputNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(U.prototype,"voiceNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(U.prototype,"bar",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(U.prototype,"barTxt",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(U.prototype,"inputTxt",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(U.prototype,"inputSpUIF",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(U.prototype,"inputTxtUIF",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(U.prototype,"scrollView",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(U.prototype,"labelTxt",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=U))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./storageManager.ts"],(function(t){var e,n,s,i,a,o,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){s=t.cclegacy,i=t._decorator,a=t.Component},function(t){o=t.Constant},function(t){r=t.StorageManager}],execute:function(){var c,h;s._RF.push({},"e5927B2lO9C6o5eLg2NmcKB","playerData",void 0);var u=i.ccclass;i.property,t("PlayerData",u("PlayerData")(((h=function(t){function s(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this).serverTime=0,e.localTime=0,e._userId="",e._playerInfo=null,e._history=null,e._settings=null,e._isNewBee=!1,e._dataVersion="",e.isInit=!1,e._easyTouchInfo={},e}e(s,t);var i=s.prototype;return i.loadGlobalCache=function(){var t=r.instance.getUserId();t&&(this._userId=t)},i.loadFromCache=function(){this.loadGlobalCache(),this.userId||this.generateRandomAccount(),this._playerInfo=this._loadDataByKey(o.LOCAL_CACHE.PLAYER),this._history=this._loadDataByKey(o.LOCAL_CACHE.HISTORY),this._settings=this._loadDataByKey(o.LOCAL_CACHE.SETTINGS)},i._loadDataByKey=function(t){var e={},n=r.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(t){e={}}return e},i.createPlayerInfo=function(t){if(this._playerInfo={},t)for(var e in t)this._playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},i.generateRandomAccount=function(){this.userId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),r.instance.setUserId(this._userId)},i.saveAccount=function(t){this._userId=t,r.instance.setUserId(t)},i.savePlayerInfoToLocalCache=function(){r.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},i.saveSettingsToLocalCache=function(){r.instance.setConfigData(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),r.instance.save()},i.saveAll=function(){r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo)),r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.HISTORY,JSON.stringify(this._history)),r.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),r.instance.setConfigData(o.LOCAL_CACHE.DATA_VERSION,this._dataVersion)},i.updatePlayerInfo=function(t,e){this._playerInfo[t]=e,r.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},i.getSetting=function(t){return this._settings&&this._settings.hasOwnProperty(t)?this._settings[t]:null},i.setSetting=function(t,e){this._settings||(this._settings={}),this._settings[t]=e,this.saveSettingsToLocalCache()},i.clear=function(){this._playerInfo={},this._settings={},this.saveAll()},i.updateEasyTouchInfo=function(t,e){this._easyTouchInfo[t]=e},i.getEasyTouchInfo=function(t){return this._easyTouchInfo.hasOwnProperty(t)||(this._easyTouchInfo[t]=0),this._easyTouchInfo[t]},n(s,[{key:"userId",get:function(){return this._userId},set:function(t){this._userId=t}},{key:"settings",get:function(){return this._settings},set:function(t){this._settings=t}},{key:"playerInfo",get:function(){return this._playerInfo}},{key:"history",get:function(){return this._history}},{key:"isNewBee",get:function(){return this._isNewBee},set:function(t){this._isNewBee=t}}],[{key:"instance",get:function(){return this._instance||(this._instance=new s),this._instance}}]),s}(a))._instance=void 0,c=h))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/playerLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./virtualPlayer.ts","./constant.ts","./poolManager.ts","./collider_manager.ts"],(function(t){var e,r,a,i,n,o,l,c,s,u,p,d,y,f,h,P,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,l=t.Vec3,c=t.Prefab,s=t.Node,u=t.ModelComponent,p=t.geometry,d=t.math,y=t.Component},function(t){f=t.VirtualPlayer},function(t){h=t.Constant},function(t){P=t.PoolManager},function(t){v=t.ColliderManager}],execute:function(){var _,g,b,S,m,A,w;n._RF.push({},"2176apmEQ1HSa37kyBFOpny","playerLogic",void 0);var O=o.ccclass,V=o.property,C=new l,N=new l;t("PlayerLogic",(_=O("PlayerLogic"),g=V(c),b=V(s),_((A=e((m=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,a(e,"virtualPlayerPrefab",A,i(e)),a(e,"obstacleGroupNode",w,i(e)),e._dicPlayers={},e._dicScriptVirtualPlayers={},e._parent=null,e}r(e,t);var n=e.prototype;return n.init=function(t){this._parent=t},n.start=function(){v.instance.buildCollider(this.obstacleGroupNode)},n.reset=function(){var t=this;Object.keys(this._dicPlayers).forEach((function(e){P.instance.putNode(t._dicPlayers[parseInt(e)]),delete t._dicPlayers[parseInt(e)]}))},n.initPlayer=function(){for(var t=[],e=0;e<h.MAX_PLAYER;e++){var r={},a=new l(-50,0,0),i=new l(0,90,0);switch(e){case 0:break;case 1:a.set(50,0,0),i.set(0,-90,0)}r.id=e,r.position=a,r.eulerAngles=i,r.score=0,r.hammerCount=0,r.moveX=0,r.moveY=0,r.isShowReward=!1,r.isScoreLead=!1,t[e]=r;var n=P.instance.getNode(this.virtualPlayerPrefab,this.node);n.setPosition(a),n.eulerAngles=i,this._dicPlayers[e]=n;var o=n.getComponent(f);o.init(a),this._dicScriptVirtualPlayers[e]=o}return t},n.updatePlayerNode=function(t){var e=this;t.forEach((function(t,r){var a=e._dicPlayers[r];t.channel?a.active=!0:a.active=!1}))},n.stopMove=function(t,e,r,a){this._dicScriptVirtualPlayers[t.id].playAction({action:h.ACTION.STOP_MOVE,posX:e,posZ:r,angleY:a})},n.stopMoveAndAttack=function(t,e,r,a){this._dicScriptVirtualPlayers[t.id].playAction({action:h.ACTION.IS_ATTACK_ED,posX:e,posZ:r,angleY:a})},n.move=function(t,e,r,a){this._dicScriptVirtualPlayers[t].playAction({action:h.ACTION.MOVE,posX:e,posZ:r,angleY:a})},n.updateStateRecovery=function(){for(var t in this._dicScriptVirtualPlayers){if(Object.prototype.hasOwnProperty.call(this._dicScriptVirtualPlayers,t))this._dicScriptVirtualPlayers[t].playActionRecovery()}},n.updateState=function(){for(var t in this._dicScriptVirtualPlayers){if(Object.prototype.hasOwnProperty.call(this._dicScriptVirtualPlayers,t))this._dicScriptVirtualPlayers[t].updateState(this._parent.currentGameState.players[t],this._parent)}},n.intersectWithObstacle=function(t,e,r,a){for(var i=this.obstacleGroupNode.getComponentsInChildren(u),n=0;n<i.length;n++)if(i[n].node.active){var o=i[n],c=new p.OBB,s=new p.OBB;if(c.halfExtents=l.multiplyScalar(C,r,.5*a.x),s.halfExtents=l.multiplyScalar(N,o.node.scale,.5*o.node.parent.scale.x),c.translateAndRotate(t,e,c),s.translateAndRotate(o.node.worldMatrix,o.node.worldRotation,s),p.intersect.obbWithOBB(c,s))return!0}return!1},n.getPlayerByIndex=function(t){return this._dicPlayers[t]},n.getNearestEnemy=function(t,e){var r=d.bits.INT_MAX,a=null,i=this._parent.currentGameState.players;for(var n in i){var o=i[n];if(o.channel&&o.channel.openId!==t){var c=l.squaredDistance(o.position,e);c<r&&(r=c,a=o)}}return a},e}(y)).prototype,"virtualPlayerPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(m.prototype,"obstacleGroupNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=m))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,e,i,a;return{setters:[function(t){o=t.createClass},function(t){n=t.cclegacy,e=t._decorator,i=t.instantiate,a=t.NodePool}],execute:function(){var r,c;n._RF.push({},"e4ab6T5/1VCqK/Vn+UcADNM","poolManager",void 0);var s=e.ccclass;e.property,t("PoolManager",s("PoolManager")(((c=function(){function t(){this._dictPool={},this._dictPrefab={}}var n=t.prototype;return n.getNode=function(t,o){var n=t.name;t.position||(n=t.data.name),this._dictPrefab[n]=t;var e=null;if(this._dictPool.hasOwnProperty(n)){var r=this._dictPool[n];e=r.size()>0?r.get():i(t)}else{var c=new a;this._dictPool[n]=c,e=i(t)}return e.parent=o,e.active=!0,e},n.putNode=function(t){if(t){var o=t.name,n=null;this._dictPool.hasOwnProperty(o)?n=this._dictPool[o]:(n=new a,this._dictPool[o]=n),n.put(t)}},n.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},n.prePool=function(t,o){var n=t.name,e=new a;this._dictPool[n]=e;for(var r=0;r<o;r++){var c=i(t);e.put(c)}},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,r=c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/propBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,r,s,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,r=e.Tween,s=e.Vec3,i=e.Component}],execute:function(){var l;t._RF.push({},"93380fTAhxF9pqyIPHa1YqD","propBase",void 0);var a=o.ccclass;o.property,e("PropBase",a("PropBase")(l=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this)._tween=null,n._dropTween=null,n._propInfo=null,n._isDisappearEffShowing=!1,n._parentName="",n._prop=null,n._disappearCb=null,n._targetEuler=new s(0,-360,0),n._oriEuler=new s,n}n(t,e);var o=t.prototype;return o.onDisable=function(){this.unscheduleAllCallbacks()},o.show=function(e){var n,t=this;this.node.eulerAngles=this._oriEuler,this._tween&&(this._tween.stop(),this._tween=null),this._tween=new r(this.node).to(3*e.scale,{eulerAngles:this._targetEuler}).call((function(){t.node.eulerAngles=t._oriEuler})).union().repeatForever().start(),this._propInfo=e,this._parentName=null==(n=this.node.parent)?void 0:n.name,this._isDisappearEffShowing=!1},o.drop=function(e){var n=this,t=this.node.position.clone().subtract(e).length();this._dropTween=new r(this.node).to(t/10,{position:e}).call((function(){n._dropTween=null,n.node.setPosition(e)})).start()},o.updateState=function(e,n){this._prop=n},t}(i))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/propLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./gameState.ts","./util.ts","./constant.ts","./gobeUtil.ts","./quad_tree.ts","./collider_manager.ts"],(function(e){var t,r,n,i,o,a,s,p,d,c,h,l,P,u,f,m,v,x,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Vec3,p=e.Prefab,d=e.ModelComponent,c=e.geometry,h=e.clamp,l=e.Component},function(e){P=e.PoolManager},function(e){u=e.PropType},function(e){f=e.Util},function(e){m=e.Constant},function(e){v=e.GobeUtil},function(e){x=e.QuadCircleNode},function(e){I=e.ColliderManager}],execute:function(){var g,M,_,C,A,y,w;o._RF.push({},"1e563P/T2tP+Ivr4OJZMArO","propLogic",void 0);var N=a.ccclass,O=a.property,b=function(e){function t(t,r){var n;return(n=e.call(this,t)||this).id=-1,n.id=r,n}return r(t,e),t}(x),H=new s,R=new s;new s,e("PropLogic",(g=N("PropLogic"),M=O(p),_=O(p),g((y=t((A=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"virtualCoinPrefab",y,i(t)),n(t,"virtualHammerPrefab",w,i(t)),t.indexProp=0,t._dicProps={},t._parent=null,t._propItemMap=new Map,t}r(t,e);var o=t.prototype;return o.init=function(e){this._parent=e,I.instance.bindItemCollider(this.onPorpItemCollider.bind(this))},o.reset=function(){var e=this;Object.keys(this._dicProps).forEach((function(t){P.instance.putNode(e._dicProps[parseInt(t)]),I.instance.removeItem(e._propItemMap.get(parseInt(t))),delete e._dicProps[parseInt(t)]}))},o.initProps=function(){var e=[];this.indexProp=0;for(var t=0;t<36;t++){var r=Math.floor(t/6),n=Math.floor(t%6);r>=2&&r<=3&&n>=2&&n<=3||(e[this.indexProp]=this.generateProp(new s(3.5*n-9,1,6-3*r)),this.indexProp++)}for(var i=0;i<7;i++)e[this.indexProp]=this.generateProp(new s(6*i-18,1,-16)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(6*i-18,1,14)),this.indexProp++;for(var o=0;o<12;o++)e[this.indexProp]=this.generateProp(new s(5*o-29,1,-24)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(5*o-29,1,22.5)),this.indexProp++;for(var a=0;a<4;a++)e[this.indexProp]=this.generateProp(new s(-18,1,6*a-10)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(18,1,6*a-10)),this.indexProp++;for(var p=0;p<5;p++)e[this.indexProp]=this.generateProp(new s(-29,1,5*p-10)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(29,1,5*p-10)),this.indexProp++;for(var d=0;d<9;d++)e[this.indexProp]=this.generateProp(new s(-36,1,5*d-21)),this.indexProp++,e[this.indexProp]=this.generateProp(new s(36,1,5*d-21)),this.indexProp++;return e},o.removeOverProp=function(e){for(var t=Object.keys(this._dicProps),r=e;r<t.length;r++)this._dicProps[r]&&(P.instance.putNode(this._dicProps[r]),I.instance.removeItem(this._propItemMap.get(r)),delete this._dicProps[r])},o.removePropId=function(e){var t=this._parent.currentGameState.props[e];return!(!t||(t.exist=!1,!this._dicProps[t.id]))&&(P.instance.putNode(this._dicProps[t.id]),I.instance.removeItem(this._propItemMap.get(t.id)),delete this._dicProps[t.id],!0)},o.removeProp=function(e){P.instance.putNode(this._dicProps[e.id]),I.instance.removeItem(this._propItemMap.get(e.id)),delete this._dicProps[e.id],e.exist=!1},o.generateProp=function(e,t,r,n,i){void 0===t&&(t=1),void 0===r&&(r=u.COIN);var o={};o.id=this.indexProp,o.position=e,o.scale=t,o.exist=!0,o.type=r,this._dicProps[this.indexProp]=this._generatePropNode(o);var a=new b(this._dicProps[this.indexProp],this.indexProp);return this._propItemMap.set(this.indexProp,a),I.instance.insertItem(a),o},o._generatePropNode=function(e){var t=this.virtualCoinPrefab;e.type===u.HAMMER&&(t=this.virtualHammerPrefab);var r=P.instance.getNode(t,this.node);return r.setWorldPosition(e.position),r},o.onPorpItemCollider=function(e,t,r){var n=this._parent.currentGameState.props[e.id],i=r.channel.openId!=v.instance.ownPlayerId;if(!(n.type===u.HAMMER&&0!==r.hammerCount||n.removed))if(n.type===u.HAMMER)n.removed=!0,i?v.instance.sendFrame({A:m.ACTION.HAMMER,V:n.id,AI:1}):v.instance.sendFrame({A:m.ACTION.HAMMER,V:n.id});else if(n.type===u.COIN){if(!this._dicProps[n.id])return;n.removed=!0,i?v.instance.sendFrame({A:m.ACTION.ICON,V:n.id,AI:1}):v.instance.sendFrame({A:m.ACTION.ICON,V:n.id})}},o.handleProp=function(e,t,r){var n=this,i=this._parent.currentGameState.props,o=Object.keys(this._dicProps),a=t.getComponentInChildren(d);o.forEach((function(o){var p=i[parseInt(o)];if(!(p.type===u.HAMMER&&e.hammerCount||p.removed)){var h=n._dicProps[parseInt(o)];if(!(f.getTwoNodeXZLength(h,t)>=5)){var l=h.getComponentInChildren(d),P=new c.OBB,x=new c.OBB;if(P.halfExtents=s.multiplyScalar(H,a.node.scale,.5*a.node.parent.scale.x),x.halfExtents=s.multiplyScalar(R,l.node.scale,.5*l.node.parent.scale.x),P.translateAndRotate(a.node.worldMatrix,a.node.worldRotation,P),x.translateAndRotate(l.node.worldMatrix,l.node.worldRotation,x),c.intersect.obbWithOBB(P,x)){if(p.type===u.HAMMER&&0!==e.hammerCount)return;if(p.type===u.HAMMER)p.removed=!0,r?v.instance.sendFrame({A:m.ACTION.HAMMER,V:p.id,AI:1}):v.instance.sendFrame({A:m.ACTION.HAMMER,V:p.id});else if(p.type===u.COIN){if(!n._dicProps[p.id])return;p.removed=!0,r?v.instance.sendFrame({A:m.ACTION.ICON,V:p.id,AI:1}):v.instance.sendFrame({A:m.ACTION.ICON,V:p.id})}}}}}))},o.randomDropPos=function(e,t,r){void 0===r&&(r=6);var n,i=new s,o=0;t===u.COIN?n=this.virtualCoinPrefab.data:t===u.HAMMER&&(n=this.virtualHammerPrefab.data);do{var a=r+o/10,p=r+o/10,d=-a+Math.random()*a*2,c=-p+Math.random()*p*2;if(d+=e.x,c+=e.z,d=h(d,-28,28),c=h(c,-24,24),i.set(d,1,c),++o>=50){console.log("randomDropPos,posNew",i,"posWorld",e,"propType",t,"radius",r),i=null;break}}while(!this._canPlaced(i,n));return i},o._canPlaced=function(e,t){var r={x:e.x,y:e.z,radius:t.worldScale.x/2};return I.instance.checkRectIsEmpty(r)},o.getCoinNum=function(e){return e.filter((function(e){return e.type===u.COIN&&e.exist})).length},o.getHammerNum=function(e){return e.filter((function(e){return e.type===u.HAMMER&&e.exist})).length},o.createCoinByHammer=function(e,t,r){void 0===r&&(r=6);for(var n=[],i=0;i<e;i++){var o=this.randomDropPos(t,u.COIN,r);o&&n.push([o.x,o.y,o.z])}v.instance.createCoin(n)},o.createCoinServer=function(e){for(var t=0;t<e.length;t++){var r=this.generateProp(new s(e[t][0],e[t][1],e[t][2]));this._parent.currentGameState.props[this.indexProp]=r,r.dropPosition=new s(e[t][0],e[t][1],e[t][2]),this._dicProps[this.indexProp].setWorldPosition(r.dropPosition),this.indexProp++}},t}(l)).prototype,"virtualCoinPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(A.prototype,"virtualHammerPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=A))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/quad_tree.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,h;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e.Vec3,h=e.MeshRenderer}],execute:function(){i._RF.push({},"0ce43/2LzdAsZ8q983jZVHP","quad_tree",void 0);var r=new n,o=new n,s=e("QuadNode",(function(e){this.type=0,this.node=null,this.x=0,this.y=0,this.width=0,this.height=0,this.node=e})),d=e("QuadRectNode",function(e){function i(t){var i;if(i=e.call(this,t)||this,t.getWorldPosition(r),t.getWorldScale(o),90==t.eulerAngles.y){var n=o.x;o.x=o.z,o.z=n}return i.x=r.x,i.y=r.z,i.width=o.x,i.height=o.z,i}return t(i,e),i}(s));e("QuadCircleNode",function(e){function i(t){var i;return(i=e.call(this,t)||this).type=1,t.getWorldPosition(r),i.x=r.x,i.y=r.z,i.width=t.worldScale.x/2,i.height=t.worldScale.x/2,i}return t(i,e),i}(s)),e("Quadtree",function(){function e(e,t){void 0===t&&(t=0),this.bounds=void 0,this.children=[],this.objects=[],this.level=0,this.bounds=e,this.level=t}var t=e.prototype;return t.buildRectNode=function(e){var t=this;e.getComponentsInChildren(h).forEach((function(e){if(e.node.active){var i=new d(e.node);t.insert(i,t)}}))},t.splitQuadBox=function(t){var i=t.level+1,n=t.bounds.width/2,h=t.bounds.height/2,r=t.bounds.x,o=t.bounds.y;t.children[0]=new e({x:r+n/2,y:o-h/2,width:n,height:h},i),t.children[1]=new e({x:r-n/2,y:o-h/2,width:n,height:h},i),t.children[2]=new e({x:r-n/2,y:o+h/2,width:n,height:h},i),t.children[3]=new e({x:r+n/2,y:o+h/2,width:n,height:h},i)},t.retrieve=function(e,t){void 0===t&&(t=this);var i=this.getIndex(e,t),n=t.objects;if(t.children.length)for(var h=0;h<i.length;h++)n=n.concat(t.children[i[h]].retrieve(e));return n=n.filter((function(e,t){return n.indexOf(e)>=t}))},t.insert=function(e,t){void 0===t&&(t=this);var i,n=0;if(t.children.length)for(i=this.getIndex(e,t),n=0;n<i.length;n++)this.insert(e,t.children[i[n]]);else if(t.objects.push(e),t.objects.length>10&&t.level<8){for(t.children.length||this.splitQuadBox(t),n=0;n<t.objects.length;n++){i=this.getIndex(t.objects[n],t);for(var h=0;h<i.length;h++)this.insert(t.objects[n],t.children[i[h]])}t.objects=[]}},t.remove=function(e,t){var i=this;void 0===t&&(t=this);var n=t.objects.indexOf(e);-1!=n&&t.objects.splice(n,1),t.children.forEach((function(t){i.remove(e,t)}))},t.clear=function(e){void 0===e&&(e=this),e.objects=[];for(var t=0;t<e.children.length;t++)e.children.length&&this.clear(e.children[t]);e.children=[]},t.getIndex=function(e,t){void 0===t&&(t=this);var i=[],n=t.bounds.x,h=t.bounds.y,r=e.y-e.height/2<h,o=e.x-e.width/2<n,s=e.x+e.width/2>n,d=e.y+e.height/2>h;return r&&s&&i.push(0),o&&r&&i.push(1),o&&d&&i.push(2),s&&d&&i.push(3),i},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ready.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./clientEvent.ts","./constant.ts","./poolManager.ts","./effectManager.ts","./LanguageData.ts","./uiManager.ts"],(function(e){var i,t,n,a,o,r,l,s,c,u,h,y,f,p,E,_,d,N,b,m,g,P;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,l=e.AnimationComponent,s=e.Node,c=e.LabelComponent,u=e.SpriteComponent,h=e.SpriteFrame,y=e.Label,f=e.Animation,p=e.Component},function(e){E=e.GobeUtil,_=e.WIFI_TYPE},function(e){d=e.ClientEvent},function(e){N=e.Constant},function(e){b=e.PoolManager},function(e){m=e.EffectManager},function(e){g=e._language},function(e){P=e.UIManager}],execute:function(){var A,v,w,O,R,M,S,I,L,T,C,D,F,z,H,G,Y,k,B,J,V,x,U,W,j,q,K,Q,X;o._RF.push({},"20039gcGzFNu5iBC0qjuHn8","ready",void 0);var Z=r.ccclass,$=r.property;e("Ready",(A=Z("Ready"),v=$(l),w=$([s]),O=$([s]),R=$([c]),M=$([u]),S=$([h]),I=$(s),L=$(s),T=$(s),C=$(y),D=$(f),F=$(s),z=$(s),A((Y=i((G=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return i=e.call.apply(e,[this].concat(o))||this,n(i,"animation",Y,a(i)),n(i,"aryPlayerWait",k,a(i)),n(i,"aryPlayer",B,a(i)),n(i,"aryPlayerName",J,a(i)),n(i,"aryPlayerHead",V,a(i)),n(i,"aryHead",x,a(i)),n(i,"leftNode",U,a(i)),n(i,"rightNode",W,a(i)),n(i,"btnClose",j,a(i)),n(i,"txtNum",q,a(i)),n(i,"vsAni",K,a(i)),n(i,"girlNode",Q,a(i)),n(i,"boyNode",X,a(i)),i._vsNode=null,i._isShowAni=!1,i._isFightOpen=!1,i}t(i,e);var o=i.prototype;return o.onEnable=function(){b.instance.putNode(this._vsNode),d.on(N.EVENT_NAME.ON_OTHER_JOIN_ROOM,this._onOtherJoinRoom,this)},o.onDisable=function(){this._cleanModel(),d.off(N.EVENT_NAME.ON_OTHER_JOIN_ROOM,this._onOtherJoinRoom,this)},o.show=function(e){var i=this;void 0===e&&(e=!1),this._isFightOpen=e,this._isShowAni=!1,g===N.I18_LANGUAGE.CHINESE?this.txtNum.string="房间号："+E.instance.room.roomCode:this.txtNum.string="room id："+E.instance.room.roomCode;for(var t=this.aryPlayerHead.length,n=0;n<t;n++)this._showPlayerReady(n,!1);this.animation.play(),this.animation.once(f.EventType.FINISHED,(function(){i._isShowAni=!0,i._updatePlayerShow(),i._checkStart()})),this.vsAni.node.active=!1,E.instance.wifiType==_.STAND_ALONE&&(this.btnClose.active=!1),d.dispatchEvent(N.EVENT_NAME.CLOSE_MESSAGE)},o.onClose=function(){var e=this;P.instance.showDialog(N.PANEL_NAME.TIP_PANEL,[N.ROOM_TIPS.LEAVE_ROOM_MSG,function(){E.instance.leaveRoom((function(){P.instance.hideDialog(N.PANEL_NAME.READY),P.instance.showTips(N.ROOM_TIPS.LEAVE_ROOM_SUCCESS),e._isFightOpen&&P.instance.showTransition(N.SCENE_NAME.SLECT)}),(function(){P.instance.showTips(N.ROOM_TIPS.LEAVE_ROOM_ERROR)}),!1)}])},o._updatePlayerShow=function(e){for(var i=E.instance.roomPlayers,t=0;t<i.length;t++){var n=i[t];if(e&&""!=e){if(n.playerId==e){var a=0;E.instance.checkIsRoomOwner(n.playerId)||(a=1),this._showPlayerReady(a,!0,n.customPlayerProperties),this._showModel(a)}}else{var o=0;E.instance.checkIsRoomOwner(n.playerId)||(o=1),this._showPlayerReady(o,!0,n.customPlayerProperties),this._showModel(o)}}},o._onOtherJoinRoom=function(e){this._updatePlayerShow(e),this._checkStart()},o._showPlayerReady=function(e,i,t){void 0===t&&(t=""),this.aryPlayerHead[e].node.parent.active=i,this.aryPlayerName[e].node.active=i,this.aryPlayer[e].active=i,this.aryPlayerWait[e].active=!i,""!=t&&(this.aryPlayerName[e].string=t)},o._showModel=function(e){N.READY_PREFAB.BOY_MODEL;var i=this.leftNode;1===e&&(i=this.rightNode,N.READY_PREFAB.GIRL_MODEL),m.instance.playEffect(i,N.READY_PREFAB.JOIN_EFFECT,!0,!0),1===e?this.girlNode.active=!0:this.boyNode.active=!0},o._cleanModel=function(){this.girlNode.active=!1,this.girlNode.active=!1},o._checkStart=function(){this._isShowAni&&(E.instance.roomPlayers.length>=N.MIN_PLAYER&&(P.instance.hideDialog(N.PANEL_NAME.TIP_PANEL),P.instance.hideDialog(N.PANEL_NAME.MEDIA_PANEL),E.instance.mediaLeaveRoom(),E.instance.leaveChannel(),this.animation.off(f.EventType.FINISHED),this.vsAni.node.active=!0,this.vsAni.play(),this.vsAni.once(l.EventType.FINISHED,(function(){P.instance.showTransition(N.SCENE_NAME.FIGHT)}))))},i}(p)).prototype,"animation",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(G.prototype,"aryPlayerWait",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=i(G.prototype,"aryPlayer",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=i(G.prototype,"aryPlayerName",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=i(G.prototype,"aryPlayerHead",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=i(G.prototype,"aryHead",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=i(G.prototype,"leftNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(G.prototype,"rightNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(G.prototype,"btnClose",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(G.prototype,"txtNum",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(G.prototype,"vsAni",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(G.prototype,"girlNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(G.prototype,"boyNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=G))||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/readyGo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./constant.ts"],(function(n){var t,e,o,i,r,a,c,u,s,l;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.AnimationComponent,u=n.Component},function(n){s=n.AudioManager},function(n){l=n.Constant}],execute:function(){var p,f,y,d,h;r._RF.push({},"041fe3DZYROjYR7QMC4Hp5d","readyGo",void 0);var g=a.ccclass,v=a.property;n("readyGo",(p=g("readyGo"),f=v(c),p((h=t((d=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,o(t,"ani",h,i(t)),t}e(t,n);var r=t.prototype;return r.show=function(n){this.ani.play(),this.ani.once(c.EventType.FINISHED,(function(){n&&n()}))},r.tick=function(){s.instance.playSound(l.AUDIO_NAME.TICK)},r.go=function(){s.instance.playSound(l.AUDIO_NAME.GO)},t}(u)).prototype,"ani",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){var n,t,o,r,i,a,s,f,l,u,c;return{setters:[function(e){n=e.cclegacy,t=e._decorator,o=e.resources,r=e.error,i=e.Prefab,a=e.SpriteFrame,s=e.Texture2D,f=e.assetManager,l=e.instantiate,u=e.find,c=e.isValid}],execute:function(){var d;n._RF.push({},"7844e1bOwZK+7JMYjENQU5v","resourceUtil",void 0);var m=t.ccclass;e("ResourceUtil",m("ResourceUtil")(d=function(){function e(){}return e.loadRes=function(e,n,t){void 0===t&&(t=function(){}),o.load(e,(function(e,n){if(e)return r(e.message||e),void t(e,n);t&&t(null,n)}))},e.loadResType=function(e,n){return new Promise((function(t,i){o.load(e,n,(function(e,n){if(e)return r(e.message||e),void(i&&i(e));t&&t(n)}))}))},e.loadEffectRes=function(e){var n=this;return new Promise((function(t,o){n.loadRes("prefab/effect/"+e,i,(function(n,r){if(n)return console.error("effect load failed",e),void(o&&o());t&&t(r)}))}))},e.loadModelRes=function(e){var n=this;return new Promise((function(t,o){n.loadRes("prefab/model/"+e,i,(function(n,r){if(n)return console.error("model load failed",e),void(o&&o());t&&t(r)}))}))},e.loadModelResArr=function(e,n,t,r){var a=n.map((function(n){return e+"/"+n}));o.load(a,i,t,r)},e.loadSpriteFrameRes=function(e){var n=this;return new Promise((function(t,o){n.loadRes(e,a,(function(n,r){if(n)return console.error("spriteFrame load failed!",e,n),void(o&&o());var i=new s;i.image=r;var f=new a;f.texture=i,t&&t(f)}))}))},e.loadSpriteFrameURL=function(e,n){f.loadRemote(e,(function(t,o){if(t)console.error("spriteFrame load failed!",e,t);else{var r=new s;r.image=o;var i=new a;i.texture=r,n.spriteFrame=i}}))},e.getMap=function(e,n){var t="map";t+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+t,null,(function(e,t){if(e)n(e,t);else{var o="";if(t._file){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(t._file));var r=JSON.parse(o);n(null,r)}else if(t.text){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(t.text));r=JSON.parse(o);n(null,r)}else t.json?n(null,t.json):n("failed")}}))},e.getMapObj=function(e,n,t,r){for(var a=[],s=0;s<n.length;s++)a.push("map/"+e+"/"+n[s]);o.load(a,i,t,r)},e.getUIPrefabRes=function(e,n){this.loadRes("prefab/ui/"+e,i,n)},e.createUI=function(e,n,t){this.getUIPrefabRes(e,(function(e,o){if(!e){var r=l(o);r.setPosition(0,0,0);u(t?"Canvas/ui/tip":"Canvas/ui/dislog").addChild(r),n&&n(null,r)}}))},e.getJsonData=function(e,n){this.loadRes("datas/"+e,null,(function(e,t){e?r(e.message||e):t.json?n(e,t.json):n("failed!!!")}))},e.getTextData=function(e,n){this.loadRes("datas/"+e,null,(function(e,t){if(e)r(e.message||e);else{var o=t.text;n(e,o)}}))},e.setSpriteFrame=function(e,n,t){this.loadRes(e+"/spriteFrame",a,(function(o,r){if(o)return console.error("set sprite frame failed! err:",e,o),void t(o);n&&c(n)&&(n.spriteFrame=r,t(null))}))},e.getEffectPrefab=function(e,n){this.loadRes("prefab/effect/"+e+"/"+e,i,n)},e}())||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/select_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gobeUtil.ts","./uiManager.ts","./constant.ts","./playerData.ts","./clientEvent.ts","./LanguageData.ts","./util.ts"],(function(n){var t,e,i,o,a,s,c,r,l,u,E,f,N,_,h,A;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,s=n._decorator,c=n.Label,r=n.Node,l=n.Component},function(n){u=n.GobeUtil},function(n){E=n.UIManager},function(n){f=n.Constant},function(n){N=n.PlayerData},function(n){_=n.ClientEvent},function(n){h=n.updateSceneRenderers},function(n){A=n.Util}],execute:function(){var p,P,g,m,M,I,R,O,D,b,L,y,T;a._RF.push({},"fc853N0SWpIK5JIef22aU+J","select_panel",void 0);var C=s.ccclass,S=s.property;n("SelectPanel",(p=C("SelectPanel"),P=S(c),g=S(c),m=S(r),M=S(r),I=S(r),p((D=t((O=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return t=n.call.apply(n,[this].concat(a))||this,i(t,"txtName",D,o(t)),i(t,"txtCoin",b,o(t)),i(t,"btnStrategy",L,o(t)),i(t,"btnCommunity",y,o(t)),i(t,"btnShare",T,o(t)),t}e(t,n);var a=t.prototype;return a.show=function(){var n=this;if(h(),""==N.instance.playerInfo.playerName){var t=N.instance.playerInfo.playerName;A.randomName(t).then((function(t){n.txtName.string=t,N.instance.updatePlayerInfo("playerName",t)}))}else this.txtName.string=N.instance.playerInfo.playerName;E.instance.showDialog(f.PANEL_NAME.MEDIA_PANEL,[],(function(){}),!0),N.instance.isInit?(u.instance.joinTeamRoom(f.WORLD_ID),u.instance.joinGroupChannel(f.WORLD_ID)):(N.instance.isInit=!0,u.instance.startMedia(u.instance.openId),u.instance.startForumPage()),this._onOpenPgs()},a.onEnable=function(){_.on(f.EVENT_NAME.INIT_MEDIA,this._onInitMedia,this),_.on(f.EVENT_NAME.INIT_CHANNEL,this._onSendChannel,this),_.on(f.EVENT_NAME.OPEN_PGS,this._onOpenPgs,this)},a.onDisable=function(){_.off(f.EVENT_NAME.INIT_MEDIA,this._onInitMedia,this),_.off(f.EVENT_NAME.INIT_CHANNEL,this._onSendChannel,this),_.off(f.EVENT_NAME.OPEN_PGS,this._onOpenPgs,this),E.instance.hideDialog(f.PANEL_NAME.MEDIA_PANEL)},a._onOpenPgs=function(){this.btnCommunity.active=u.instance.isOpenPgs,this.btnStrategy.active=u.instance.isOpenPgs&&u.instance.isHwLogin,this.btnShare.active=u.instance.isOpenPgs&&u.instance.isHwLogin},a._onInitMedia=function(){u.instance.joinTeamRoom(f.WORLD_ID)},a._onSendChannel=function(){u.instance.joinGroupChannel(f.WORLD_ID)},a.onOpenForumPage=function(){u.instance.openForumPage()},a.onForumPageCheckScene=function(){u.instance.forumPageCheckScene()},a.onForumPagePublish=function(){u.instance.forumPagePublish()},a.onCreateRoomAi=function(){u.instance.createRoomAI((function(){E.instance.showDialog(f.PANEL_NAME.READY)}),(function(){E.instance.showTips(f.ROOM_TIPS.CREATE_ROOM_ERROR)}))},a.onCreateRoom=function(){u.instance.createRoom((function(){E.instance.showDialog(f.PANEL_NAME.READY)}),(function(){E.instance.showTips(f.ROOM_TIPS.CREATE_ROOM_ERROR)}))},a.onJoinRoom=function(){E.instance.showDialog(f.PANEL_NAME.JOIN_ROOM_PANEL,[function(){}])},a.onMatchRoom=function(){E.instance.showDialog(f.PANEL_NAME.MATCH_PANEL),u.instance.matchRoom((function(){E.instance.showDialog(f.PANEL_NAME.READY),E.instance.showTips(f.ROOM_TIPS.JOIN_ROOM_SUCCESS),E.instance.hideDialog(f.PANEL_NAME.MATCH_PANEL)}),(function(){}))},a.onLeaveClient=function(){E.instance.showDialog(f.PANEL_NAME.TIP_PANEL,[f.ROOM_TIPS.LEAVE_GAME,function(){u.instance.leaveGame(),E.instance.hideDialog(f.PANEL_NAME.SELECT_GAME),E.instance.showDialog(f.PANEL_NAME.START_GAME)}])},t}(l)).prototype,"txtName",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(O.prototype,"txtCoin",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(O.prototype,"btnStrategy",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(O.prototype,"btnCommunity",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(O.prototype,"btnShare",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=O))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/select.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./audioManager.ts","./gobeUtil.ts","./uiManager.ts","./constant.ts","./util.ts","./LanguageData.ts"],(function(e){var t,n,a,i,r,o,c,s,u,l,f,p,d,g,y,m,b,h,E,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.Prefab,s=e.game,u=e.input,l=e.Input,f=e.sys,p=e.Component},function(e){d=e.PlayerData},function(e){g=e.AudioManager},function(e){y=e.GobeUtil},function(e){m=e.UIManager},function(e){b=e.Constant},function(e){h=e.Util},function(e){E=e.ready,I=e.init}],execute:function(){var M,S,A,N,_;r._RF.push({},"8b298SqbKtNt6VNWASLCbB4","select",void 0);var v=o.ccclass,L=o.property;e("Select",(M=v("Select"),S=L([c]),M((_=t((N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"backPrefabs",_,i(t)),t}n(t,e);var r=t.prototype;return r._initLanguage=function(e){E||(e||(e=b.I18_LANGUAGE.CHINESE),I(e))},r.onLoad=function(){this._initLanguage()},r.start=function(){if(0==d.instance.isInit){s.frameRate=30,g.instance.init(),d.instance.loadFromCache();var e=d.instance.playerInfo.playerId;if(null==e){e="cocos"+(new Date).getTime().toString().substring(6);var t=Math.floor(2*Math.random());d.instance.createPlayerInfo({playerId:e,playerName:"",score:0,icon:Math.floor(10*Math.random()),staticId:t}),h.randomName(t).then((function(e){d.instance.updatePlayerInfo("playerName",e)}))}u.once(l.EventType.TOUCH_END,(function(){if(f.isBrowser&&document.documentElement){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()}}),this)}""==y.instance.ownPlayerId?m.instance.showDialog(b.PANEL_NAME.START_GAME):m.instance.showDialog(b.PANEL_NAME.SELECT_GAME)},t}(p)).prototype,"backPrefabs",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=N))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/start_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./constant.ts","./gobeUtil.ts","./playerData.ts","./clientEvent.ts","./LanguageData.ts","./util.ts"],(function(n){var t,i,e,a,o,l,s,r,c,u,d,h,g,N,E,p,_,f,b,A,I;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){o=n.cclegacy,l=n._decorator,s=n.Color,r=n.Node,c=n.Animation,u=n.Label,d=n.sp,h=n.Component},function(n){g=n.UIManager},function(n){N=n.Constant},function(n){E=n.GobeUtil},function(n){p=n.PlayerData},function(n){_=n.ClientEvent},function(n){f=n._language,b=n.init,A=n.updateSceneRenderers},function(n){I=n.Util}],execute:function(){var S,L,O,v,G,y,m,C,w,H,R,k,U,T,M,P,z,Z,D,W,F;o._RF.push({},"f6580Lq5TpAaIPe8RrEU5Gp","start_panel",void 0);var V=l.ccclass,j=l.property,q={NONE:new s(255,255,255),CHOOSE:new s(0,0,0)};n("StartPanel",(S=V("StartPanel"),L=j(r),O=j(r),v=j(r),G=j(r),y=j(c),m=j(r),C=j(r),w=j(u),H=j(u),S((U=t((k=function(n){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=n.call.apply(n,[this].concat(o))||this,e(t,"loadingNodeEn",U,a(t)),e(t,"loadingNodeZh",T,a(t)),e(t,"btnNode",M,a(t)),e(t,"btnNodeHw",P,a(t)),e(t,"loadAni",z,a(t)),e(t,"dotNode",Z,a(t)),e(t,"changeLanguageNode",D,a(t)),e(t,"languageZhLabel",W,a(t)),e(t,"languageEnLabel",F,a(t)),t.startSk=null,t._isClick=!1,t}i(t,n);var o=t.prototype;return o.show=function(){var n=this;this._initLanguage(),this.loadAni.node.active=!1,this.loadAni.stop(),this.startSk.setAnimation(0,"start",!1),this.startSk.addAnimation(0,"idle",!0),this.btnNode.active=!1,this.btnNodeHw.active=!1,this.changeLanguageNode.active=!1,setTimeout((function(){n.changeLanguageNode.active=!0,n.btnNode.active=!0,E.instance.isHwInit&&(n.btnNodeHw.active=!0)}),1500),E.instance.isHwInit||E.instance.initHuawei()},o.onEnable=function(){_.on(N.EVENT_NAME.HUAWEI_LOGIN_MSG,this._initSuccess,this)},o.onDisable=function(){_.off(N.EVENT_NAME.HUAWEI_LOGIN_MSG,this._initSuccess,this)},o._initSuccess=function(n,t){n==N.HUAWEI_LOGIN.SIGN_IN_SUCCESS?(E.instance.isHwLogin=!0,this._loginGame()):n==N.HUAWEI_LOGIN.INIT_SUCCESS?this.btnNodeHw.active=!0:n==N.HUAWEI_LOGIN.INIT_UNDER_AGE||n==N.HUAWEI_LOGIN.INIT_ERROR||n==N.HUAWEI_LOGIN.SIGN_IN_ERROR&&(g.instance.showTips(N.ROOM_TIPS.HUA_WEI_LOAGIN_ERROR),this.loadAni.node.active=!1,this.loadAni.stop(),this._isClick=!1)},o.onStartGameHW=function(){this._isClick||(this._isClick=!0,this.loadAni.node.active=!0,this.loadAni.play(),E.instance.hwSignIn())},o.onStartGame=function(){this._isClick||(this._isClick=!0,this.loadAni.node.active=!0,this.loadAni.play(),this._loginGame())},o._loginGame=function(){var n=this;if(E.instance.isChangeWifiType){var t=p.instance.playerInfo.playerId;E.instance.initSDK(t,(function(t){t?(g.instance.showDialog(N.PANEL_NAME.SELECT_GAME),g.instance.hideDialog(N.PANEL_NAME.START_GAME)):g.instance.showTips(N.ROOM_TIPS.LOGIN_GAME_ERROR),n.loadAni.node.active=!1,n.loadAni.stop(),n._isClick=!1}))}else E.instance.createRoomAI((function(){g.instance.showDialog(N.PANEL_NAME.READY)}),(function(){g.instance.showTips(N.ROOM_TIPS.CREATE_ROOM_ERROR)}))},o._initLanguage=function(){var n=this.dotNode.position;f===N.I18_LANGUAGE.ENGLISH?(this.dotNode.setPosition(27,n.y,n.z),this.languageZhLabel.color=q.NONE,this.languageEnLabel.color=q.CHOOSE,this.loadingNodeEn.active=!0,this.loadingNodeZh.active=!1,this.startSk=this.loadingNodeEn.getComponent(d.Skeleton)):(this.dotNode.setPosition(-27,n.y,n.z),this.languageZhLabel.color=q.CHOOSE,this.languageEnLabel.color=q.NONE,this.loadingNodeEn.active=!1,this.loadingNodeZh.active=!0,this.startSk=this.loadingNodeZh.getComponent(d.Skeleton))},o.changeLanguage=function(){var n,t=this.dotNode.position;f===N.I18_LANGUAGE.CHINESE?(n=N.I18_LANGUAGE.ENGLISH,this.dotNode.setPosition(27,t.y,t.z),this.languageZhLabel.color=q.NONE,this.languageEnLabel.color=q.CHOOSE,this.loadingNodeEn.active=!0,this.loadingNodeZh.active=!1,this.startSk=this.loadingNodeEn.getComponent(d.Skeleton),this.startSk.addAnimation(0,"idle",!0)):(n=N.I18_LANGUAGE.CHINESE,this.dotNode.setPosition(-27,t.y,t.z),this.languageZhLabel.color=q.CHOOSE,this.languageEnLabel.color=q.NONE,this.loadingNodeEn.active=!1,this.loadingNodeZh.active=!0,this.startSk=this.loadingNodeZh.getComponent(d.Skeleton),this.startSk.addAnimation(0,"idle",!0)),b(n),A();var i=p.instance.playerInfo.playerName;I.randomName(i).then((function(n){p.instance.updatePlayerInfo("playerName",n)}))},t}(h)).prototype,"loadingNodeEn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(k.prototype,"loadingNodeZh",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(k.prototype,"btnNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"btnNodeHw",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(k.prototype,"loadAni",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(k.prototype,"dotNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"changeLanguageNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(k.prototype,"languageZhLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(k.prototype,"languageEnLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=k))||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/staticBatch.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,c,n,a,o,s,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,c=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,o=t.Node,s=t.BatchingUtility,l=t.Component}],execute:function(){var u,h,p,f,d;n._RF.push({},"d5c7e+7srFCRZQfAJvjyREK","staticBatch",void 0);var y=a.ccclass,B=a.property;t("StaticBatch",(u=y("StaticBatch"),h=B([o]),u((d=e((f=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,r(e,"needBatches",d,c(e)),e}return i(e,t),e.prototype.start=function(){var t=this;this.needBatches.forEach((function(e){s.batchStaticModel(e,t.node)}))},e}(l)).prototype,"needBatches",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=f))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(t){var a,s,e,n,i,o,r;return{setters:[function(t){a=t.createClass},function(t){s=t.cclegacy,e=t._decorator,n=t.sys,i=t.native,o=t.log},function(t){r=t.Util}],execute:function(){var c,h;s._RF.push({},"5689348bSJGyYo12WGa6eeJ","storageManager",void 0);var u=e.ccclass;e.property,t("StorageManager",u("StorageManager")(((h=function(){function t(){this._jsonData={},this._path=null,this.KEY_CONFIG="template",this._markSave=!1,this._saveTimer=-1}var s=t.prototype;return s.start=function(){var t;(this._jsonData={userId:""},this._path=this._getConfigPath(),n.isNative)?t=i.fileUtils.getValueMapFromFile(this._path)[this.KEY_CONFIG]:t=n.localStorage.getItem(this.KEY_CONFIG);if(o("content",t),t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=r.decrypt(t));try{var a=JSON.parse(t);o("content1",a),this._jsonData=a}catch(t){}}},s.setConfigDataWithoutSave=function(t,a){var s=this._jsonData.userId;this._jsonData[s]?this._jsonData[s][t]=a:console.error("no account can not save"),this.save()},s.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this._markSave=!0},s.getConfigData=function(t){var a=this._jsonData.userId;if(this._jsonData[a]){var s=this._jsonData[a][t];return s||""}return o("no account can not load"),""},s.setGlobalData=function(t,a){this._jsonData[t]=a,this.save()},s.getGlobalData=function(t){return this._jsonData[t]},s.setUserId=function(t){this._jsonData.userId=t,this._jsonData[t]||(this._jsonData[t]={}),this.save()},s.getUserId=function(){return this._jsonData.userId},s.scheduleSave=function(){this._markSave&&this.save()},s.markModified=function(){this._markSave=!0},s.save=function(){var t=JSON.stringify(this._jsonData),a="@"+r.encrypt(t);if(this._markSave=!1,n.isNative){var s={};s[this.KEY_CONFIG]=a,i.fileUtils.writeValueMapToFile(s,this._path)}else{n.localStorage.setItem(this.KEY_CONFIG,a)}},s._getConfigPath=function(){var t=n.platform,a="";return t===n.OS.WINDOWS?a="src/conf":t===n.OS.LINUX?a="./conf":n.isNative?(a=i.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}]),t}())._instance=void 0,c=h))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/test.ts",["./rollupPluginModLoBabelHelpers.js","cc","./collider_manager.ts"],(function(e){var t,i,o,n,r,a,s,l,c,u,p,h,y,d,v,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Quat,l=e.Vec3,c=e.Node,u=e.Vec2,p=e.input,h=e.Input,y=e.director,d=e.KeyCode,v=e.Component},function(e){_=e.ColliderManager}],execute:function(){var m,f,D,b,E,w,K;r._RF.push({},"a4399w5MYVMwKPHWTL0IU28","test",void 0);var Y=a.ccclass,k=a.property,N=new s,g=new l,P=.5*Math.PI;e("test",(m=Y("test"),f=k(c),D=k(c),m((w=t((E=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"buildNode",w,n(t)),o(t,"playerNode",K,n(t)),t._moveDir=new u(0,0),t._moveSpeed=10,t._movementVector=new l,t}i(t,e);var r=t.prototype;return r.start=function(){_.instance.buildCollider(this.buildNode)},r.onEnable=function(){p.on(h.EventType.KEY_DOWN,this.keyDown.bind(this)),p.on(h.EventType.KEY_UP,this.keyUp.bind(this))},r.onDisable=function(){p.off(h.EventType.KEY_DOWN,this.keyDown.bind(this)),p.off(h.EventType.KEY_UP,this.keyUp.bind(this))},r.update=function(e){this.movePlayer(e),_.instance.updatePlayerCollider(this.playerNode,.5,null)},r.movePlayer=function(e){var t;if(!this._moveDir.equals(u.ZERO)){this._moveDir.normalize();var i=null==(t=y.getScene())||null==(t=t.renderScene)?void 0:t.cameras[0];if(i){i.node.getRotation(N),l.transformQuat(g,new l(0,0,1),N),g.multiplyScalar(-1);var o=Math.atan2(this._moveDir.y,this._moveDir.x)-P;g.y=0,g.normalize(),l.rotateY(this._movementVector,g,l.ZERO,o);var n=this._moveSpeed*e;this.playerNode.setPosition(this.playerNode.position.x+this._movementVector.x*n,this.playerNode.position.y,this.playerNode.position.z+this._movementVector.z*n)}}},r.keyDown=function(e){switch(e.keyCode){case d.KEY_W:this._moveDir.y=1;break;case d.KEY_S:this._moveDir.y=-1;break;case d.KEY_A:this._moveDir.x=-1;break;case d.KEY_D:this._moveDir.x=1}},r.keyUp=function(e){switch(e.keyCode){case d.KEY_W:case d.KEY_S:this._moveDir.y=0;break;case d.KEY_A:case d.KEY_D:this._moveDir.x=0}},t}(v)).prototype,"buildNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(E.prototype,"playerNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=E))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/tip_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./constant.ts","./LanguageData.ts"],(function(t){var n,e,i,a,r,c,o,l,s,u,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,o=t.Label,l=t.Component},function(t){s=t.UIManager},function(t){u=t.Constant},function(t){p=t.updateSceneRenderers}],execute:function(){var f,h,_,g,b;r._RF.push({},"a8b69ytN4pOUJe92nK307gC","tip_panel",void 0);var y=c.ccclass,P=c.property;t("TipPanel",(f=y("TipPanel"),h=P(o),f((b=n((g=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return n=t.call.apply(t,[this].concat(r))||this,i(n,"txtTip",b,a(n)),n._callback=null,n}e(n,t);var r=n.prototype;return r.show=function(t,n){p(),this.txtTip.string=t,this._callback=n},r.onOk=function(){this._callback&&this._callback(),s.instance.hideDialog(u.PANEL_NAME.TIP_PANEL)},r.onCancel=function(){s.instance.hideDialog(u.PANEL_NAME.TIP_PANEL)},n}(l)).prototype,"txtTip",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=g))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts"],(function(t){var e,n,i,o,r,s,a,p,l,c,u,h,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.LabelComponent,p=t.Vec3,l=t.UITransform,c=t.isValid,u=t.AnimationComponent,h=t.Component},function(t){d=t.PoolManager}],execute:function(){var f,g,v,y,m;r._RF.push({},"a91d7M56W1FG4vm4cXb+REy","tips",void 0);var b=s.ccclass,T=s.property;t("Tips",(f=b("Tips"),g=T(a),f((m=e((y=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"lbTips",m,o(e)),e.targetPos=void 0,e}return n(e,t),e.prototype.show=function(t,e){var n,i,o=this;this.targetPos=new p(0,0,0),this.node.setPosition(this.targetPos),this.lbTips.string=t;var r=null==(n=this.lbTips.node.getComponent(l))?void 0:n.contentSize;if(c(r)){null==(i=this.node.getComponent(l))||i.setContentSize(r.width+100<240?240:r.width+100,r.height+30);var s=this.node.getComponent(u);s.play(),s.once(u.EventType.FINISHED,(function(){e&&e(),d.instance.putNode(o.node)}))}else d.instance.putNode(this.node)},e}(h)).prototype,"lbTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/transition_bg_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts"],(function(n){var t,i,e,o,a,r,s,c,l,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.AnimationComponent,c=n.director,l=n.Component},function(n){p=n.PoolManager}],execute:function(){var u,I,N,d,T,f;a._RF.push({},"6c0e1Yz4RlHS5dVcNj0bXBe","transition_bg_panel",void 0);var y=r.ccclass,h=r.property;n("TransitionBgPanel",(u=y("TransitionBgPanel"),I=h(s),u(((f=function(n){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,e(t,"animation",T,o(t)),t}return i(t,n),t.prototype.show=function(n){var i=this;c.addPersistRootNode(this.node),this.animation.play(t.TRANSITION_IN),this.animation.once(s.EventType.FINISHED,(function(){i.animation.play(t.TRANSITION_OUT),i.animation.once(s.EventType.FINISHED,(function(){c.removePersistRootNode(i.node),p.instance.putNode(i.node),n&&n()}))}))},t}(l)).TRANSITION_IN="transitionIn",f.TRANSITION_OUT="transitionOut",T=t((d=f).prototype,"animation",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=d))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/transition_panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./clientEvent.ts","./constant.ts"],(function(n){var t,e,i,o,a,r,s,c,l,u,p,N;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.AnimationComponent,c=n.director,l=n.Component},function(n){u=n.PoolManager},function(n){p=n.ClientEvent},function(n){N=n.Constant}],execute:function(){var _,d,f,v,h,T;a._RF.push({},"958f1KcNipDeqKgkqWmPTox","transition_panel",void 0);var m=r.ccclass,I=r.property;n("TransitionPanel",(_=m("TransitionPanel"),d=I(s),_(((T=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,i(t,"animation",h,o(t)),t._loadSceneOver=!1,t._sceneName="",t}e(t,n);var a=t.prototype;return a.show=function(n){var e=this;this._sceneName=n,c.addPersistRootNode(this.node),this._loadSceneOver=!1,this.animation.play(t.TRANSITION_IN),c.preloadScene(N.SCENE_NAME.SLECT,(function(){e._loadSceneOver=!0,e._transitionOut()}))},a._transitionOut=function(){if(this._loadSceneOver){var n=this;c.loadScene(this._sceneName,(function(){n.animation.play(t.TRANSITION_OUT),n.animation.once(s.EventType.FINISHED,(function(){c.removePersistRootNode(n.node),u.instance.putNode(n.node),p.dispatchEvent(N.EVENT_NAME.ON_GAME_321)}))}))}},t}(l)).TRANSITION_IN="transitionIn",T.TRANSITION_OUT="transitionOut",h=t((v=T).prototype,"animation",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./poolManager.ts","./tips.ts","./constant.ts","./transition_panel.ts","./transition_bg_panel.ts"],(function(i){var t,n,o,e,a,s,r,p,c,h,u;return{setters:[function(i){t=i.createClass},function(i){n=i.cclegacy,o=i._decorator,e=i.isValid,a=i.find},function(i){s=i.ResourceUtil},function(i){r=i.PoolManager},function(i){p=i.Tips},function(i){c=i.Constant},function(i){h=i.TransitionPanel},function(i){u=i.TransitionBgPanel}],execute:function(){var l,f;n._RF.push({},"f9384FYDp5GqoW+CtrCla3U","uiManager",void 0);var g=o.ccclass;o.property,i("UIManager",g("UIManager")(((f=function(){function i(){this._dictSharedPanel={},this._dictLoading={},this._arrPopupDialog=[],this._showTipsTime=0}var n=i.prototype;return n.isDialogVisible=function(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;var t=this._dictSharedPanel[i];return e(t)&&t.active&&t.parent},n.showDialog=function(i,t,n,o){var r=this;if(!this._dictLoading[i]){var p=i.lastIndexOf("/"),c=i.slice(p+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(i)){var h=this._dictSharedPanel[i];if(e(h)){var u=null;u=a(o?"Canvas/ui/tip":"Canvas/ui/dislog"),h.parent=u,h.active=!0;var l=h.getComponent(c),f=h.getComponent(c.charAt(0).toUpperCase()+c.slice(1));if(l&&l.show)l.show.apply(l,t),n&&n(l);else{if(!f||!f.show)throw"查找不到脚本文件"+c;f.show.apply(f,t),n&&n(f)}return}}this._dictLoading[i]=!0,s.createUI(i,(function(o,e){var a=!1;if(r._dictLoading[i]||(a=!0),r._dictLoading[i]=!1,o)console.error(o);else{r._dictSharedPanel[i]=e;var s=e.getComponent(c),p=e.getComponent(c.charAt(0).toUpperCase()+c.slice(1));if(s&&s.show)s.show.apply(s,t),n&&n(s);else{if(!p||!p.show)throw"查找不到脚本文件"+c;p.show.apply(p,t),n&&n(p)}a&&r.hideDialog(i)}}),o)}},n.hideDialog=function(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){var n=this._dictSharedPanel[i];if(n&&e(n)){var o=n.getComponent("animationUI");o?o.close((function(){n.parent=null,t&&"function"==typeof t&&t()})):(n.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1},n.pushToPopupSeq=function(i,t,n){var o={panelPath:i,scriptName:t,param:n,isShow:!1};this._arrPopupDialog.push(o),this._checkPopupSeq()},n.insertToPopupSeq=function(i,t,n){var o={panelPath:t,param:n,isShow:!1};this._arrPopupDialog.splice(i,0,o)},n.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t._arrPopupDialog[0]&&t._arrPopupDialog[0].panelPath===i&&(t._arrPopupDialog.shift(),t._checkPopupSeq())}))},n._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var i=this._arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this._arrPopupDialog[0].isShow=!0)}},n.showTips=function(i,t){var n=this,o=String(i),e=function(){n._showTipsAni(o,t)},a=Date.now();if(a-this._showTipsTime<800){var s=800-(a-this._showTipsTime);setTimeout((function(){e()}),s),this._showTipsTime=a+s}else e(),this._showTipsTime=a},n._showTipsAni=function(i,t){s.getUIPrefabRes("common/tips",(function(n,o){n||r.instance.getNode(o,a("Canvas")).getComponent(p).show(i,t)}))},n.showTransition=function(i){s.getUIPrefabRes(c.PANEL_NAME.TRANSITION,(function(t,n){t||r.instance.getNode(n,a("")).getComponent(h).show(i)}))},n.showTransitionBg=function(i){s.getUIPrefabRes(c.PANEL_NAME.TRANSITION_BG,(function(t,n){t||r.instance.getNode(n,a("Canvas/ui/tip")).getComponent(u).show(i)}))},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=void 0,l=f))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./LanguageData.ts","./constant.ts"],(function(r){var e,t,n,o,a,i,u,f,h;return{setters:[function(r){e=r.asyncToGenerator,t=r.regeneratorRuntime},function(r){n=r.cclegacy,o=r._decorator,a=r.randomRange,i=r.JsonAsset},function(r){u=r.ResourceUtil},function(r){f=r._language},function(r){h=r.Constant}],execute:function(){var c;n._RF.push({},"51238kLGAFBiLoz3gxcwxtH","util",void 0);var s=o.ccclass;o.property,r("Util",s("Util")(c=function(){function r(){}return r.clone=function(r){if(null===r||"object"!=typeof r)return r;var e={};for(var t in r.constructor===Array&&(e=[]),r)r.hasOwnProperty(t)&&(e[t]=this.clone(r[t]));return e},r.objectToArray=function(r){var e=[];for(var t in r)r.hasOwnProperty(t)&&e.push(r[t]);return e},r.arrayToObject=function(r,e){var t={};for(var n in r)r.hasOwnProperty(n)&&r[n][e]&&(t[r[n][e]]=r[n]);return t},r.getWeightRandIndex=function(r,e){for(var t=Math.floor(Math.random()*e),n=0,o=0;o<r.length&&!(t<(n+=r[o]));o++);return o},r.getRandomNFromM=function(r,e){for(var t=[],n=0,o=0;o<e&&!(o>=r+1);){n=this.getRandomInt(0,r);for(var a=0,i=0;i<o;i++)if(t[i]===n){a=1;break}0===a&&(t[o]=n,o++)}return t},r.getRandomInt=function(r,e){var t=Math.random()*(e-r+1)+r;return Math.floor(t)},r.getStringLength=function(r){for(var e=r,t=0,n=0,o=e.length;n<o;n++){t+=e.charCodeAt(n)<=255?1:2}return Math.ceil(t/2)},r.isEmptyObject=function(r){var e=!0;if(r&&r.constructor===Object){for(var t in r)if(r.hasOwnProperty(t)){e=!1;break}}else e=!1;return e},r.isNewDay=function(r){var e=new Date(r),t=new Date,n=e.getYear(),o=e.getMonth(),a=e.getDate(),i=t.getYear(),u=t.getMonth(),f=t.getDate();return i>n||(u>o||f>a)},r.getPropertyCount=function(r){var e,t=0;for(e in r)r.hasOwnProperty(e)&&t++;return t},r.difference=function(r,e){var t=[];if(r.constructor!==Array||e.constructor!==Array)return t;for(var n=r.length,o=0;o<n;o++)-1===e.indexOf(r[o])&&t.push(r[o]);return t},r._stringToArray=function(r){var e,t="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+t+"]"),a="\\ud83c[\\udffb-\\udfff]",i="[\\ufe0e\\ufe0f]?",u="["+n+"]",f="(?:"+u+"|"+a+")"+"?",h="[\\ud800-\\udfff]",c="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",d=i+f+("(?:\\u200d(?:"+[c,s,g].join("|")+")"+i+f+")*"),l="(?:"+[c+u+"?",u,s,g,h].join("|")+")",v=RegExp(a+"(?="+a+")|"+l+d,"g");return e=r,o.test(e)?function(r){return r.match(v)||[]}(r):function(r){return r.split("")}(r)},r.simulationUUID=function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},r.trim=function(r){return r.replace(/(^\s*)|(\s*$)/g,"")},r.isNowValid=function(r,e){var t=new Date(r),n=new Date(e),o=!1;if(t.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>t}return o},r.getDeltaDays=function(r,e){r=new Date(r),e=new Date(e);var t=r.getFullYear(),n=r.getMonth()+1,o=r.getDate(),a=e.getFullYear(),i=e.getMonth()+1,u=e.getDate();r=new Date(t+"/"+n+"/"+o+" GMT+0800").getTime();var f=(e=new Date(a+"/"+i+"/"+u+" GMT+0800").getTime())-r;return Math.floor(f/864e5)},r.getMin=function(r){var e=null;if(r.constructor===Array)for(var t=r.length,n=0;n<t;n++)e=0===n?Number(r[0]):e>Number(r[n])?Number(r[n]):e;return e},r.formatTwoDigits=function(r){return(Array(2).join(0)+r).slice(-2)},r.formatDate=function(r,e){var t={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},r.getDay=function(){var r=new Date;return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()},r.formatName=function(r,e){e=e||6;var t=this._stringToArray(r),n="";if(t.length>e){for(var o=0;o<e;o++)n+=t[o];n+="..."}else n=r;return n},r.formatMoney=function(r){for(var e=["","K","M","G","T","P","E","Z","Y","B","N","D"],t="",n=0;n<e.length;n++){if(!(r>=1e4)){t=Math.floor(r)+e[n];break}r/=1e3}return""===t&&(t=Math.floor(r)+"U"),t},r.formatValue=function(r){for(var e=[],t="",n=0;n<26;n++)e.push(String.fromCharCode(97+n));for(var o=0;o<e.length;o++){if(!(r>=1e4)){t=Math.floor(r)+e[o];break}r/=1e3}return t},r.formatTimeForSecond=function(r,e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var o="",a=r%60,i=Math.floor(r/60);i=i<0?0:i;var u=Math.floor(i/60),f=i%60;return e||(u>0?(o+=u>9?u.toString():"0"+u,o+=":"):o+="00:"),t||(o+=f>9?f.toString():"0"+f,o+=":"),n||(o+=a>9?a.toString():"0"+a),o},r.formatTimeForMillisecond=function(r){var e=Math.floor(r/1e3%60),t=Math.floor(r/1e3/60%60);return{hour:Math.floor(r/1e3/60/60),minute:t,second:e}},r.rand=function(r){for(var e=this.clone(r),t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),o=e[n];e[n]=e[t],e[t]=o}return e},r.getOffsetMimutes=function(r,e){var t=e-r;return Math.floor(t%36e5/6e4)},r.formatNumToFixed=function(r,e){return void 0===e&&(e=0),Number(r.toFixed(e))},r.lerp=function(r,e,t){void 0===t&&(t=.25);var n=e;return r>e?n=e+(r-e)*t:r<e&&(n=e-(e-r)*t),n},r.decrypt=function(r){var e=6;r.length%2==0&&(e=7);for(var t="",n=0;n<r.length-e;n+=2)t+=r[n+1],t+=r[n];return t+=r.slice(r.length-e+1),t=this._base64Decode(t)},r.encrypt=function(r){var e=this._base64encode(r),t=6;e.length%2==0&&(t=7);for(var n="",o=0;o<(e.length-t+1)/2;o++)n+=e[2*o+1],n+=e[2*o];return n+=e.slice(e.length-t+1)},r._base64encode=function(r){var e,t,n,o,a,i,u,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(r=this._utf8Encode(r);c<r.length;)o=(e=r.charCodeAt(c++))>>2,a=(3&e)<<4|(t=r.charCodeAt(c++))>>4,i=(15&t)<<2|(n=r.charCodeAt(c++))>>6,u=63&n,isNaN(t)?i=u=64:isNaN(n)&&(u=64),h=h+f.charAt(o)+f.charAt(a)+f.charAt(i)+f.charAt(u);return h},r._utf8Encode=function(r){r=r.replace(/\r\n/g,"\n");for(var e="",t=0;t<r.length;t++){var n=r.charCodeAt(t);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},r._utf8Decode=function(r){for(var e="",t=0,n=0,o=0,a=0;t<r.length;)(n=r.charCodeAt(t))<128?(e+=String.fromCharCode(n),t++):n>191&&n<224?(o=r.charCodeAt(t+1),e+=String.fromCharCode((31&n)<<6|63&o),t+=2):(o=r.charCodeAt(t+1),a=r.charCodeAt(t+2),e+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),t+=3);return e},r._base64Decode=function(r){var e,t,n,o,a,i,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="",h=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<r.length;)e=u.indexOf(r.charAt(h++))<<2|(o=u.indexOf(r.charAt(h++)))>>4,t=(15&o)<<4|(a=u.indexOf(r.charAt(h++)))>>2,n=(3&a)<<6|(i=u.indexOf(r.charAt(h++))),f+=String.fromCharCode(e),64!=a&&(f+=String.fromCharCode(t)),64!=i&&(f+=String.fromCharCode(n));return f=this._utf8Decode(f)},r.checkIsLowPhone=function(){if(window.wx){var r=-1,e=window.wx.getSystemInfoSync();if(e.system.indexOf("iOS")>=0){for(var t=e.model,n=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],a=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6"],i=["iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8"],u=0;u<n.length;u++)t.indexOf(n[u])>=0&&(r=5);for(var f=0;f<o.length;f++)t.indexOf(o[f])>=0&&(r=10);for(var h=0;h<a.length;h++)t.indexOf(a[h])>=0&&(r=20);for(var c=0;c<i.length;c++)t.indexOf(i[c])>=0&&(r=30)}else r=e.benchmarkLevel;return r<22}return!1},r.getTwoNodeXZLength=function(r,e,t){void 0===t&&(t=!1);var n=t?r.position.x:r.worldPosition.x,o=t?r.position.z:r.worldPosition.z,a=t?e.position.x:e.worldPosition.x,i=t?e.position.z:e.worldPosition.z;return this.getTwoPosXZLength(n,o,a,i)},r.getTwoPosXZLength=function(r,e,t,n){var o=r-t,a=e-n;return Math.sqrt(o*o+a*a)},r.distance=function(r,e,t){return Math.sqrt(r*r+e*e+t*t)},r.createRandomName=function(){for(var r="",e=0;e<Math.round(3*Math.random())+1;e++)r+=String.fromCharCode(Math.round(26*Math.random())+97),r+=String.fromCharCode(Math.round(20901*Math.random())+19968),Math.random()>.5&&(r=r.split("").reverse().join(""));return r},r.randomName=function(){var r=e(t().mark((function r(e){var n,o,c;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.loadResType("jsons/names",i);case 2:if(n=r.sent,f!==h.I18_LANGUAGE.CHINESE){r.next=14;break}return"","",o=""+(0==e?"黑心哥":"按你胃"),r.abrupt("return",o);case 14:return c=n.json.enNames,r.abrupt("return",c[Math.floor(a(0,1)*c.length)]);case 16:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),r}())||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/virtualPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Vec3,s=t.Component}],execute:function(){var c;n._RF.push({},"f0cd5+RWG1J8pckW7ASsdKo","virtualPlayer",void 0);var r=i.ccclass;t("VirtualPlayer",r("VirtualPlayer")(c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this)._curAngleY=0,e._vec3_0=new o,e._angle_0=new o,e._next_vec3_0=new o,e}e(n,t);var i=n.prototype;return i.init=function(t){this._curAngleY=0,this._vec3_0.set(t)},i.playAction=function(t){this._curAngleY=t.angleY,this._vec3_0.set(t.posX,0,t.posZ),this._angle_0.set(0,this._curAngleY,0)},i.playActionRecovery=function(){this.node.setRotationFromEuler(this._angle_0),this.node.setPosition(this._vec3_0)},i.updateState=function(t,e){o.lerp(this._next_vec3_0,this.node.position,this._vec3_0,.2),this.node.setRotationFromEuler(this._angle_0),this.node.setPosition(this._next_vec3_0)},n}(s))||c);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});